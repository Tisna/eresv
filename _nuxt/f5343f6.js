(window.webpackJsonp=window.webpackJsonp||[]).push([[96,23],{1135:function(t,e,o){"use strict";o.r(e);var n=o(683),r=o(111),l=o(415),c=o(413),d=o(1059),m=o(1056),f=o(639),h=o(412),v=o(680),_=o(801),y=o(198),x=(o(11),o(62),o(34),o(54),o(328)),k=o(783),$=o.n(k),C=(o(784),{name:"FormTask",components:{TiptapVuetify:x.p,Dropzone:$.a},props:{formData:{type:Object,default:function(){return{}}}},data:function(){return{dialog:!1,submitLoad:!1,dialogLoading:!1,show:!1,formTitle:"",menu:"",menu1:"",buttonTitle:"",maxWidth:"550px",itemComments:[{name:"Frozen Yogurt",calories:159},{name:"Ice cream sandwich",calories:237},{name:"Eclair",calories:262},{name:"Cupcake",calories:305},{name:"Gingerbread",calories:356},{name:"Jelly bean",calories:375},{name:"Lollipop",calories:392},{name:"Honeycomb",calories:408},{name:"Donut",calories:452},{name:"KitKat",calories:518}],itemApproval:[{id:"0",title:"Pending"},{id:"1",title:"Approved"}],form:{id:null,department:null,sub_category:{title:null},title:null,description:null,color:null,backgroundImage:{name:"",originalName:"",downloadURL:"",uuid:""}},options:{url:"https://sbo2.imip.co.id:3001/backendcore/api/attachment",timeout:9e9,thumbnailWidth:50,thumbnailHeight:50,addRemoveLinks:!0,dictDefaultMessage:"<span class='mdi mdi-cloud-upload'></span> UPLOAD HERE",headers:{Authorization:this.$auth.$storage.getLocalStorage("_token.local")}},fileToUpload:{},statusProcessing:"insert",itemSubCategoy:[],itemEmployee:[],itemMilestone:[],itemPriority:[],extensions:[x.g,x.a,x.o,x.j,x.l,x.m,[x.f,{options:{levels:[1,2,3]}}],x.b,x.e],extensions2:[x.g,x.l,x.m,[x.f,{options:{levels:[1,2,3]}}],x.b,x.e]}},mounted:function(){this.getPriority(),this.getEmployee()},methods:{getMilestone:function(){var t=this;this.$axios.get("/api/master/task-section",{params:{department:this.form.department}}).then((function(e){t.itemMilestone=e.data.data.simple}))},getPriority:function(){var t=this;this.$axios.get("/api/master/task-priority",{params:{department:this.form.department}}).then((function(e){t.itemPriority=e.data.data.rows}))},getEmployee:function(){var t=this;this.$axios.get("/api/master/related-employees",{params:{department:this.form.department}}).then((function(e){t.itemEmployee=e.data.rows}))},sendingParams:function(t,e,o){o.append("source_id",this.form.task_temp_id),o.append("type","tasks")},handleError:function(t,e,o){this.$swal({type:"error",title:"Oops...",text:e.message})},reloadAttachment:function(t,e){},selectSubCategory:function(){var t=this,e=this.form.department;this.$axios.get("/api/master/department-sub-category/1",{params:{category:e}}).then((function(e){t.$auth.$storage.setState("subCategory",e.data.data),t.itemSubCategoy=t.$auth.$storage.getState("subCategory")}))},returnData:function(data){"Sub category"===data.type?this.itemSubCategoy=data.rows:"Priority"===data.type&&(this.itemPriority=data.rows)},newData:function(form){this.$refs.dialogForm.openDialog(),this.statusProcessing="insert",this.formTitle="News Ticket",this.form=Object.assign({},form),this.maxWidth="550px",this.buttonTitle="Save"},editItem:function(t){this.form=Object.assign({},t),this.form.assignees=JSON.parse(t.assignees),this.$refs.dialogForm.openDialog(),this.selectSubCategory(),this.getMilestone(),this.statusProcessing="update",this.formTitle="Update Ticket",this.maxWidth="800px",this.buttonTitle="Update"},close:function(){var t=this;this.$refs.dialogForm.closeDialog(),this.statusProcessing="insert",setTimeout((function(){t.form=Object.assign({},t.defaultItem)}),300)},save:function(){var form=this.form,t=this.statusProcessing,data={form:form,status:t};"insert"===t?this.store("post","/api/tasks/task",data):"update"===t&&this.store("put","/api/tasks/task/"+this.form.id,data)},store:function(t,e,data){var o=this,n=this;n.submitLoad=!0,this.$axios({method:t,url:e,data:data}).then((function(t){o.submitLoad=!1,o.$refs.dialogForm.closeDialog(),o.$emit("getDataFromApi")})).catch((function(t){o.$swal({type:"error",title:"Error",text:t.response.data.message}),n.submitLoad=!1}))}}}),D=(o(993),o(61)),component=Object(D.a)(C,(function(){var t=this,e=t._self._c;return e("div",[e("DialogForm",{ref:"dialogForm",attrs:{"max-width":t.maxWidth,"dialog-title":t.formTitle,"button-title":"Save"},scopedSlots:t._u([{key:"content",fn:function(){return[e(h.a,{attrs:{dense:""}},[e(c.a,{attrs:{cols:"12",md:"insert"===t.statusProcessing?"12":"7"}},[e(h.a,{attrs:{dense:""}},["update"===t.statusProcessing?e(c.a,{staticClass:"pa-1 mb-1",attrs:{cols:"12",md:"8"}},[e(v.a,{attrs:{items:t.itemApproval,"item-text":"title","item-value":"id",label:"Approval",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.approve,callback:function(e){t.$set(t.form,"approve",e)},expression:"form.approve"}})],1):t._e(),t._v(" "),"update"===t.statusProcessing?e(c.a,{staticClass:"pa-1 mb-1",attrs:{cols:"12",md:"4"}},[e(l.a,{attrs:{label:"Completed","hide-details":""},model:{value:t.form.complete,callback:function(e){t.$set(t.form,"complete",e)},expression:"form.complete"}})],1):t._e(),t._v(" "),e(c.a,{staticClass:"pa-1 mb-1",attrs:{cols:"12"}},[e(n.a,{attrs:{items:t.$auth.$storage.getLocalStorage("departments"),label:"Department",placeholder:"Department",outlined:"",dense:"","hide-details":"auto"},on:{change:function(e){return t.selectSubCategory()}},model:{value:t.form.department,callback:function(e){t.$set(t.form,"department",e)},expression:"form.department"}})],1),t._v(" "),e(c.a,{staticClass:"pa-1 mb-1",attrs:{cols:"12"}},[e(n.a,{attrs:{items:t.itemSubCategoy,label:"Sub category",placeholder:"Sub category",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.sub_category.title,callback:function(e){t.$set(t.form.sub_category,"title",e)},expression:"form.sub_category.title"}})],1),t._v(" "),e(c.a,{staticClass:"pa-1 mb-1",attrs:{cols:"12"}},[e(y.a,{attrs:{label:"Title",placeholder:"Title",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),"update"===t.statusProcessing?e(c.a,{staticClass:"pa-1 mb-1",attrs:{cols:"12"}},[e(v.a,{attrs:{items:t.itemMilestone,"item-value":"id","item-text":"title",label:"Milestone",placeholder:"Milestone",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.section_id,callback:function(e){t.$set(t.form,"section_id",e)},expression:"form.section_id"}})],1):t._e(),t._v(" "),e(c.a,{staticClass:"pa-1 mb-1",attrs:{cols:"12",md:"6"}},[e(f.a,{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(o){var n=o.on,r=o.attrs;return[e(y.a,t._g(t._b({attrs:{label:"Start Date","prepend-icon":"mdi-calendar",readonly:"","persistent-hint":"",clearable:"",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}},"v-text-field",r,!1),n))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),e(m.a,{attrs:{"no-title":""},on:{input:function(e){t.menu=!1}},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}})],1)],1),t._v(" "),e(c.a,{staticClass:"pa-1 mb-1",attrs:{cols:"12",md:"6"}},[e(f.a,{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(o){var n=o.on,r=o.attrs;return[e(y.a,t._g(t._b({attrs:{label:"Due Date","prepend-icon":"mdi-calendar",readonly:"","persistent-hint":"",clearable:"",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.due_date,callback:function(e){t.$set(t.form,"due_date",e)},expression:"form.due_date"}},"v-text-field",r,!1),n))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[t._v(" "),e(m.a,{attrs:{"no-title":""},on:{input:function(e){t.menu1=!1}},model:{value:t.form.due_date,callback:function(e){t.$set(t.form,"due_date",e)},expression:"form.due_date"}})],1)],1),t._v(" "),"update"===t.statusProcessing?e(c.a,{staticClass:"pa-1 mb-1",attrs:{cols:"12"}},[e(v.a,{attrs:{items:t.itemPriority,label:"Priority","item-value":"id","item-text":"title",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.priority_id,callback:function(e){t.$set(t.form,"priority_id",e)},expression:"form.priority_id"}})],1):t._e(),t._v(" "),"update"===t.statusProcessing?e(c.a,{staticClass:"pa-1 mb-1",attrs:{cols:"12"}},[e(n.a,{attrs:{items:t.itemEmployee,label:"Assignees","item-text":"name","item-value":"nik","deletable-chips":"","small-chips":"",multiple:"",placeholder:"Assignees",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.assignees,callback:function(e){t.$set(t.form,"assignees",e)},expression:"form.assignees"}})],1):t._e(),t._v(" "),t.show?e(c.a,{staticClass:"pa-1 mb-1",attrs:{sm12:"",md6:""}},[e(d.a,{attrs:{"dot-size":"25","hide-inputs":"","swatches-max-height":"100"},model:{value:t.form.color,callback:function(e){t.$set(t.form,"color",e)},expression:"form.color"}})],1):t._e(),t._v(" "),e(c.a,{staticClass:"pa-1 mb-1",attrs:{sm12:"",md6:""}},[e("span",[t._v("Attachment")]),t._v(" "),e("dropzone",{ref:"attachment",attrs:{id:"attachment",options:t.options,"destroy-dropzone":!0},on:{"vdropzone-sending":function(e,o,n){return t.sendingParams(e,o,n)},"vdropzone-success":function(e,o){return t.reloadAttachment(e,o)},"vdropzone-error":function(e,o,n){return t.handleError(e,o,n)}}})],1),t._v(" "),e(c.a,{staticClass:"pa-1 mb-1",attrs:{cols:"12"}},[e("span",[t._v("Description")]),t._v(" "),e("client-only",{scopedSlots:t._u([{key:"placeholder",fn:function(){return[t._v(" Loading... ")]},proxy:!0}])},[e("tiptap-vuetify",{attrs:{extensions:t.extensions},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1)],1),t._v(" "),"update"===t.statusProcessing?e(c.a,{attrs:{cols:"12",md:"5"}},[e(h.a,[e(c.a,{attrs:{cols:"12"}},[e(_.a,{staticClass:"simple-table",attrs:{elevation:"0",dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("Name")])])]),t._v(" "),e("tbody",t._l(t.itemComments,(function(o){return e("tr",{key:o.name},[e("td",[t._v(t._s(o.name))])])})),0)]},proxy:!0}],null,!1,3557314632)})],1),t._v(" "),e(c.a,{attrs:{cols:"12"}},[e("span",[t._v("Description")]),t._v(" "),e("client-only",{scopedSlots:t._u([{key:"placeholder",fn:function(){return[t._v(" Loading... ")]},proxy:!0}],null,!1,669632662)},[e("tiptap-vuetify",{attrs:{extensions:t.extensions2},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),t._v(" "),e(c.a,{attrs:{cols:"12"}},[e(r.a,{attrs:{color:"green darken-1",dark:"",small:"",loading:t.submitLoad,elevation:"0"},on:{click:function(e){return t.save()}}},[t._v("\n                Comment\n              ")])],1)],1)],1):t._e()],1)]},proxy:!0},{key:"saveData",fn:function(){return[e(r.a,{attrs:{color:"green darken-1",dark:"",small:"",loading:t.submitLoad},on:{click:function(e){return t.save()}}},[t._v("\n        "+t._s(t.buttonTitle)+"\n      ")])]},proxy:!0}])}),t._v(" "),t.dialogLoading?e("LazySpinnerLoading",{ref:"spinnerLoadingImport"}):t._e(),t._v(" "),e("LazyFormMaster",{ref:"formMaster",on:{returnData:t.returnData}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{DialogForm:o(682).default})},682:function(t,e,o){"use strict";o.r(e);var n=o(111),r=o(128),l=o(53),c=o(647),d=o(302),m=o(638),f=o(137),h=o(301),v={name:"DialogForm",props:{maxWidth:{type:String,default:"800px"},dialogTitle:{type:String,default:""}},data:function(){return{dialog:!1}},methods:{addLine:function(){this.$emit("addLine")},openDialog:function(){this.dialog=!0},closeDialog:function(){this.dialog=!1,this.$emit("eventCloseDialog")},saveData:function(){this.$emit("saveData")}}},_=o(61),component=Object(_.a)(v,(function(){var t=this,e=t._self._c;return e(d.a,{attrs:{"no-click-animation":"",persistent:"",scrollable:"","max-width":t.maxWidth,transition:"dialog-top-transition","retain-focus":!1},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(r.a,[e(l.d,[e("span",{staticClass:"subtitle-2"},[t._v(t._s(t.dialogTitle))]),t._v(" "),e(h.a),t._v(" "),e(n.a,{attrs:{icon:"",color:"red",dark:""},on:{click:function(e){return t.closeDialog()}}},[e(f.a,[t._v("mdi-close-circle")])],1)],1),t._v(" "),e(m.a),t._v(" "),e(l.c,{staticClass:"pl-0 pr-0"},[e(c.a,{attrs:{fluid:""}},[t._t("content")],2)],1),t._v(" "),e(m.a),t._v(" "),e(l.a,[e(h.a),t._v(" "),t._t("addLine"),t._v(" "),t._t("saveData")],2)],1)],1)}),[],!1,null,null,null);e.default=component.exports},851:function(t,e,o){var content=o(994);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(19).default)("7bb37411",content,!0,{sourceMap:!1})},993:function(t,e,o){"use strict";o(851)},994:function(t,e,o){var n=o(18)((function(i){return i[1]}));n.push([t.i,".upload-block{border:2px dashed #adadad;border-radius:15px;margin-bottom:20px;padding:30px}",""]),n.locals={},t.exports=n}}]);
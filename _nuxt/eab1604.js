(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{1120:function(e,t,o){"use strict";o.r(t);var l=o(111),n=o(128),r=o(53),c=o(1057),m=o(302),d=o(137),h=o(301),v=(o(33),o(240),o(54),{name:"ApprovalDetails",data:function(){return{dialog:!1,loading:!1,singleSelect:!1,selected:[],itemGroupSearch:[],selectedItems:[],itemSearch:["Category","DocNum","Item Code","Item Name","Whs"],search:"",searchType:"",row:"",itemGroups:null,totalData:0,options:{},form:{},allData:[],headers:[{text:"Approver",value:"ApproverEmployeeName"},{text:"Approval Status",value:"StatusId"},{text:"Response Time",value:"ResponseDate"},{text:"Approval Notes",value:"Notes"},{text:"Approval Schema",value:"ApprovalSchemaName"}]}},watch:{options:{handler:function(){this.getDataFromApi()},deep:!0}},methods:{formatDate:function(e){return e.ResponseDate?this.$moment(new Date(parseInt(e.ResponseDate.substr(6)))).format("YYYY-MM-DD HH:mm:ss"):""},openApprovalStages:function(e){var t=this;this.dialog=!0,this.row=e,this.search="",this.searchType="",this.selected=[],this.allData=[],setTimeout((function(){return t.getDataFromApi()}),100),this.form=e},closeDialog:function(){this.dialog=!1},selectItems:function(){this.$emit("selectItems",{row:this.row,selected:this.selected}),this.closeDialog()},changeSelect:function(e){this.selectedItems=e,this.getDataFromApi()},getDataFromApi:function(){var e=this;this.loading=!0;var t=this,o=window.localStorage.getItem("cherry_token");this.$axios.get("/api/reservation/approval-stages",{params:{options:t.options,form:t.form,searchType:t.searchType,selectedItems:t.selectedItems,itemGroups:t.itemGroups,search:t.search,cherry_token:o}}).then((function(t){e.loading=!1,e.allData=t.data.rows,e.totalData=t.data.total,e.itemGroupSearch=t.data.item_groups})).catch((function(t){e.loading=!1,e.$swal({type:"error",title:"Error",text:t.response.data.message})}))}}}),f=o(61),component=Object(f.a)(v,(function(){var e=this,t=e._self._c;return t(m.a,{attrs:{persistent:"","max-width":"900px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(n.a,{attrs:{elevation:"0"}},[t(r.d,[t("span",{staticClass:"font-weight-medium"},[e._v("Approval Details")]),e._v(" "),t(h.a),e._v(" "),t(l.a,{attrs:{icon:"",color:"red",dark:""},on:{click:function(t){e.dialog=!1}}},[t(d.a,[e._v("mdi-close-circle")])],1)],1),e._v(" "),t(r.c,[t(c.a,{staticClass:"elevation-0",attrs:{"mobile-breakpoint":0,dense:"",headers:e.headers,loading:e.loading,items:e.allData,options:e.options,"single-select":e.singleSelect,"server-items-length":e.totalData,"item-key":"Keys","show-select":"",elevation:"0"},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.ResponseDate",fn:function(o){var l=o.item;return[t("span",{domProps:{textContent:e._s(e.formatDate(l))}})]}}],null,!0),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);
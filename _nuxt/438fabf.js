/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{785:function(t,e,n){n(943)},820:function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"getNormalizedDate",(function(){return he}));n(435);var o=n(840),l=(n(195),n(6),n(40),n(306),n(44),n(666),n(308),n(102),n(33),n(64),n(13),n(654),n(655),n(11),n(62),n(26),n(420),n(421),n(130),n(668),n(16),n(74),n(1144)),c=n(664),f=n(690),h=n(662),d=n(763);function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function v(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==y(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===y(o)?o:String(o)),n)}var r,o}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=C(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},m.apply(this,arguments)}function w(t,p){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},w(t,p)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}var S="handsontableEditor",k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(l,t);var e,n,r,o=O(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),o.apply(this,arguments)}return e=l,r=[{key:"EDITOR_TYPE",get:function(){return"handsontable"}}],(n=[{key:"open",value:function(){m(C(l.prototype),"open",this).call(this),this.htEditor&&this.htEditor.destroy(),"none"===this.htContainer.style.display&&(this.htContainer.style.display=""),this.htEditor=new this.hot.constructor(this.htContainer,this.htOptions),this.htEditor.init(),this.htEditor.rootElement.style.display="",this.cellProperties.strict?this.htEditor.selectCell(0,0):this.htEditor.deselectCell(),Object(c.setCaretPosition)(this.TEXTAREA,0,this.TEXTAREA.value.length),this.refreshDimensions()}},{key:"close",value:function(){this.htEditor&&(this.htEditor.rootElement.style.display="none"),this.removeHooksByKey("beforeKeyDown"),m(C(l.prototype),"close",this).call(this)}},{key:"prepare",value:function(t,col,e,td,n,r){m(C(l.prototype),"prepare",this).call(this,t,col,e,td,n,r);var o=this,c={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,autoColumnSize:!1,autoRowSize:!1,readOnly:!0,fillHandle:!1,autoWrapCol:!1,autoWrapRow:!1,afterOnCellMouseDown:function(t,e){var n=this.getSourceData(e.row,e.col);void 0!==n&&o.setValue(n),o.instance.destroyEditor()},preventWheel:!0,layoutDirection:this.hot.isRtl()?"rtl":"ltr"};this.cellProperties.handsontable&&Object(h.extend)(c,r.handsontable),this.htOptions=c}},{key:"beginEditing",value:function(t,e){var n=this.hot.getSettings().onBeginEditing;n&&!1===n()||m(C(l.prototype),"beginEditing",this).call(this,t,e)}},{key:"createElements",value:function(){m(C(l.prototype),"createElements",this).call(this);var t=this.hot.rootDocument.createElement("DIV");t.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(t),this.htContainer=t,this.assignHooks()}},{key:"finishEditing",value:function(t,e,n){if(this.htEditor&&this.htEditor.isListening()&&this.hot.listen(),this.htEditor&&this.htEditor.getSelectedLast()){var r=this.htEditor.getInstance().getValue();void 0!==r&&this.setValue(r)}m(C(l.prototype),"finishEditing",this).call(this,t,e,n)}},{key:"assignHooks",value:function(){var t=this;this.hot.addHook("afterDestroy",(function(){t.htEditor&&t.htEditor.destroy()}))}},{key:"registerShortcuts",value:function(){var t=this,e=this.hot.getShortcutManager().getContext("editor");m(C(l.prototype),"registerShortcuts",this).call(this);var n={group:S,relativeToGroup:d.b,position:"before"},r=function(e,n){var r=t.htEditor.getInstance();if(void 0!==e&&(e<0||r.flipped&&e>r.countRows()-1?r.deselectCell():r.selectCell(e,0),r.getData().length))return n.preventDefault(),Object(f.stopImmediatePropagation)(n),t.hot.listen(),t.TEXTAREA.focus(),!1};e.addShortcuts([{keys:[["ArrowUp"]],callback:function(e){var n,o,l=t.htEditor.getInstance();return!l.getSelectedLast()&&l.flipped?n=l.countRows()-1:l.getSelectedLast()&&(l.flipped?(o=l.getSelectedLast()[0],n=Math.max(0,o-1)):n=(o=l.getSelectedLast()[0])-1),r(n,e)},preventDefault:!1},{keys:[["ArrowDown"]],callback:function(e){var n,o,l=t.htEditor.getInstance();if(l.getSelectedLast()||l.flipped){if(l.getSelectedLast())if(l.flipped)n=l.getSelectedLast()[0]+1;else if(!l.flipped){var c=l.countRows()-1;o=l.getSelectedLast()[0],n=Math.min(c,o+1)}}else n=0;return r(n,e)},preventDefault:!1}],n)}},{key:"unregisterShortcuts",value:function(){m(C(l.prototype),"unregisterShortcuts",this).call(this),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(S)}}])&&v(e.prototype,n),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(l.a),j=n(663),R=n(671),E=n(711),P=n(727),M=n(1048);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function T(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,H(n.key),n)}}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=N(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},A.apply(this,arguments)}function I(t,p){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},I(t,p)}function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=N(t);if(e){var o=N(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return D(t)}(this,n)}}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}function H(t){var e=function(input,t){if("object"!==_(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===_(e)?e:String(e)}var L=new WeakMap,B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I(t,e)}(l,t);var e,n,r,o=x(l);function l(t){var e,n,r,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),e=o.call(this,t),n=D(e),c=function(t,e,n){var r,o,i,l,c=[],f=[],h=t.length,d=e.length;if(0===h){for(i=0;i<d;i++)f.push(i);return f}for(i=0;i<d;i++){if(o=Object(E.stripTags)(Object(R.stringify)(e[i])),n)l=o.indexOf(t);else{var y=this.cellProperties.locale;l=o.toLocaleLowerCase(y).indexOf(t.toLocaleLowerCase(y))}-1!==l&&(r=o.length-l-h,c.push({baseIndex:i,index:l,charsLeft:r,value:o}))}for(c.sort((function(a,b){if(-1===b.index)return-1;if(-1===a.index)return 1;if(a.index<b.index)return-1;if(b.index<a.index)return 1;if(a.index===b.index){if(a.charsLeft<b.charsLeft)return-1;if(a.charsLeft>b.charsLeft)return 1}return 0})),i=0,d=c.length;i<d;i++)f.push(c[i].baseIndex);return f},(r=H(r="sortByRelevance"))in n?Object.defineProperty(n,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[r]=c,e.query=null,e.strippedChoices=[],e.rawChoices=[],L.set(D(e),{skipOne:!1,isMacOS:e.hot.rootWindow.navigator.platform.indexOf("Mac")>-1}),e}return e=l,r=[{key:"EDITOR_TYPE",get:function(){return"autocomplete"}}],(n=[{key:"getValue",value:function(){var t=this,e=this.rawChoices.find((function(e){return t.stripValueIfNeeded(e)===t.TEXTAREA.value}));return Object(R.isDefined)(e)?e:this.TEXTAREA.value}},{key:"createElements",value:function(){A(N(l.prototype),"createElements",this).call(this),Object(c.addClass)(this.htContainer,"autocompleteEditor"),Object(c.addClass)(this.htContainer,-1===this.hot.rootWindow.navigator.platform.indexOf("Mac")?"":"htMacScroll")}},{key:"open",value:function(){var t=this,e=L.get(this);A(N(l.prototype),"open",this).call(this);var n=this.htEditor.getInstance(),r=void 0===this.cellProperties.trimDropdown||this.cellProperties.trimDropdown;this.showEditableElement(),this.focus();var o=Object(c.getScrollbarWidth)();0===o&&e.isMacOS&&(o+=15),this.addHook("beforeKeyDown",(function(e){return t.onBeforeKeyDown(e)})),n.updateSettings({colWidths:r?[Object(c.outerWidth)(this.TEXTAREA)-2]:void 0,width:r?Object(c.outerWidth)(this.TEXTAREA)+o:void 0,renderer:function(e,n,r,col,o,l,c){Object(M.a)(e,n,r,col,o,l,c);var f,h,d=t.cellProperties,y=d.filteringCaseSensitive,v=d.allowHtml,m=d.locale,w=t.query,O=Object(R.stringify)(l);O&&!v&&-1!==(f=!0===y?O.indexOf(w):O.toLocaleLowerCase(m).indexOf(w.toLocaleLowerCase(m)))&&(h=O.substr(f,w.length),O=O.replace(h,"<strong>".concat(h,"</strong>"))),n.innerHTML=O},autoColumnSize:!0}),e.skipOne&&(e.skipOne=!1),this.hot._registerTimeout((function(){t.queryChoices(t.TEXTAREA.value)}))}},{key:"close",value:function(){this.removeHooksByKey("beforeKeyDown"),A(N(l.prototype),"close",this).call(this)}},{key:"discardEditor",value:function(t){A(N(l.prototype),"discardEditor",this).call(this,t),this.hot.view.render()}},{key:"queryChoices",value:function(t){var e=this,source=this.cellProperties.source;this.query=t,"function"==typeof source?source.call(this.cellProperties,t,(function(t){e.rawChoices=t,e.updateChoicesList(e.stripValuesIfNeeded(t))})):Array.isArray(source)?(this.rawChoices=source,this.updateChoicesList(this.stripValuesIfNeeded(source))):this.updateChoicesList([])}},{key:"updateChoicesList",value:function(t){var e=Object(c.getCaretPosition)(this.TEXTAREA),n=Object(c.getSelectionEndPosition)(this.TEXTAREA),r=this.cellProperties.sortByRelevance,o=this.cellProperties.filter,l=null,f=null,h=t;r&&(l=this.sortByRelevance(this.stripValueIfNeeded(this.getValue()),h,this.cellProperties.filteringCaseSensitive));var d=Array.isArray(l)?l.length:0;if(!1===o)d&&(f=l[0]);else{for(var y=[],i=0,v=h.length;i<v&&!(r&&d<=i);i++)d?y.push(h[l[i]]):y.push(h[i]);f=0,h=y}this.strippedChoices=h,this.htEditor.loadData(Object(j.pivot)([h])),this.updateDropdownHeight(),this.flipDropdownIfNeeded(),!0===this.cellProperties.strict&&this.highlightBestMatchingChoice(f),this.hot.listen(),Object(c.setCaretPosition)(this.TEXTAREA,e,e===n?void 0:n)}},{key:"flipDropdownIfNeeded",value:function(){var t=Object(c.getTrimmingContainer)(this.hot.view._wt.wtTable.TABLE),e=t===this.hot.rootWindow,n=this.cellProperties.preventOverflow;if(e||!e&&(n||"horizontal"===n))return!1;var r=Object(c.offset)(this.TEXTAREA),o=Object(c.outerHeight)(this.TEXTAREA),l=this.getDropdownHeight(),f=t.scrollTop,h=Object(c.outerHeight)(this.hot.view._wt.wtTable.THEAD),d=Object(c.offset)(t),y=r.top-d.top-h+f,v=t.scrollHeight-y-h-o,m=l>v&&y>v;return m?this.flipDropdown(l):this.unflipDropdown(),this.limitDropdownIfNeeded(m?y:v,l),m}},{key:"limitDropdownIfNeeded",value:function(t,e){if(e>t){var n,r=0,i=0,o=0;do{r+=o=this.htEditor.getRowHeight(i)||this.htEditor.view._wt.getSetting("defaultRowHeight"),i+=1}while(r<t);n=r-o,this.htEditor.flipped&&(this.htEditor.rootElement.style.top="".concat(parseInt(this.htEditor.rootElement.style.top,10)+e-n,"px")),this.setDropdownHeight(r-o)}}},{key:"flipDropdown",value:function(t){var e=this.htEditor.rootElement.style;e.position="absolute",e.top="".concat(-t,"px"),this.htEditor.flipped=!0}},{key:"unflipDropdown",value:function(){var t=this.htEditor.rootElement.style;t.position="absolute",t.top="",this.htEditor.flipped=void 0}},{key:"updateDropdownHeight",value:function(){var t=this.htEditor.getColWidth(0)+Object(c.getScrollbarWidth)(this.hot.rootDocument)+2,e=this.cellProperties.trimDropdown;this.htEditor.updateSettings({height:this.getDropdownHeight(),width:e?void 0:t}),this.htEditor.view._wt.wtTable.alignOverlaysWithTrimmingContainer()}},{key:"setDropdownHeight",value:function(t){this.htEditor.updateSettings({height:t})}},{key:"highlightBestMatchingChoice",value:function(t){"number"==typeof t?this.htEditor.selectCell(t,0,void 0,void 0,void 0,!1):this.htEditor.deselectCell()}},{key:"getDropdownHeight",value:function(){var t=this.htEditor.getInstance().getRowHeight(0)||23,e=this.cellProperties.visibleRows;return this.strippedChoices.length>=e?e*t:this.strippedChoices.length*t+8}},{key:"stripValueIfNeeded",value:function(t){return this.stripValuesIfNeeded([t])[0]}},{key:"stripValuesIfNeeded",value:function(t){var e=this.cellProperties.allowHtml,n=Object(j.arrayMap)(t,(function(t){return Object(R.stringify)(t)}));return Object(j.arrayMap)(n,(function(t){return e?t:Object(E.stripTags)(t)}))}},{key:"allowKeyEventPropagation",value:function(t){var e=this.htEditor.getSelectedRangeLast(),n=e?e.from.row:-1,r=!1;return t===P.KEY_CODES.ARROW_DOWN&&n>0&&n<this.htEditor.countRows()-1&&(r=!0),t===P.KEY_CODES.ARROW_UP&&n>-1&&(r=!0),r}},{key:"onBeforeKeyDown",value:function(t){var e=this,n=L.get(this);if(n.skipOne=!1,Object(P.isPrintableChar)(t.keyCode)||t.keyCode===P.KEY_CODES.BACKSPACE||t.keyCode===P.KEY_CODES.DELETE||t.keyCode===P.KEY_CODES.INSERT){var r=10;if(t.keyCode===P.KEY_CODES.C&&(t.ctrlKey||t.metaKey))return;this.isOpened()||(r+=10),this.htEditor&&this.hot._registerTimeout((function(){e.queryChoices(e.TEXTAREA.value),n.skipOne=!0}),r)}}}])&&T(e.prototype,n),r&&T(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(k),U=n(996);function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function V(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==F(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===F(o)?o:String(o)),n)}var r,o}function W(t,p){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},W(t,p)}function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Y(t);if(e){var o=Y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===F(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Y(t){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Y(t)}var G=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W(t,e)}(l,t);var e,n,r,o=z(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),o.apply(this,arguments)}return e=l,r=[{key:"EDITOR_TYPE",get:function(){return"checkbox"}}],(n=[{key:"beginEditing",value:function(t,e){if(e&&"mouseup"===e.type){var n=this.TD.querySelector('input[type="checkbox"]');Object(c.hasClass)(n,"htBadValue")||n.click()}}},{key:"finishEditing",value:function(){}},{key:"init",value:function(){}},{key:"open",value:function(){}},{key:"close",value:function(){}},{key:"getValue",value:function(){}},{key:"setValue",value:function(){}},{key:"focus",value:function(){}}])&&V(e.prototype,n),r&&V(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(U.a),K=n(246),X=n(941),$=n(681);function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function J(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==Z(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===Z(o)?o:String(o)),n)}var r,o}function Q(){return Q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=nt(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Q.apply(this,arguments)}function tt(t,p){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},tt(t,p)}function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=nt(t);if(e){var o=nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function nt(t){return nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nt(t)}var ot="date",it="dateEditor",at=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tt(t,e)}(l,t);var e,n,r,o=et(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).defaultDateFormat="DD/MM/YYYY",e.isCellEdited=!1,e.parentDestroyed=!1,e.$datePicker=null,e}return e=l,n=[{key:"init",value:function(){var t=this;if("function"!=typeof K)throw new Error("You need to include moment.js to your project.");if("function"!=typeof X)throw new Error("You need to include Pikaday to your project.");Q(nt(l.prototype),"init",this).call(this),this.instance.addHook("afterDestroy",(function(){t.parentDestroyed=!0,t.destroyElements()}))}},{key:"createElements",value:function(){Q(nt(l.prototype),"createElements",this).call(this),this.datePicker=this.hot.rootDocument.createElement("DIV"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=9999,this.datePicker.setAttribute("dir",this.hot.isRtl()?"rtl":"ltr"),Object(c.addClass)(this.datePicker,"htDatepickerHolder"),this.hot.rootDocument.body.appendChild(this.datePicker),new $.a(this).addEventListener(this.datePicker,"mousedown",(function(t){return t.stopPropagation()}))}},{key:"destroyElements",value:function(){var t=this.datePicker.parentNode;this.$datePicker&&this.$datePicker.destroy(),t&&t.removeChild(this.datePicker)}},{key:"prepare",value:function(t,col,e,td,n,r){Q(nt(l.prototype),"prepare",this).call(this,t,col,e,td,n,r)}},{key:"open",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.hot.getShortcutManager().getContext("editor");Q(nt(l.prototype),"open",this).call(this),this.showDatepicker(t),e.addShortcut({keys:[["Enter"]],callback:function(t){t.stopPropagation()},group:it})}},{key:"close",value:function(){var t,e=this;this._opened=!1,null!==(t=this.$datePicker)&&void 0!==t&&t.destroy&&this.$datePicker.destroy(),this.instance._registerTimeout((function(){e.instance._refreshBorders()})),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(it),Q(nt(l.prototype),"close",this).call(this)}},{key:"finishEditing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){var n=this.originalValue;void 0!==n&&this.setValue(n)}Q(nt(l.prototype),"finishEditing",this).call(this,t,e)}},{key:"showDatepicker",value:function(t){var e,n=this.TD.getBoundingClientRect(),r=this.cellProperties.dateFormat||this.defaultDateFormat,o=this.instance.view.isMouseDown(),l=!!t&&Object(P.isFunctionKey)(t.keyCode);this.datePicker.style.display="block",this.$datePicker=new X(this.getDatePickerConfig()),this.$datePicker._onInputFocus=function(){},this.datePickerStyle.top="".concat(this.hot.rootWindow.pageYOffset+n.top+Object(c.outerHeight)(this.TD),"px");var f=this.hot.rootWindow.pageXOffset;f=this.hot.isRtl()?n.right-Object(c.outerWidth)(this.datePicker):n.left,this.datePickerStyle.left="".concat(f,"px"),this.originalValue?(e=this.originalValue,K(e,r,!0).isValid()&&this.$datePicker.setMoment(K(e,r),!0),this.getValue()!==this.originalValue&&this.setValue(this.originalValue),l||o||this.setValue("")):this.cellProperties.defaultDate?(e=this.cellProperties.defaultDate,K(e,r,!0).isValid()&&this.$datePicker.setMoment(K(e,r),!0),l||o||this.setValue("")):this.$datePicker.gotoToday()}},{key:"hideDatepicker",value:function(){this.datePickerStyle.display="none",this.$datePicker.hide()}},{key:"getDatePickerConfig",value:function(){var t=this,e=this.TEXTAREA,n={};this.cellProperties&&this.cellProperties.datePickerConfig&&Object(h.deepExtend)(n,this.cellProperties.datePickerConfig);var r=n.onSelect,o=n.onClose;return n.field=e,n.trigger=e,n.container=this.datePicker,n.bound=!1,n.format=n.format||this.defaultDateFormat,n.reposition=n.reposition||!1,n.isRTL=!1,n.onSelect=function(e){var n=e;isNaN(n.getTime())||(n=K(n).format(t.cellProperties.dateFormat||t.defaultDateFormat)),t.setValue(n),t.hideDatepicker(),r&&r()},n.onClose=function(){t.parentDestroyed||t.finishEditing(!1),o&&o()},n}}],r=[{key:"EDITOR_TYPE",get:function(){return ot}}],n&&J(e.prototype,n),r&&J(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(l.a),lt=n(685);function ut(t){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(t)}function st(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==ut(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===ut(o)?o:String(o)),n)}var r,o}function ct(){return ct="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=pt(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},ct.apply(this,arguments)}function ft(t,p){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},ft(t,p)}function ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=pt(t);if(e){var o=pt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===ut(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function pt(t){return pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pt(t)}var yt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ft(t,e)}(l,t);var e,n,r,o=ht(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),o.apply(this,arguments)}return e=l,r=[{key:"EDITOR_TYPE",get:function(){return"dropdown"}}],(n=[{key:"prepare",value:function(t,col,e,td,n,r){ct(pt(l.prototype),"prepare",this).call(this,t,col,e,td,n,r),this.cellProperties.filter=!1,this.cellProperties.strict=!0}}])&&st(e.prototype,n),r&&st(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(B);function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}function vt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==gt(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===gt(o)?o:String(o)),n)}var r,o}function bt(t,p){return bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},bt(t,p)}function mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wt(t);if(e){var o=wt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===gt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function wt(t){return wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wt(t)}lt.a.getSingleton().add("beforeValidate",(function(t,e,col){var n=this.getCellMeta(e,this.propToCol(col));n.editor===yt&&void 0===n.strict&&(n.filter=!1,n.strict=!0)}));var Ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bt(t,e)}(l,t);var e,n,r,o=mt(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),o.apply(this,arguments)}return e=l,r=[{key:"EDITOR_TYPE",get:function(){return"numeric"}}],(n=null)&&vt(e.prototype,n),r&&vt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(l.a);function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function St(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==Ct(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===Ct(o)?o:String(o)),n)}var r,o}function kt(){return kt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Et(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},kt.apply(this,arguments)}function jt(t,p){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},jt(t,p)}function Rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Et(t);if(e){var o=Et(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Et(t){return Et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Et(t)}var Pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jt(t,e)}(l,t);var e,n,r,o=Rt(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),o.apply(this,arguments)}return e=l,r=[{key:"EDITOR_TYPE",get:function(){return"password"}}],(n=[{key:"createElements",value:function(){kt(Et(l.prototype),"createElements",this).call(this),this.TEXTAREA=this.hot.rootDocument.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.setAttribute("data-hot-input",""),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,Object(c.empty)(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)}}])&&St(e.prototype,n),r&&St(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(l.a);function Mt(t){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(t)}function _t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==Mt(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===Mt(o)?o:String(o)),n)}var r,o}function Tt(){return Tt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=xt(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Tt.apply(this,arguments)}function At(t,p){return At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},At(t,p)}function It(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xt(t);if(e){var o=xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Mt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function xt(t){return xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xt(t)}var Dt="ht_editor_visible",Nt="selectEditor",Ht=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&At(t,e)}(l,t);var e,n,r,o=It(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),o.apply(this,arguments)}return e=l,r=[{key:"EDITOR_TYPE",get:function(){return"select"}}],(n=[{key:"init",value:function(){this.select=this.hot.rootDocument.createElement("SELECT"),Object(c.addClass)(this.select,"htSelectEditor"),this.select.style.display="none",this.hot.rootElement.appendChild(this.select),this.registerHooks()}},{key:"getValue",value:function(){return this.select.value}},{key:"setValue",value:function(t){this.select.value=t}},{key:"open",value:function(){this._opened=!0,this.refreshDimensions(),this.select.style.display="",this.hot.getShortcutManager().setActiveContextName("editor"),this.registerShortcuts()}},{key:"close",value:function(){this._opened=!1,this.select.style.display="none",Object(c.hasClass)(this.select,Dt)&&Object(c.removeClass)(this.select,Dt),this.unregisterShortcuts(),this.clearHooks()}},{key:"focus",value:function(){this.select.focus()}},{key:"registerHooks",value:function(){var t=this;this.addHook("afterScrollHorizontally",(function(){return t.refreshDimensions()})),this.addHook("afterScrollVertically",(function(){return t.refreshDimensions()})),this.addHook("afterColumnResize",(function(){return t.refreshDimensions()})),this.addHook("afterRowResize",(function(){return t.refreshDimensions()}))}},{key:"prepare",value:function(t,col,e,td,n,r){var o=this;Tt(xt(l.prototype),"prepare",this).call(this,t,col,e,td,n,r);var f,d=this.cellProperties.selectOptions;f="function"==typeof d?this.prepareOptions(d(this.row,this.col,this.prop)):this.prepareOptions(d),Object(c.empty)(this.select),Object(h.objectEach)(f,(function(t,e){var n=o.hot.rootDocument.createElement("OPTION");n.value=e,Object(c.fastInnerHTML)(n,t),o.select.appendChild(n)}))}},{key:"prepareOptions",value:function(t){var e={};if(Array.isArray(t))for(var i=0,n=t.length;i<n;i++)e[t[i]]=t[i];else"object"===Mt(t)&&(e=t);return e}},{key:"refreshValue",value:function(){var t=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=t,this.setValue(t),this.refreshDimensions()}},{key:"refreshDimensions",value:function(){if(this.state===U.b.EDITING)if(this.TD=this.getEditedCell(),this.TD){var t=this.getEditedCellRect(),e=t.top,n=t.start,r=t.width,o=t.height,l=this.select.style;l.height="".concat(o,"px"),l.width="".concat(r,"px"),l.top="".concat(e,"px"),l[this.hot.isRtl()?"right":"left"]="".concat(n,"px"),l.margin="0px",Object(c.addClass)(this.select,Dt)}else this.close()}},{key:"registerShortcuts",value:function(){var t=this,e=this.hot.getShortcutManager().getContext("editor"),n={group:Nt};!1!==this.isInFullEditMode()&&e.addShortcuts([{keys:[["ArrowUp"]],callback:function(){var e=t.select.selectedIndex-1;e>=0&&(t.select[e].selected=!0)}},{keys:[["ArrowDown"]],callback:function(){var e=t.select.selectedIndex+1;e<=t.select.length-1&&(t.select[e].selected=!0)}}],n)}},{key:"unregisterShortcuts",value:function(){this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(Nt)}}])&&_t(e.prototype,n),r&&_t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(U.a);function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function Bt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==Lt(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===Lt(o)?o:String(o)),n)}var r,o}function Ut(){return Ut="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Wt(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Ut.apply(this,arguments)}function Ft(t,p){return Ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Ft(t,p)}function Vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Wt(t);if(e){var o=Wt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Lt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Wt(t){return Wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wt(t)}var zt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ft(t,e)}(l,t);var e,n,r,o=Vt(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),o.apply(this,arguments)}return e=l,r=[{key:"EDITOR_TYPE",get:function(){return"time"}}],(n=[{key:"prepare",value:function(t,col,e,td,n,r){Ut(Wt(l.prototype),"prepare",this).call(this,t,col,e,td,n,r),this.TEXTAREA.dir="ltr"}}])&&Bt(e.prototype,n),r&&Bt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(l.a),Yt=n(696);var Gt=n(1049);function Kt(t,e,n,col,r,o,l){Gt.a.apply(this,[t,e,n,col,r,o,l]),Object(c.fastInnerHTML)(e,null==o?"":o,!1)}Kt.RENDERER_TYPE="html";function Xt(t,e,n,col,r,o,l){var f=t.rootDocument,h=l.allowHtml?Kt:M.a,d=f.createElement("DIV");if(d.className="htAutocompleteArrow",d.appendChild(f.createTextNode(String.fromCharCode(9660))),h.apply(this,[t,e,n,col,r,o,l]),e.firstChild||e.appendChild(f.createTextNode(String.fromCharCode(160))),e.insertBefore(d,e.firstChild),Object(c.addClass)(e,"htAutocomplete"),!t.acArrowListener){var y=new $.a(t);t.acArrowListener=function(r){Object(c.hasClass)(r.target,"htAutocompleteArrow")&&t.view._wt.getSetting("onCellDblClick",null,t._createCellCoords(n,col),e)},y.addEventListener(t.rootElement,"mousedown",t.acArrowListener),t.addHookOnce("afterDestroy",(function(){y.destroy()}))}}Xt.RENDERER_TYPE="autocomplete";n(48),n(63),n(86),n(54);var $t=new WeakMap,qt=new WeakMap,Zt="htBadValue",Jt="data-row",Qt="data-col",te="checkboxRenderer",ee="checkbox";function ne(t,e,n,col,r,o,l){var f=t.rootDocument;Gt.a.apply(this,[t,e,n,col,r,o,l]),function(t){var e=qt.get(t);if(!e){var n=t.rootElement;(e=new $.a(t)).addEventListener(n,"click",(function(e){return function(t,e){var n=t.target;if(!re(n))return;if(!n.hasAttribute(Jt)||!n.hasAttribute(Qt))return;var r=parseInt(n.getAttribute(Jt),10),col=parseInt(n.getAttribute(Qt),10),o=e.getCellMeta(r,col);o.readOnly&&t.preventDefault()}(e,t)})),e.addEventListener(n,"mouseup",(function(e){return function(t,e){var n=t.target;if(!re(n))return;if(!n.hasAttribute(Jt)||!n.hasAttribute(Qt))return;setTimeout(e.listen,10)}(e,t)})),e.addEventListener(n,"change",(function(e){return function(t,e){var n=t.target;if(!re(n))return;if(!n.hasAttribute(Jt)||!n.hasAttribute(Qt))return;var r=parseInt(n.getAttribute(Jt),10),col=parseInt(n.getAttribute(Qt),10),o=e.getCellMeta(r,col);if(!o.readOnly){var l=null;l=t.target.checked?void 0===o.uncheckedTemplate||o.checkedTemplate:void 0!==o.uncheckedTemplate&&o.uncheckedTemplate,e.setDataAtCell(r,col,l)}}(e,t)})),qt.set(t,e)}}(t);var h,y,input=function(t){var input=t.createElement("input");return input.className="htCheckboxRendererInput",input.type="checkbox",input.setAttribute("autocomplete","off"),input.setAttribute("tabindex","-1"),input.cloneNode(!1)}(f),v=l.label,m=!1;if(void 0===l.checkedTemplate&&(l.checkedTemplate=!0),void 0===l.uncheckedTemplate&&(l.uncheckedTemplate=!1),Object(c.empty)(e),o===l.checkedTemplate||Object(R.stringify)(o).toLocaleLowerCase(l.locale)===Object(R.stringify)(l.checkedTemplate).toLocaleLowerCase(l.locale)?input.checked=!0:o===l.uncheckedTemplate||Object(R.stringify)(o).toLocaleLowerCase(l.locale)===Object(R.stringify)(l.uncheckedTemplate).toLocaleLowerCase(l.locale)?input.checked=!1:Object(R.isEmpty)(o)?Object(c.addClass)(input,"noValue"):(input.style.display="none",Object(c.addClass)(input,Zt),m=!0),input.setAttribute(Jt,n),input.setAttribute(Qt,col),!m&&v){var w="";if(v.value)w="function"==typeof v.value?v.value.call(this,n,col,r,o):v.value;else if(v.property){var O=t.getDataAtRowProp(n,v.property);w=null!==O?O:""}var label=function(t,text,e){var label=t.createElement("label");return label.className="htCheckboxRendererLabel ".concat(e?"fullWidth":""),label.appendChild(t.createTextNode(text)),label.cloneNode(!0)}(f,w,!0!==v.separated);"before"===v.position?v.separated?(e.appendChild(label),e.appendChild(input)):(label.appendChild(input),input=label):v.position&&"after"!==v.position||(v.separated?(e.appendChild(input),e.appendChild(label)):(label.insertBefore(input,label.firstChild),input=label))}function C(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=t.getSelectedRange();if(n)for(var r=0;r<n.length;r++){for(var o=n[r].getTopStartCorner(),l=o.row,c=o.col,f=n[r].getBottomEndCorner(),h=f.row,d=f.col,y=[],v=l;v<=h;v+=1)for(var m=c;m<=d;m+=1){var w=t.getCellMeta(v,m);if("checkbox"!==w.type)return;if(!0!==w.readOnly){void 0===w.checkedTemplate&&(w.checkedTemplate=!0),void 0===w.uncheckedTemplate&&(w.uncheckedTemplate=!1);var O=t.getDataAtCell(v,m);!1===e?[w.checkedTemplate,w.checkedTemplate.toString()].includes(O)?y.push([v,m,w.uncheckedTemplate]):[w.uncheckedTemplate,w.uncheckedTemplate.toString(),null,void 0].includes(O)&&y.push([v,m,w.checkedTemplate]):y.push([v,m,w.uncheckedTemplate])}}y.length>0&&t.setDataAtCell(y)}}function S(){var e=t.getSelectedRange();if(e){for(var n=0;n<e.length;n++)for(var r=e[n].getTopStartCorner(),o=e[n].getBottomEndCorner(),l=r.row;l<=o.row;l++)for(var c=r.col;c<=o.col;c++){var f=t.getCellMeta(l,c);if("checkbox"!==f.type)return!1;var h=t.getCell(l,c);if(null==h)return!0;if(h.querySelectorAll("input[type=checkbox]").length>0&&!f.readOnly)return!0}return!1}}(!v||v&&!v.separated)&&e.appendChild(input),m&&e.appendChild(f.createTextNode("#bad-value#")),$t.has(t)||($t.set(t,!0),h=t.getShortcutManager().getContext("grid"),y={group:te},h.addShortcuts([{keys:[["space"]],callback:function(){return C(),!S()}},{keys:[["enter"]],callback:function(){return C(),!S()},runOnlyIf:function(){return t.getSettings().enterBeginsEditing}},{keys:[["delete"],["backspace"]],callback:function(){return C(!0),!S()},relativeToGroup:d.a,position:"before"}],y))}function re(element){return"INPUT"===element.tagName&&"checkbox"===element.getAttribute("type")}lt.a.getSingleton().add("modifyAutoColumnSizeSeed",(function(t,e,n){var label=e.label,r=e.type,o=e.row,l=e.column,c=e.prop;if(r===ee){if(label){var f=label.value,h=label.property,d=n;if(f)d="function"==typeof f?f(o,l,c,n):f;else if(h){var y=this.getDataAtRowProp(o,h);d=null!==y?y:n}t=d}return t}})),ne.RENDERER_TYPE=ee;n(115);var oe=n(942),ie=n(675);function ae(t,e,n,col,r,o,l){var c=o;if(Object(ie.isNumeric)(c)){var f=l.numericFormat,h=f&&f.culture||"-",d=f&&f.pattern,y=l.className||"",v=y.length?y.split(" "):[];if(void 0!==h&&!oe.languages()[h]){var m=h.replace("-",""),w=oe.allLanguages?oe.allLanguages[h]:oe[m];w&&oe.registerLanguage(w)}oe.setLanguage(h),c=oe(c).format(d||"0"),v.indexOf("htLeft")<0&&v.indexOf("htCenter")<0&&v.indexOf("htRight")<0&&v.indexOf("htJustify")<0&&v.push("htRight"),v.indexOf("htNumeric")<0&&v.push("htNumeric"),l.className=v.join(" "),e.dir="ltr"}Object(M.a)(t,e,n,col,r,c,l)}ae.RENDERER_TYPE="numeric";function le(t,e,n,col,r,o,l){M.a.apply(this,[t,e,n,col,r,o,l]);var f=l.hashLength||e.innerHTML.length,h=l.hashSymbol||"*",d="";Object(ie.rangeEach)(f-1,(function(){d+=h})),Object(c.fastInnerHTML)(e,d)}le.RENDERER_TYPE="password";function ue(t,e,n,col,r,o,l){M.a.apply(this,[t,e,n,col,r,o,l]),e.dir="ltr"}ue.RENDERER_TYPE="time";var se=n(722);function ce(t,e){var n=t;null==n&&(n=""),this.allowEmpty&&""===n?e(!0):this.strict&&this.source?"function"==typeof this.source?this.source(n,fe(n,e)):fe(n,e)(this.source):e(!0)}function fe(t,e){var n=t;return function(source){for(var t=!1,s=0,r=source.length;s<r;s++)if(n===source[s]){t=!0;break}e(t)}}ce.VALIDATOR_TYPE="autocomplete";n(240);function he(t){var e=new Date(t);return isNaN(new Date("".concat(t,"T00:00")).getDate())?e:new Date(e.getTime()+6e4*e.getTimezoneOffset())}function de(t,e){var n=Object(Yt.b)(ot,this.instance),r=t,o=!0;null==r&&(r="");var l=K(r,this.dateFormat||n.defaultDateFormat,!0).isValid(),c=K(new Date(r)).isValid()||l;if(this.allowEmpty&&""===r&&(c=!0,l=!0),c||(o=!1),!c&&l&&(o=!0),c&&!l)if(!0===this.correctFormat){var f=function(t,e){var n,r=K(he(t)),o=K(t,e),l=t.search(/[A-z]/g)>-1;n=r.isValid()&&r.format("x")===o.format("x")||!o.isValid()||l?r:o;return n.format(e)}(r,this.dateFormat),h=this.instance.toVisualRow(this.row),d=this.instance.toVisualColumn(this.col);this.instance.setDataAtCell(h,d,f,"dateValidator"),o=!0}else o=!1;e(o)}de.VALIDATOR_TYPE="date";function pe(t,e){var n=t;null==n&&(n=""),this.allowEmpty&&""===n?e(!0):e(""!==n&&Object(ie.isNumeric)(t))}pe.VALIDATOR_TYPE="numeric";var ye=["YYYY-MM-DDTHH:mm:ss.SSSZ","X","x"];function ge(t,e){var n=this.timeFormat||"h:mm:ss a",r=!0,o=t;null===o&&(o=""),o=/^\d{3,}$/.test(o)?parseInt(o,10):o;var l=/^\d{1,2}$/.test(o);l&&(o+=":00");var c=K(o,ye,!0).isValid()?K(o):K(o,n),f=c.isValid(),h=K(o,n,!0).isValid()&&!l;if(this.allowEmpty&&""===o&&(f=!0,h=!0),f||(r=!1),!f&&h&&(r=!0),f&&!h)if(!0===this.correctFormat){var d=c.format(n),y=this.instance.toVisualRow(this.row),v=this.instance.toVisualColumn(this.col);this.instance.setDataAtCell(y,v,d,"timeValidator"),r=!0}else r=!1;e(r)}ge.VALIDATOR_TYPE="time";var ve=n(723);var be={CELL_TYPE:"autocomplete",editor:B,renderer:Xt,validator:ce},me={CELL_TYPE:"checkbox",editor:G,renderer:ne},we={CELL_TYPE:"date",editor:at,renderer:Xt,validator:de},Oe={CELL_TYPE:"dropdown",editor:yt,renderer:Xt,validator:ce},Ce={CELL_TYPE:"handsontable",editor:k,renderer:Xt},Se={CELL_TYPE:"numeric",editor:Ot,renderer:ae,validator:pe,dataType:"number"},ke={CELL_TYPE:"password",editor:Pt,renderer:le,copyable:!1},je=n(1047),Re={CELL_TYPE:"time",editor:zt,renderer:ue,validator:ge},Ee=n(721);n(55),n(56),n(679),n(34),n(242),n(12),n(36),n(197),n(785);var Pe=n(735);function Me(t){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Me(t)}function _e(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return Te(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Te(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Ae(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==Me(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===Me(o)?o:String(o)),n)}var r,o}function Ie(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}var xe=new Map([["plugin",Pe.c],["cell-type",Ee.c],["editor",Yt.d],["renderer",se.c],["validator",ve.c]]),De=new WeakMap,Ne=[],He=null,Le=new WeakSet,Be=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ie(this,Le),Object(h.defineGetter)(this,"hot",e,{writable:!1}),De.set(this,{hooks:{}}),He=null,this.pluginName=null,this.pluginsInitializedCallbacks=[],this.isPluginsReady=!1,this.enabled=!1,this.initialized=!1,this.hot.addHook("afterPluginsInitialized",(function(){return n.onAfterPluginsInitialized()})),this.hot.addHook("afterUpdateSettings",(function(t){return n.onUpdateSettings(t)})),this.hot.addHook("beforeInit",(function(){return n.init()}))}var e,n,r;return e=t,r=[{key:"PLUGIN_KEY",get:function(){return"base"}},{key:"SETTING_KEYS",get:function(){return[this.PLUGIN_KEY]}}],(n=[{key:"init",value:function(){var t=this;this.pluginName=this.hot.getPluginName(this);var e=this.constructor.PLUGIN_DEPS,n=Array.isArray(e)?e:[];if(n.length>0){var r=[];if(n.forEach((function(t){var e=_e(t.split(":"),2),n=e[0],o=e[1];if(!xe.has(n))throw new Error('Unknown plugin dependency type "'.concat(n,'" was found.'));xe.get(n)(o)||r.push(" - ".concat(o," (").concat(n,")"))})),r.length>0){var o=["The ".concat(this.pluginName," plugin requires the following modules:\n"),"".concat(r.join("\n"),"\n")].join("");Ne.push(o)}}if(He||(He=Object(Pe.b)()),He.indexOf("UndoRedo")>=0&&He.splice(He.indexOf("UndoRedo"),1),He.indexOf(this.pluginName)>=0&&He.splice(He.indexOf(this.pluginName),1),this.hot.addHookOnce("afterPluginsInitialized",(function(){t.isEnabled&&t.isEnabled()&&t.enablePlugin()})),0===He.length){if(Ne.length>0){var l=["".concat(Ne.join("\n"),"\n"),"You have to import and register them manually."].join("");throw new Error(l)}this.hot.runHooks("afterPluginsInitialized")}this.initialized=!0}},{key:"enablePlugin",value:function(){this.enabled=!0}},{key:"disablePlugin",value:function(){this.eventManager&&this.eventManager.clear(),this.clearHooks(),this.enabled=!1}},{key:"addHook",value:function(t,e){De.get(this).hooks[t]=De.get(this).hooks[t]||[];var n=De.get(this).hooks[t];this.hot.addHook(t,e),n.push(e),De.get(this).hooks[t]=n}},{key:"removeHooks",value:function(t){var e=this;Object(j.arrayEach)(De.get(this).hooks[t]||[],(function(n){e.hot.removeHook(t,n)}))}},{key:"clearHooks",value:function(){var t=this,e=De.get(this).hooks;Object(h.objectEach)(e,(function(e,n){return t.removeHooks(n)})),e.length=0}},{key:"callOnPluginsReady",value:function(t){this.isPluginsReady?t():this.pluginsInitializedCallbacks.push(t)}},{key:"onAfterPluginsInitialized",value:function(){Object(j.arrayEach)(this.pluginsInitializedCallbacks,(function(t){return t()})),this.pluginsInitializedCallbacks.length=0,this.isPluginsReady=!0}},{key:"onUpdateSettings",value:function(t){var e=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(this,Le,Ue).call(this,t);this.isEnabled&&(this.enabled&&!this.isEnabled()&&this.disablePlugin(),!this.enabled&&this.isEnabled()&&this.enablePlugin(),this.enabled&&this.isEnabled()&&e&&this.updatePlugin(t))}},{key:"updatePlugin",value:function(){}},{key:"destroy",value:function(){var t=this;this.eventManager&&this.eventManager.destroy(),this.clearHooks(),Object(h.objectEach)(this,(function(e,n){"hot"!==n&&(t[n]=null)})),delete this.t,delete this.hot}}])&&Ae(e.prototype,n),r&&Ae(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ue(t){if(!t)return!1;var e=this.constructor.SETTING_KEYS;if("boolean"==typeof e)return e;for(var i=0;i<e.length;i++)if(void 0!==t[e[i]])return!0;return!1}var Fe=n(726);n(85);function Ve(t){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(t)}function We(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return ze(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ze(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Ye(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==Ve(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===Ve(o)?o:String(o)),n)}var r,o}var Ge=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hot=e,this.container=null,this.injected=!1,this.rows=[],this.columns=[],this.samples=null,this.settings={useHeaders:!0}}var e,n,r;return e=t,n=[{key:"addRow",value:function(t,e){if(this.columns.length)throw new Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));var n={row:t};this.rows.push(n),this.samples=e,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tr.appendChild(this.createRow(t)),this.container.container.appendChild(this.table.fragment),n.table=this.table.table}},{key:"addColumnHeadersRow",value:function(t){var e=this.hot.getColHeader(0);if(null!=e){var n={row:-1};this.rows.push(n),this.container=this.createContainer(this.hot.rootElement.className),this.samples=t,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),n.table=this.table.table}}},{key:"addColumn",value:function(t,e){if(this.rows.length)throw new Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));var n={col:t};this.columns.push(n),this.samples=e,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&null!==this.hot.getColHeader(t)&&this.hot.view.appendColHeader(t,this.table.th),this.table.tBody.appendChild(this.createCol(t)),this.container.container.appendChild(this.table.fragment),n.table=this.table.table}},{key:"getHeights",value:function(t){this.injected||this.injectTable(),Object(j.arrayEach)(this.rows,(function(e){t(e.row,Object(c.outerHeight)(e.table)-1)}))}},{key:"getWidths",value:function(t){this.injected||this.injectTable(),Object(j.arrayEach)(this.columns,(function(e){var n=e.table.getBoundingClientRect().width;t(e.col,Math.ceil(n))}))}},{key:"setSettings",value:function(t){this.settings=t}},{key:"setSetting",value:function(t,e){this.settings||(this.settings={}),this.settings[t]=e}},{key:"getSettings",value:function(){return this.settings}},{key:"getSetting",value:function(t){return this.settings?this.settings[t]:null}},{key:"createColGroupsCol",value:function(){var t=this,e=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&e.appendChild(this.createColElement(-1)),this.samples.forEach((function(n){Object(j.arrayEach)(n.strings,(function(n){e.appendChild(t.createColElement(n.col))}))})),e}},{key:"createRow",value:function(t){var e=this,n=this.hot.rootDocument,r=n.createDocumentFragment(),th=n.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(t,th),r.appendChild(th)),this.samples.forEach((function(o){Object(j.arrayEach)(o.strings,(function(o){var l=o.col,c=e.hot.getCellMeta(t,l);c.col=l,c.row=t;var f=e.hot.getCellRenderer(c),td=n.createElement("td");td.setAttribute("ghost-table",1),f(e.hot,td,t,l,e.hot.colToProp(l),o.value,c),r.appendChild(td)}))})),r}},{key:"appendColumnHeadersRow",value:function(){var t=this,e=this.hot.rootDocument,n=e.createDocumentFragment(),r=[];if(this.hot.hasRowHeaders()){var th=e.createElement("th");r.push([-1,th]),n.appendChild(th)}this.samples.forEach((function(t){Object(j.arrayEach)(t.strings,(function(t){var o=t.col,th=e.createElement("th");r.push([o,th]),n.appendChild(th)}))})),this.table.tHead.appendChild(n),Object(j.arrayEach)(r,(function(e){var n=We(e,2),r=n[0],th=n[1];t.hot.view.appendColHeader(r,th)}))}},{key:"createCol",value:function(t){var e=this,n=this.hot.rootDocument,r=n.createDocumentFragment();return this.samples.forEach((function(o){Object(j.arrayEach)(o.strings,(function(o){var l=o.row,c=e.hot.getCellMeta(l,t);c.col=t,c.row=l;var f=e.hot.getCellRenderer(c),td=n.createElement("td"),tr=n.createElement("tr");td.setAttribute("ghost-table",1),f(e.hot,td,l,t,e.hot.colToProp(t),o.value,c),tr.appendChild(td),r.appendChild(tr)}))})),r}},{key:"clean",value:function(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}},{key:"injectTable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.injected||((t||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}},{key:"removeTable",value:function(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}},{key:"createColElement",value:function(t){var col=this.hot.rootDocument.createElement("col");return col.style.width="".concat(this.hot.view._wt.wtTable.getStretchedColumnWidth(t),"px"),col}},{key:"createTable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.hot.rootDocument,n=e.createDocumentFragment(),table=e.createElement("table"),r=e.createElement("thead"),o=e.createElement("tbody"),l=e.createElement("colgroup"),tr=e.createElement("tr"),th=e.createElement("th");return this.isVertical()&&table.appendChild(l),this.isHorizontal()&&(tr.appendChild(th),r.appendChild(tr),table.style.tableLayout="auto",table.style.width="auto"),table.appendChild(r),this.isVertical()&&o.appendChild(tr),table.appendChild(o),Object(c.addClass)(table,t),n.appendChild(table),{fragment:n,table:table,tHead:r,tBody:o,colGroup:l,tr:tr,th:th}}},{key:"createContainer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.hot.rootDocument,n=e.createDocumentFragment(),r=e.createElement("div"),o="htGhostTable htAutoSize ".concat(t.trim());return Object(c.addClass)(r,o),n.appendChild(r),{fragment:n,container:r}}},{key:"isVertical",value:function(){return!(!this.rows.length||this.columns.length)}},{key:"isHorizontal",value:function(){return!(!this.columns.length||this.rows.length)}}],n&&Ye(e.prototype,n),r&&Ye(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Ke=Ge;n(14);function Xe(t){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xe(t)}function $e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qe(n.key),n)}}function qe(t){var e=function(input,t){if("object"!==Xe(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Xe(e)?e:String(e)}var Ze=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.samples=null,this.dataFactory=e,this.customSampleCount=null,this.allowDuplicates=!1}var e,n,r;return e=t,r=[{key:"SAMPLE_COUNT",get:function(){return 3}}],(n=[{key:"getSampleCount",value:function(){return this.customSampleCount?this.customSampleCount:t.SAMPLE_COUNT}},{key:"setSampleCount",value:function(t){this.customSampleCount=t}},{key:"setAllowDuplicates",value:function(t){this.allowDuplicates=t}},{key:"generateRowSamples",value:function(t,e){return this.generateSamples("row",e,t)}},{key:"generateColumnSamples",value:function(t,e){return this.generateSamples("col",e,t)}},{key:"generateSamples",value:function(t,e,n){var r=this,o=new Map,l="number"==typeof n?{from:n,to:n}:n,c=l.from,f=l.to;return Object(ie.rangeEach)(c,f,(function(n){var l=r.generateSample(t,e,n);o.set(n,l)})),o}},{key:"generateSample",value:function(t,e,n){var r=this;if("row"!==t&&"col"!==t)throw new Error("Unsupported sample type");var o=new Map,l="row"===t?"col":"row",c=[];return Object(ie.rangeEach)(e.from,e.to,(function(e){var f,d="row"===t?r.dataFactory(n,e):r.dataFactory(e,n),y=d.value,v=d.bundleSeed,m="string"==typeof v&&v.length>0;f=m?v:Object(h.isObject)(y)?"".concat(Object.keys(y).length):Array.isArray(y)?"".concat(y.length):"".concat(Object(R.stringify)(y).length),o.has(f)||o.set(f,{needed:r.getSampleCount(),strings:[]});var w=o.get(f);w.needed&&(!(c.indexOf(y)>-1)||r.allowDuplicates||m)&&(w.strings.push(function(t,e,n){return(e=qe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({value:y},l,e)),c.push(y),w.needed-=1)})),o}}])&&$e(e.prototype,n),r&&$e(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Je=Ze,Qe=n(1051),tn=n(781);function en(t){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},en(t)}function nn(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return rn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rn(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function on(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==en(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==en(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===en(o)?o:String(o)),n)}var r,o}function an(){return an="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=cn(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},an.apply(this,arguments)}function ln(t,p){return ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},ln(t,p)}function un(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=cn(t);if(e){var o=cn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===en(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return sn(t)}(this,n)}}function sn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cn(t){return cn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cn(t)}lt.a.getSingleton().register("modifyAutoColumnSizeSeed");var fn="autoColumnSize",hn=new WeakMap,dn="autoColumnSize",pn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ln(t,e)}(l,t);var e,n,r,o=un(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),e=o.call(this,t),hn.set(sn(e),{cachedColumnHeaders:[]}),e.ghostTable=new Ke(e.hot),e.samplesGenerator=new Je((function(t,n){var r=e.hot.getCellMeta(t,n),o="";r.spanned||(o=e.hot.getDataAtCell(t,n));var l="";return e.hot.hasHook("modifyAutoColumnSizeSeed")&&(l=e.hot.runHooks("modifyAutoColumnSizeSeed",l,r,o)),{value:o,bundleSeed:l}})),e.firstCalculation=!0,e.inProgress=!1,e.measuredColumns=0,e.columnWidthsMap=new tn.a,e.hot.columnIndexMapper.registerMap(dn,e.columnWidthsMap),e.addHook("beforeColumnResize",(function(t,n,r){return e.onBeforeColumnResize(t,n,r)})),e}return e=l,n=[{key:"isEnabled",value:function(){return!1!==this.hot.getSettings()[fn]&&!this.hot.getSettings().colWidths}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[fn];e&&null!==e.useHeaders&&void 0!==e.useHeaders&&this.ghostTable.setSetting("useHeaders",e.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",(function(){return t.onAfterLoadData.apply(t,arguments)})),this.addHook("beforeChangeRender",(function(e){return t.onBeforeChange(e)})),this.addHook("afterFormulasValuesUpdate",(function(e){return t.onAfterFormulasValuesUpdate(e)})),this.addHook("beforeViewRender",(function(e){return t.onBeforeViewRender(e)})),this.addHook("modifyColWidth",(function(e,col){return t.getColumnWidth(col,e)})),this.addHook("afterInit",(function(){return t.onAfterInit()})),an(cn(l.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){var t=this.findColumnsWhereHeaderWasChanged();t.length&&(this.clearCache(t),this.calculateVisibleColumnsWidth()),an(cn(l.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){var t=this;an(cn(l.prototype),"disablePlugin",this).call(this),this.addHook("beforeColumnResize",(function(e,n,r){return t.onBeforeColumnResize(e,n,r)}))}},{key:"calculateVisibleColumnsWidth",value:function(){if(this.hot.countRows()){var t=this.hot.renderCall,e=this.getFirstVisibleColumn(),n=this.getLastVisibleColumn();-1!==e&&-1!==n&&this.calculateColumnsWidth({from:e,to:n},void 0,t)}}},{key:"calculateColumnsWidth",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countRows()-1},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="number"==typeof e?{from:e,to:e}:e,l="number"==typeof n?{from:n,to:n}:n;Object(ie.rangeEach)(o.from,o.to,(function(e){var n=t.hot.toPhysicalColumn(e);if(null===n&&(n=e),r||null===t.columnWidthsMap.getValueAtIndex(n)&&!t.hot._getColWidthFromSettings(n)){var o=t.samplesGenerator.generateColumnSamples(e,l);Object(j.arrayEach)(o,(function(e){var n=nn(e,2),r=n[0],o=n[1];return t.ghostTable.addColumn(r,o)}))}})),this.ghostTable.columns.length&&(this.hot.batchExecution((function(){t.ghostTable.getWidths((function(e,n){var r=t.hot.toPhysicalColumn(e);t.columnWidthsMap.setValueAtIndex(r,n)}))}),!0),this.measuredColumns=o.to+1,this.ghostTable.clean())}},{key:"calculateAllColumnsWidth",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},n=0,r=this.hot.countCols()-1,o=null;this.inProgress=!0;var c=this.getSyncCalculationLimit();this.firstCalculation&&c>=0&&(this.calculateColumnsWidth({from:0,to:c},e),this.firstCalculation=!1,n=c+1),n<r?function c(){if(!t.hot)return Object(Fe.cancelAnimationFrame)(o),void(t.inProgress=!1);t.calculateColumnsWidth({from:n,to:Math.min(n+l.CALCULATION_STEP,r)},e),(n=n+l.CALCULATION_STEP+1)<r?o=Object(Fe.requestAnimationFrame)(c):(Object(Fe.cancelAnimationFrame)(o),t.inProgress=!1,t.hot.view.adjustElementsSize())}():this.inProgress=!1}},{key:"setSamplingOptions",value:function(){var t=this.hot.getSettings()[fn],e=t&&Object(h.hasOwnProperty)(t,"samplingRatio")?t.samplingRatio:void 0,n=t&&Object(h.hasOwnProperty)(t,"allowSampleDuplicates")?t.allowSampleDuplicates:void 0;e&&!isNaN(e)&&this.samplesGenerator.setSampleCount(parseInt(e,10)),n&&this.samplesGenerator.setAllowDuplicates(n)}},{key:"recalculateAllColumnsWidth",value:function(){this.hot.view&&this.hot.view._wt.wtTable.isVisible()&&(this.clearCache(),this.calculateAllColumnsWidth())}},{key:"getSyncCalculationLimit",value:function(){var t=this.hot.getSettings()[fn],e=l.SYNC_CALCULATION_LIMIT,n=this.hot.countCols()-1;return Object(h.isObject)(t)&&(e=t.syncLimit,Object(E.isPercentValue)(e)?e=Object(ie.valueAccordingPercent)(n,e):e>>=0),Math.min(e,n)}},{key:"getColumnWidth",value:function(t){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===n&&(n=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(t)),e&&"number"==typeof n&&(n=Math.max(n,Qe.a.DEFAULT_WIDTH))),n}},{key:"getFirstVisibleColumn",value:function(){var t=this.hot.view._wt;if(t.wtViewport.columnsVisibleCalculator){var e=t.wtTable.getFirstVisibleColumn();if(-1!==e)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(e)}if(t.wtViewport.columnsRenderCalculator){var n=t.wtTable.getFirstRenderedColumn();if(-1!==n)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(n)}return-1}},{key:"getLastVisibleColumn",value:function(){var t=this.hot.view._wt;if(t.wtViewport.columnsVisibleCalculator){var e=t.wtTable.getLastVisibleColumn();if(-1!==e)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(e)}if(t.wtViewport.columnsRenderCalculator){var n=t.wtTable.getLastRenderedColumn();if(-1!==n)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(n)}return-1}},{key:"findColumnsWhereHeaderWasChanged",value:function(){var t=this.hot.getColHeader(),e=hn.get(this).cachedColumnHeaders;return Object(j.arrayReduce)(t,(function(t,n,r){var o=e.length;return(o-1<r||e[r]!==n)&&t.push(r),o-1<r?e.push(n):e[r]=n,t}),[])}},{key:"clearCache",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length?this.hot.batchExecution((function(){Object(j.arrayEach)(e,(function(e){t.columnWidthsMap.setValueAtIndex(e,null)}))}),!0):this.columnWidthsMap.clear()}},{key:"isNeedRecalculate",value:function(){return!!Object(j.arrayFilter)(this.columnWidthsMap.getValues().slice(0,this.measuredColumns),(function(t){return null===t})).length}},{key:"onBeforeViewRender",value:function(){this.calculateVisibleColumnsWidth(),this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllColumnsWidth()}},{key:"onAfterLoadData",value:function(){var t=this;this.hot.view?this.recalculateAllColumnsWidth():setTimeout((function(){t.hot&&t.recalculateAllColumnsWidth()}),0)}},{key:"onBeforeChange",value:function(t){var e=this,n=Object(j.arrayMap)(t,(function(t){var n=nn(t,2)[1];return e.hot.toPhysicalColumn(e.hot.propToCol(n))}));this.clearCache(Array.from(new Set(n)))}},{key:"onBeforeColumnResize",value:function(t,e,n){var r=t;return n&&(this.calculateColumnsWidth(e,void 0,!0),r=this.getColumnWidth(e,void 0,!1)),r}},{key:"onAfterInit",value:function(){hn.get(this).cachedColumnHeaders=this.hot.getColHeader()}},{key:"onAfterFormulasValuesUpdate",value:function(t){var e=Object(j.arrayFilter)(t,(function(t){var e;return Object(R.isDefined)(null===(e=t.address)||void 0===e?void 0:e.col)})),n=Object(j.arrayMap)(e,(function(t){return t.address.col}));this.clearCache(Array.from(new Set(n)))}},{key:"destroy",value:function(){this.ghostTable.clean(),an(cn(l.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return fn}},{key:"PLUGIN_PRIORITY",get:function(){return 10}},{key:"SETTING_KEYS",get:function(){return!0}},{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 50}}],n&&on(e.prototype,n),r&&on(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be),yn={horizontal:"horizontal",vertical:"vertical"};function gn(t){return gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gn(t)}function vn(t){return function(t){if(Array.isArray(t))return wn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||mn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bn(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||mn(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(t,e){if(t){if("string"==typeof t)return wn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wn(t,e):void 0}}function wn(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function On(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==gn(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==gn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===gn(o)?o:String(o)),n)}var r,o}function Cn(){return Cn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Rn(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Cn.apply(this,arguments)}function Sn(t,p){return Sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Sn(t,p)}function kn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rn(t);if(e){var o=Rn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===gn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jn(t)}(this,n)}}function jn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rn(t){return Rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rn(t)}lt.a.getSingleton().register("modifyAutofillRange"),lt.a.getSingleton().register("beforeAutofill"),lt.a.getSingleton().register("afterAutofill");var En="autofill",Pn=["fillHandle"],Mn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sn(t,e)}(l,t);var e,n,r,o=kn(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).eventManager=new $.a(jn(e)),e.addingStarted=!1,e.mouseDownOnCellCorner=!1,e.mouseDragOutside=!1,e.handleDraggedCells=0,e.directions=[],e.autoInsertRow=!1,e}return e=l,r=[{key:"PLUGIN_KEY",get:function(){return En}},{key:"PLUGIN_PRIORITY",get:function(){return 20}},{key:"SETTING_KEYS",get:function(){return[En].concat(Pn)}}],(n=[{key:"isEnabled",value:function(){return this.hot.getSettings().fillHandle}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.mapSettings(),this.registerEvents(),this.addHook("afterOnCellCornerMouseDown",(function(e){return t.onAfterCellCornerMouseDown(e)})),this.addHook("afterOnCellCornerDblClick",(function(e){return t.onCellCornerDblClick(e)})),this.addHook("beforeOnCellMouseOver",(function(e,n){return t.onBeforeCellMouseOver(n)})),Cn(Rn(l.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),Cn(Rn(l.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.clearMappedSettings(),Cn(Rn(l.prototype),"disablePlugin",this).call(this)}},{key:"getSelectionData",value:function(){var t=this,e=this.hot.getSelectedRangeLast(),n=e.getTopStartCorner(),r=n.row,o=n.col,l=e.getBottomEndCorner(),c=l.row,f=l.col,h=this.hot.runHooks("modifyCopyableRange",[{startRow:r,startCol:o,endRow:c,endCol:f}]),d=[],y=[],data=[];return Object(j.arrayEach)(h,(function(t){for(var e=t.startRow;e<=t.endRow;e+=1)-1===d.indexOf(e)&&d.push(e);for(var n=t.startCol;n<=t.endCol;n+=1)-1===y.indexOf(n)&&y.push(n)})),Object(j.arrayEach)(d,(function(e){var n=[];Object(j.arrayEach)(y,(function(r){n.push(t.hot.getCopyableData(e,r))})),data.push(n)})),data}},{key:"fillIn",value:function(){var t=this;if(this.hot.selection.highlight.getFill().isEmpty())return!1;var e=bn(this.hot.selection.highlight.getFill().getVisualCorners(),4),n=e[0],r=e[1],o=e[2],l=e[3],c=this.hot.getSelectedRangeLast(),f=c.getTopStartCorner(),h=c.getBottomEndCorner();this.resetSelectionOfDraggedArea();var d=[f.row,f.col,h.row,h.col],y=this.hot.runHooks("modifyAutofillRange",[Math.min(f.row,n),Math.min(f.col,r),Math.max(h.row,o),Math.max(h.col,l)],d),v=function(t,e,n){var r,o,l;return e[0]===t[0]&&e[1]<t[1]?(l="left",r=n(e[0],e[1]),o=n(e[2],t[1]-1)):e[2]===t[2]&&e[0]===t[0]&&e[3]>t[3]?(l="right",r=n(e[0],t[3]+1),o=n(e[2],e[3])):e[0]<t[0]&&e[1]===t[1]?(l="up",r=n(e[0],e[1]),o=n(t[0]-1,e[3])):e[2]>t[2]&&e[1]===t[1]&&(l="down",r=n(t[2]+1,e[1]),o=n(e[2],e[3])),r&&r.normalize(),o&&o.normalize(),{directionOfDrag:l,startOfDragCoords:r,endOfDragCoords:o}}(d,y,(function(e,n){return t.hot._createCellCoords(e,n)})),m=v.directionOfDrag,w=v.startOfDragCoords,O=v.endOfDragCoords;if(w&&w.row>-1&&w.col>-1){var C=this.getSelectionData(),S=c.clone(),k=this.hot._createCellRange(w,w,O),j=this.hot.runHooks("beforeAutofill",C,S,k,m);if(!1===j)return this.hot.selection.highlight.getFill().clear(),this.hot.render(),!1;var R=function(t,e,data,n){var r=data.length,o=data?data[0].length:0,l=[],c=e.row-t.row,f=e.col-t.col;if(-1!==["down","up"].indexOf(n)){for(var h=[],col=0;col<f;col++){var d=parseInt(data[0][col],10),y=parseInt(data[r-1][col],10),v=("down"===n?y-d:d-y)/(r-1)||0;h.push(v)}l.push(h)}if(-1!==["right","left"].indexOf(n))for(var m=0;m<c;m++){var w=parseInt(data[m][0],10),O=parseInt(data[m][o-1],10),C=("right"===n?O-w:w-O)/(o-1)||0;l.push([C])}return l}(w,O,C,m),E=j,P=j;if(["up","left"].indexOf(m)>-1&&(1!==P.length||0!==P[0].length))if(E=[],"up"===m)for(var M=O.row-w.row+1,_=M%P.length,i=0;i<M;i++)E.push(P[(i+(P.length-_))%P.length]);else for(var T=O.col-w.col+1,A=T%P[0].length,I=0;I<P.length;I++){E.push([]);for(var x=0;x<T;x++)E[I].push(P[I][(x+(P[I].length-A))%P[I].length])}this.hot.populateFromArray(w.row,w.col,E,O.row,O.col,"".concat(this.pluginName,".fill"),null,m,R),this.setSelection(y),this.hot.runHooks("afterAutofill",E,S,k,m),this.hot.render()}else this.hot._refreshBorders();return!0}},{key:"reduceSelectionAreaIfNeeded",value:function(t){return t.row<0&&(t.row=0),t.col<0&&(t.col=0),t}},{key:"getCoordsOfDragAndDropBorders",value:function(t){var e=this.hot.getSelectedRangeLast(),n=e.getBottomEndCorner(),r=t;if(this.directions.includes(yn.vertical)&&this.directions.includes(yn.horizontal)){var o=e.getTopStartCorner();(n.col<=t.col||o.col>=t.col)&&(r=this.hot._createCellCoords(n.row,t.col)),(n.row<t.row||o.row>t.row)&&(r=this.hot._createCellCoords(t.row,n.col))}else if(this.directions.includes(yn.vertical))r=this.hot._createCellCoords(t.row,n.col);else{if(!this.directions.includes(yn.horizontal))return;r=this.hot._createCellCoords(n.row,t.col)}return this.reduceSelectionAreaIfNeeded(r)}},{key:"showBorder",value:function(t){var e=this.getCoordsOfDragAndDropBorders(t);e&&this.redrawBorders(e)}},{key:"addRow",value:function(){var t=this;this.hot._registerTimeout((function(){t.hot.alter("insert_row_below",void 0,1,"".concat(t.pluginName,".fill")),t.addingStarted=!1}),200)}},{key:"addNewRowIfNeeded",value:function(){if(!this.hot.selection.highlight.getFill().isEmpty()&&!1===this.addingStarted&&this.autoInsertRow){var t=this.hot.getSelectedLast(),e=this.hot.selection.highlight.getFill().getVisualCorners(),n=this.hot.countRows();t[2]<n-1&&e[2]===n-1&&(this.addingStarted=!0,this.addRow())}}},{key:"getIndexOfLastAdjacentFilledInRow",value:function(t){for(var e,data=this.hot.getData(),n=this.hot.countRows(),r=t[2]+1;r<n;r++){for(var o=t[1];o<=t[3];o++)if(data[r][o])return-1;var l=data[r][t[1]-1],c=data[r][t[3]+1];(l||c)&&(e=r)}return e}},{key:"addSelectionFromStartAreaToSpecificRowIndex",value:function(t,e){this.hot.selection.highlight.getFill().clear().add(this.hot._createCellCoords(t[0],t[1])).add(this.hot._createCellCoords(e,t[3])).commit()}},{key:"setSelection",value:function(t){var e;(e=this.hot).selectCell.apply(e,vn(Object(j.arrayMap)(t,(function(t){return Math.max(t,0)}))).concat([!1,!1]))}},{key:"selectAdjacent",value:function(){var t=this.hot.getSelectedLast(),e=this.getIndexOfLastAdjacentFilledInRow(t);return-1!==e&&void 0!==e&&(this.addSelectionFromStartAreaToSpecificRowIndex(t,e),!0)}},{key:"resetSelectionOfDraggedArea",value:function(){this.handleDraggedCells=0,this.hot.selection.highlight.getFill().clear()}},{key:"redrawBorders",value:function(t){this.hot.selection.highlight.getFill().clear().add(this.hot.getSelectedRangeLast().from).add(this.hot.getSelectedRangeLast().to).add(t).commit(),this.hot.view.render()}},{key:"getIfMouseWasDraggedOutside",value:function(t){var e=this.hot.rootDocument.documentElement,n=Object(c.offset)(this.hot.table).top-(this.hot.rootWindow.pageYOffset||e.scrollTop)+Object(c.outerHeight)(this.hot.table),r=Object(c.offset)(this.hot.table).left-(this.hot.rootWindow.pageXOffset||e.scrollLeft)+Object(c.outerWidth)(this.hot.table);return t.clientY>n&&t.clientX<=r}},{key:"registerEvents",value:function(){var t=this,e=this.hot.rootDocument.documentElement;this.eventManager.addEventListener(e,"mouseup",(function(){return t.onMouseUp()})),this.eventManager.addEventListener(e,"mousemove",(function(e){return t.onMouseMove(e)}))}},{key:"onCellCornerDblClick",value:function(){this.selectAdjacent()&&this.fillIn()}},{key:"onAfterCellCornerMouseDown",value:function(){this.handleDraggedCells=1,this.mouseDownOnCellCorner=!0}},{key:"onBeforeCellMouseOver",value:function(t){this.mouseDownOnCellCorner&&!this.hot.view.isMouseDown()&&this.handleDraggedCells&&(this.handleDraggedCells+=1,this.showBorder(t),this.addNewRowIfNeeded())}},{key:"onMouseUp",value:function(){this.handleDraggedCells&&(this.handleDraggedCells>1&&this.fillIn(),this.handleDraggedCells=0,this.mouseDownOnCellCorner=!1)}},{key:"onMouseMove",value:function(t){var e=this.getIfMouseWasDraggedOutside(t);!1===this.addingStarted&&this.handleDraggedCells>0&&e?(this.mouseDragOutside=!0,this.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&&this.autoInsertRow&&this.addRow()}},{key:"clearMappedSettings",value:function(){this.directions.length=0,this.autoInsertRow=!1}},{key:"mapSettings",value:function(){var t=function(t){var e={};return!0===t?(e.directions=Object.keys(yn),e.autoInsertRow=!0):Object(h.isObject)(t)?(Object(R.isDefined)(t.autoInsertRow)?t.direction===yn.horizontal?e.autoInsertRow=!1:e.autoInsertRow=t.autoInsertRow:e.autoInsertRow=!1,Object(R.isDefined)(t.direction)?e.directions=[t.direction]:e.directions=Object.keys(yn)):"string"==typeof t?(e.directions=[t],e.autoInsertRow=!0):(e.directions=[],e.autoInsertRow=!1),e}(this.hot.getSettings().fillHandle);this.directions=t.directions,this.autoInsertRow=t.autoInsertRow}},{key:"destroy",value:function(){Cn(Rn(l.prototype),"destroy",this).call(this)}}])&&On(e.prototype,n),r&&On(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function _n(t){return _n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_n(t)}function Tn(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return An(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return An(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function An(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function In(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==_n(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==_n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===_n(o)?o:String(o)),n)}var r,o}function xn(){return xn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Hn(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},xn.apply(this,arguments)}function Dn(t,p){return Dn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Dn(t,p)}function Nn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Hn(t);if(e){var o=Hn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===_n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Hn(t){return Hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hn(t)}var Ln="autoRowSize",Bn="autoRowSize",Un=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dn(t,e)}(l,t);var e,n,r,o=Nn(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).rowHeightsMap=void 0,e.headerHeight=null,e.ghostTable=new Ke(e.hot),e.samplesGenerator=new Je((function(t,col){var n;return t>=0?n=e.hot.getDataAtCell(t,col):-1===t&&(n=e.hot.getColHeader(col)),{value:n}})),e.firstCalculation=!0,e.inProgress=!1,e.measuredRows=0,e.rowHeightsMap=new tn.a,e.hot.rowIndexMapper.registerMap(Bn,e.rowHeightsMap),e.addHook("beforeRowResize",(function(t,n,r){return e.onBeforeRowResize(t,n,r)})),e}return e=l,n=[{key:"isEnabled",value:function(){var t=this.hot.getSettings()[Ln];return!0===t||Object(h.isObject)(t)}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.setSamplingOptions(),this.addHook("afterLoadData",(function(){return t.onAfterLoadData.apply(t,arguments)})),this.addHook("beforeChangeRender",(function(e){return t.onBeforeChange(e)})),this.addHook("beforeColumnResize",(function(){return t.recalculateAllRowsHeight()})),this.addHook("beforeViewRender",(function(e){return t.onBeforeViewRender(e)})),this.addHook("modifyRowHeight",(function(e,n){return t.getRowHeight(n,e)})),this.addHook("modifyColumnHeaderHeight",(function(){return t.getColumnHeaderHeight()})),xn(Hn(l.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){var t=this;this.headerHeight=null,xn(Hn(l.prototype),"disablePlugin",this).call(this),this.addHook("beforeRowResize",(function(e,n,r){return t.onBeforeRowResize(e,n,r)}))}},{key:"calculateRowsHeight",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countCols()-1},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="number"==typeof e?{from:e,to:e}:e,l="number"==typeof n?{from:n,to:n}:n;if(null!==this.hot.getColHeader(0)){var c=this.samplesGenerator.generateRowSamples(-1,l);this.ghostTable.addColumnHeadersRow(c.get(-1))}Object(ie.rangeEach)(o.from,o.to,(function(e){if(r||null===t.rowHeightsMap.getValueAtIndex(e)){var n=t.samplesGenerator.generateRowSamples(e,l);Object(j.arrayEach)(n,(function(e){var n=Tn(e,2),r=n[0],o=n[1];return t.ghostTable.addRow(r,o)}))}})),this.ghostTable.rows.length&&(this.hot.batchExecution((function(){t.ghostTable.getHeights((function(e,n){e<0?t.headerHeight=n:t.rowHeightsMap.setValueAtIndex(t.hot.toPhysicalRow(e),n)}))}),!0),this.measuredRows=o.to+1,this.ghostTable.clean())}},{key:"calculateAllRowsHeight",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},n=0,r=this.hot.countRows()-1,o=null;this.inProgress=!0;var c=this.getSyncCalculationLimit();this.firstCalculation&&c>=0&&(this.calculateRowsHeight({from:0,to:c},e),this.firstCalculation=!1,n=c+1),n<r?function c(){if(!t.hot)return Object(Fe.cancelAnimationFrame)(o),void(t.inProgress=!1);t.calculateRowsHeight({from:n,to:Math.min(n+l.CALCULATION_STEP,r)},e),(n=n+l.CALCULATION_STEP+1)<r?o=Object(Fe.requestAnimationFrame)(c):(Object(Fe.cancelAnimationFrame)(o),t.inProgress=!1,t.hot.view.adjustElementsSize(!0),t.hot.view._wt.wtOverlays.inlineStartOverlay.needFullRender&&t.hot.view._wt.wtOverlays.inlineStartOverlay.clone.draw())}():(this.inProgress=!1,this.hot.view.adjustElementsSize(!1))}},{key:"setSamplingOptions",value:function(){var t=this.hot.getSettings()[Ln],e=t&&Object(h.hasOwnProperty)(t,"samplingRatio")?t.samplingRatio:void 0,n=t&&Object(h.hasOwnProperty)(t,"allowSampleDuplicates")?t.allowSampleDuplicates:void 0;e&&!isNaN(e)&&this.samplesGenerator.setSampleCount(parseInt(e,10)),n&&this.samplesGenerator.setAllowDuplicates(n)}},{key:"recalculateAllRowsHeight",value:function(){Object(c.isVisible)(this.hot.view._wt.wtTable.TABLE)&&(this.clearCache(),this.calculateAllRowsHeight())}},{key:"getSyncCalculationLimit",value:function(){var t=this.hot.getSettings()[Ln],e=l.SYNC_CALCULATION_LIMIT,n=this.hot.countRows()-1;return Object(h.isObject)(t)&&(e=t.syncLimit,Object(E.isPercentValue)(e)?e=Object(ie.valueAccordingPercent)(n,e):e>>=0),Math.min(e,n)}},{key:"getRowHeight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=t<0?this.headerHeight:this.rowHeightsMap.getValueAtIndex(this.hot.toPhysicalRow(t)),r=e;return null!==n&&n>(e||0)&&(r=n),r}},{key:"getColumnHeaderHeight",value:function(){return this.headerHeight}},{key:"getFirstVisibleRow",value:function(){var t=this.hot.view._wt;return t.wtViewport.rowsVisibleCalculator?t.wtTable.getFirstVisibleRow():t.wtViewport.rowsRenderCalculator?t.wtTable.getFirstRenderedRow():-1}},{key:"getLastVisibleRow",value:function(){var t=this.hot.view._wt;return t.wtViewport.rowsVisibleCalculator?t.wtTable.getLastVisibleRow():t.wtViewport.rowsRenderCalculator?t.wtTable.getLastRenderedRow():-1}},{key:"clearCache",value:function(){this.headerHeight=null,this.rowHeightsMap.init()}},{key:"clearCacheByRange",value:function(t){var e=this,n="number"==typeof t?{from:t,to:t}:t,r=n.from,o=n.to;this.hot.batchExecution((function(){Object(ie.rangeEach)(Math.min(r,o),Math.max(r,o),(function(t){e.rowHeightsMap.setValueAtIndex(t,null)}))}),!0)}},{key:"isNeedRecalculate",value:function(){return!!Object(j.arrayFilter)(this.rowHeightsMap.getValues().slice(0,this.measuredRows),(function(t){return null===t})).length}},{key:"onBeforeViewRender",value:function(){var t=this.hot.renderCall,e=this.hot.getSettings().fixedRowsBottom,n=this.getFirstVisibleRow(),r=this.getLastVisibleRow();if(-1!==n&&-1!==r){if(this.calculateRowsHeight({from:n,to:r},void 0,t),e){var o=this.hot.countRows()-1;this.calculateRowsHeight({from:o-e,to:o})}this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllRowsHeight()}}},{key:"onBeforeRowMove",value:function(t,e){this.clearCacheByRange({from:t,to:e}),this.calculateAllRowsHeight()}},{key:"onBeforeRowResize",value:function(t,e,n){var r=t;return n&&(this.calculateRowsHeight(e,void 0,!0),r=this.getRowHeight(e)),r}},{key:"onAfterLoadData",value:function(){var t=this;this.hot.view?this.recalculateAllRowsHeight():setTimeout((function(){t.hot&&t.recalculateAllRowsHeight()}),0)}},{key:"onBeforeChange",value:function(t){var e=null;1===t.length?e=t[0][0]:t.length>1&&(e={from:t[0][0],to:t[t.length-1][0]}),null!==e&&this.clearCacheByRange(e)}},{key:"destroy",value:function(){this.ghostTable.clean(),xn(Hn(l.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return Ln}},{key:"PLUGIN_PRIORITY",get:function(){return 40}},{key:"SETTING_KEYS",get:function(){return!0}},{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 500}}],n&&In(e.prototype,n),r&&In(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be),Fn=n(944),Vn=n(780),Wn=n(765);function zn(t){return zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zn(t)}function Yn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==zn(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==zn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===zn(o)?o:String(o)),n)}var r,o}function Gn(){return Gn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=$n(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Gn.apply(this,arguments)}function Kn(t,p){return Kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Kn(t,p)}function Xn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$n(t);if(e){var o=$n(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===zn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function $n(t){return $n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$n(t)}var qn=Object(Fn.a)("physicallyIndexed"),Zn=qn.getListWithInsertedItems,Jn=qn.getListWithRemovedItems,Qn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kn(t,e)}(l,t);var e,n,r,o=Xn(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),o.call(this,(function(t){return t}))}return e=l,(n=[{key:"insert",value:function(t,e){var n=Object(Vn.b)(this.indexedValues,e);this.indexedValues=Zn(n,t,e,this.initValueOrFn),Gn($n(l.prototype),"insert",this).call(this,t,e)}},{key:"remove",value:function(t){var e=Jn(this.indexedValues,t);this.indexedValues=Object(Vn.a)(e,t),Gn($n(l.prototype),"remove",this).call(this,t)}}])&&Yn(e.prototype,n),r&&Yn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Wn.a);function er(t){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},er(t)}function nr(t){return function(t){if(Array.isArray(t))return rr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return rr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function or(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==er(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===er(o)?o:String(o)),n)}var r,o}function ir(){return ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=ur(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},ir.apply(this,arguments)}function ar(t,p){return ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},ar(t,p)}function lr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ur(t);if(e){var o=ur(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===er(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function ur(t){return ur=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ur(t)}var sr=Object(Fn.a)("physicallyIndexed"),cr=sr.getListWithInsertedItems,fr=sr.getListWithRemovedItems,dr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ar(t,e)}(l,t);var e,n,r,o=lr(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),o.call(this,(function(t){return t}))}return e=l,(n=[{key:"insert",value:function(t,e){var n=this;this.indexedValues=cr(this.indexedValues,t,e,(function(t,e){return n.getNextValue(e)})),ir(ur(l.prototype),"insert",this).call(this,t,e)}},{key:"remove",value:function(t){this.indexedValues=fr(this.indexedValues,t),ir(ur(l.prototype),"remove",this).call(this,t)}},{key:"getNextValue",value:function(t){return Math.max.apply(Math,nr(this.getValues()))+1+t}}])&&or(e.prototype,n),r&&or(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Wn.a);function pr(t){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pr(t)}function yr(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==pr(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===pr(o)?o:String(o)),n)}var r,o}function gr(){return gr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=wr(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},gr.apply(this,arguments)}function vr(t,p){return vr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},vr(t,p)}function mr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wr(t);if(e){var o=wr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===pr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function wr(t){return wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wr(t)}var Or="bindRowsWithHeaders",Cr=new Map([["loose",Qn],["strict",dr]]),Sr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vr(t,e)}(l,t);var e,n,r,o=mr(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).headerIndexes=null,e}return e=l,r=[{key:"PLUGIN_KEY",get:function(){return Or}},{key:"PLUGIN_PRIORITY",get:function(){return 210}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[Or]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[Or];"string"!=typeof e&&(e="loose");var n=Cr.get(e);this.headerIndexes=this.hot.rowIndexMapper.registerMap("bindRowsWithHeaders",new n),this.addHook("modifyRowHeader",(function(e){return t.onModifyRowHeader(e)})),gr(wr(l.prototype),"enablePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){this.hot.rowIndexMapper.unregisterMap("bindRowsWithHeaders"),gr(wr(l.prototype),"disablePlugin",this).call(this)}},{key:"onModifyRowHeader",value:function(t){return this.headerIndexes.getValueAtIndex(this.hot.toPhysicalRow(t))}},{key:"destroy",value:function(){gr(wr(l.prototype),"destroy",this).call(this)}}])&&yr(e.prototype,n),r&&yr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be),kr=n(689);function jr(t){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jr(t)}function Rr(t){return function(t){if(Array.isArray(t))return Er(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Er(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Er(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Er(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Pr(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nr(n.key),n)}}function Mr(){return Mr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Ir(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Mr.apply(this,arguments)}function _r(t,p){return _r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},_r(t,p)}function Tr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ir(t);if(e){var o=Ir(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===jr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ar(t)}(this,n)}}function Ar(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ir(t){return Ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ir(t)}function xr(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Dr(t,e,n){return(e=Nr(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nr(t){var e=function(input,t){if("object"!==jr(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==jr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===jr(e)?e:String(e)}function Hr(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Br(t,e,"get"))}function Lr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Br(t,e,"set"),n),n}function Br(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Ur="collapsibleColumns",Fr=["nestedHeaders"],Vr="collapsibleIndicator",Wr=new Map([["collapse",{hideColumn:!0,beforeHook:"beforeColumnCollapse",afterHook:"afterColumnCollapse"}],["expand",{hideColumn:!1,beforeHook:"beforeColumnExpand",afterHook:"afterColumnExpand"}]]),zr=new WeakMap,Yr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_r(t,e)}(l,t);var e,n,r,o=Tr(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Dr(Ar(t=o.call.apply(o,[this].concat(n))),"nestedHeadersPlugin",null),Dr(Ar(t),"eventManager",new $.a(Ar(t))),Dr(Ar(t),"headerStateManager",null),xr(Ar(t),zr,{writable:!0,value:null}),t}return e=l,n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[Ur]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.hot.getSettings().nestedHeaders||Object(kr.b)("You need to configure the Nested Headers plugin in order to use collapsible headers."),Lr(this,zr,this.hot.columnIndexMapper.createAndRegisterIndexMap(this.pluginName,"hiding")),this.nestedHeadersPlugin=this.hot.getPlugin("nestedHeaders"),this.headerStateManager=this.nestedHeadersPlugin.getStateManager(),this.addHook("init",(function(){return t.onInit()})),this.addHook("afterLoadData",(function(){return t.onAfterLoadData.apply(t,arguments)})),this.addHook("afterGetColHeader",(function(){return t.onAfterGetColHeader.apply(t,arguments)})),this.addHook("beforeOnCellMouseDown",(function(e,n,r){return t.onBeforeOnCellMouseDown(e,n,r)})),Mr(Ir(l.prototype),"enablePlugin",this).call(this),this.updatePlugin())}},{key:"updatePlugin",value:function(){if(this.hot.view){if(!this.nestedHeadersPlugin.detectedOverlappedHeaders){var t=this.hot.getSettings().collapsibleColumns;"boolean"==typeof t?this.headerStateManager.mapState((function(t){return{collapsible:t.origColspan>1}})):Array.isArray(t)&&(this.headerStateManager.mapState((function(){return{collapsible:!1}})),this.headerStateManager.mergeStateWith(t))}Mr(Ir(l.prototype),"updatePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),Lr(this,zr,null),this.nestedHeadersPlugin=null,this.clearButtons(),Mr(Ir(l.prototype),"disablePlugin",this).call(this)}},{key:"clearButtons",value:function(){if(this.hot.view){var t=this.hot.view._wt.getSetting("columnHeaders").length,e=this.hot.view._wt.wtTable.THEAD,n=this.hot.view._wt.wtOverlays.topOverlay.clone.wtTable.THEAD,r=this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay?this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null,o=function(button){button&&button.parentNode.removeChild(button)};Object(ie.rangeEach)(0,t-1,(function(i){var t=e.childNodes[i],l=n.childNodes[i],c=r?r.childNodes[i]:null;Object(ie.rangeEach)(0,t.childNodes.length-1,(function(e){var button=t.childNodes[e].querySelector(".".concat(Vr));o(button),l&&l.childNodes[e]&&(button=l.childNodes[e].querySelector(".".concat(Vr)),o(button)),r&&c&&c.childNodes[e]&&(button=c.childNodes[e].querySelector(".".concat(Vr)),o(button))}))}),!0)}}},{key:"expandSection",value:function(t){this.toggleCollapsibleSection([t],"expand")}},{key:"collapseSection",value:function(t){this.toggleCollapsibleSection([t],"collapse")}},{key:"toggleAllCollapsibleSections",value:function(t){var e=this,n=this.headerStateManager.mapNodes((function(n){var r=n.collapsible,o=n.origColspan,l=n.headerLevel,c=n.columnIndex,f=n.isCollapsed;if(!0===r&&o>1&&(f&&"expand"===t||!f&&"collapse"===t))return{row:e.headerStateManager.levelToRowCoords(l),col:c}}));this.toggleCollapsibleSection(n,t)}},{key:"collapseAll",value:function(){this.toggleAllCollapsibleSections("collapse")}},{key:"expandAll",value:function(){this.toggleAllCollapsibleSections("expand")}},{key:"toggleCollapsibleSection",value:function(t,e){var n=this;if(!Wr.has(e))throw new Error("Unsupported action is passed (".concat(e,")."));if(Array.isArray(t)){var r=Object(j.arrayFilter)(t,(function(t){return t.row<0})),o=r.length>0;Object(j.arrayEach)(r,(function(t){var r,l=t.row,c=t.col,f=null!==(r=n.headerStateManager.getHeaderSettings(l,c))&&void 0!==r?r:{},h=f.collapsible,d=f.isCollapsed;if(!h||d&&"collapse"===e||!d&&"expand"===e)return o=!1,!1}));var l=[],c=[];o&&Object(j.arrayEach)(r,(function(t){var r=t.row,o=t.col,f=n.headerStateManager.triggerNodeModification(e,r,o),h=f.colspanCompensation,d=f.affectedColumns,y=f.rollbackModification;h>0&&(c.push.apply(c,Rr(d)),l.push(y))}));var f=this.getCollapsedColumns(),h=[];"collapse"===e?h=Object(j.arrayUnique)([].concat(Rr(f),c)):"expand"===e&&(h=Object(j.arrayFilter)(f,(function(t){return!c.includes(t)})));var d=Wr.get(e);if(!1!==this.hot.runHooks(d.beforeHook,f,h,o)){this.hot.batchExecution((function(){Object(j.arrayEach)(c,(function(t){Hr(n,zr).setValueAtIndex(n.hot.toPhysicalColumn(t),d.hideColumn)}))}),!0);var y=this.getCollapsedColumns().length!==f.length;this.hot.runHooks(d.afterHook,f,h,o,y),this.hot.render(),this.hot.view.adjustElementsSize(!0)}else Object(j.arrayEach)(l,(function(t){t()}))}}},{key:"getCollapsedColumns",value:function(){return Hr(this,zr).getHiddenIndexes()}},{key:"onAfterGetColHeader",value:function(t,e,n){var r,o,l=null!==(r=this.headerStateManager.getHeaderSettings(n,t))&&void 0!==r?r:{},f=l.collapsible,h=l.origColspan,d=l.isCollapsed,y=f&&h>1&&t>=this.hot.getSettings().fixedColumnsStart,v=e.querySelector(".".concat(Vr));y?(v||(v=this.hot.rootDocument.createElement("div"),Object(c.addClass)(v,Vr),e.querySelector("div:first-child").appendChild(v)),Object(c.removeClass)(v,["collapsed","expanded"]),d?(Object(c.addClass)(v,"collapsed"),Object(c.fastInnerText)(v,"+")):(Object(c.addClass)(v,"expanded"),Object(c.fastInnerText)(v,"-"))):null===(o=v)||void 0===o||o.remove()}},{key:"onBeforeOnCellMouseDown",value:function(t,e){Object(c.hasClass)(t.target,Vr)&&(Object(c.hasClass)(t.target,"expanded")?(this.eventManager.fireEvent(t.target,"mouseup"),this.toggleCollapsibleSection([e],"collapse")):Object(c.hasClass)(t.target,"collapsed")&&(this.eventManager.fireEvent(t.target,"mouseup"),this.toggleCollapsibleSection([e],"expand")),Object(f.stopImmediatePropagation)(t))}},{key:"onInit",value:function(){this.updatePlugin()}},{key:"onAfterLoadData",value:function(t,e){e||this.updatePlugin()}},{key:"destroy",value:function(){Lr(this,zr,null),Mr(Ir(l.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return Ur}},{key:"PLUGIN_PRIORITY",get:function(){return 290}},{key:"PLUGIN_DEPS",get:function(){return["plugin:NestedHeaders"]}},{key:"SETTING_KEYS",get:function(){return[Ur].concat(Fr)}}],n&&Pr(e.prototype,n),r&&Pr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be),Gr=(n(17),n(691),n(312),n(686)),Kr=n(842),Xr=(n(196),n(84),n(844));function $r(t){return $r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$r(t)}function qr(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Zr(t,e,n){return(e=eo(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jr(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return Qr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qr(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qr(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function to(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eo(n.key),n)}}function eo(t){var e=function(input,t){if("object"!==$r(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==$r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===$r(e)?e:String(e)}var no=["sortEmptyCells","indicator","headerAction","compareFunctionFactory"],ro=!1,oo=!0,io=!0,ao=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hot=e,this.sortingStates=new Xr.a,this.sortEmptyCells=ro,this.indicator=oo,this.headerAction=io,this.compareFunctionFactory=void 0,this.mapName=n,this.hot.columnIndexMapper.registerMap(n,this.sortingStates)}var e,n,r;return e=t,n=[{key:"updateAllColumnsProperties",value:function(t){var e=this;Object(h.isObject)(t)&&Object(h.objectEach)(t,(function(t,n){no.includes(n)&&(e[n]=t)}))}},{key:"getAllColumnsProperties",value:function(){var t={sortEmptyCells:this.sortEmptyCells,indicator:this.indicator,headerAction:this.headerAction};return"function"==typeof this.compareFunctionFactory&&(t.compareFunctionFactory=this.compareFunctionFactory),t}},{key:"getSortOrderOfColumn",value:function(t){var e;return null===(e=this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(t)))||void 0===e?void 0:e.sortOrder}},{key:"getIndexOfColumnInSortQueue",value:function(t){return t=this.hot.toPhysicalColumn(t),this.sortingStates.getEntries().findIndex((function(e){return Jr(e,1)[0]===t}))}},{key:"getNumberOfSortedColumns",value:function(){return this.sortingStates.getLength()}},{key:"isListOfSortedColumnsEmpty",value:function(){return 0===this.getNumberOfSortedColumns()}},{key:"isColumnSorted",value:function(t){return Object(h.isObject)(this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(t)))}},{key:"getSortStates",value:function(){var t=this;return null===this.sortingStates?[]:this.sortingStates.getEntries().map((function(e){var n=Jr(e,2),r=n[0],o=n[1];return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?qr(Object(source),!0).forEach((function(e){Zr(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):qr(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({column:t.hot.toVisualColumn(r)},o)}))}},{key:"getColumnSortState",value:function(t){var e=this.getSortOrderOfColumn(t);if(Object(R.isDefined)(e))return{column:t,sortOrder:e}}},{key:"setSortStates",value:function(t){this.sortingStates.clear();for(var i=0;i<t.length;i+=1)this.sortingStates.setValueAtIndex(this.hot.toPhysicalColumn(t[i].column),{sortOrder:t[i].sortOrder})}},{key:"destroy",value:function(){this.hot.columnIndexMapper.unregisterMap(this.mapName),this.sortingStates=null}}],n&&to(e.prototype,n),r&&to(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),lo="asc",uo="desc",so="colHeader";function co(t){if(t.some((function(t){return!1===function(t){if(!1===Object(h.isObject)(t))return!1;var e=t.column,n=t.sortOrder;return Number.isInteger(e)&&[lo,uo].includes(n)}(t)})))return!1;var e=t.map((function(t){return t.column}));return new Set(e).size===e.length}function fo(t){if(t!==uo)return t===lo?uo:lo}function ho(t){return t.querySelector(".".concat(so))}function po(t,e){if(t<0||!e.parentNode)return!1;var n=e.parentNode.parentNode.childNodes;return-1===Array.from(n).indexOf(e.parentNode)-n.length}function yo(t,e,n){return-1===t&&e>=0&&!1===Object(f.isRightClick)(n)}var go="indicatorDisabled",vo="columnSorting",bo="sortAction",mo=new Map([[lo,"ascending"],[uo,"descending"]]);function wo(t,e,n,r){var o=[vo];if(r&&o.push(bo),!1===n)return o.push(go),o;var l=t.getSortOrderOfColumn(e);return Object(R.isDefined)(l)&&o.push(mo.get(l)),o}var Oo=0,Co=-1,So=1;function ko(t,e,n){var r=e.locale;return function(e,o){var l=n.sortEmptyCells;return"string"==typeof e&&(e=e.toLocaleLowerCase(r)),"string"==typeof o&&(o=o.toLocaleLowerCase(r)),e===o?Oo:Object(R.isEmpty)(e)?Object(R.isEmpty)(o)?Oo:l&&"asc"===t?Co:So:Object(R.isEmpty)(o)?l&&"asc"===t?So:Co:isNaN(e)&&!isNaN(o)?"asc"===t?So:Co:!isNaN(e)&&isNaN(o)?"asc"===t?Co:So:(isNaN(e)||isNaN(o)||(e=parseFloat(e),o=parseFloat(o)),e<o?"asc"===t?Co:So:e>o?"asc"===t?So:Co:Oo)}}var jo="default";var Ro=n(725),Eo=Object(Ro.a)("sorting.compareFunctionFactory"),Po=Eo.register,Mo=Eo.getItem,_o=Eo.hasItem,To=Object(Ro.a)("sorting.mainSortComparator"),Ao=To.register,Io=To.getItem;function xo(t){return _o(t)?Mo(t):Mo(jo)}function Do(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return No(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return No(t,e)}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function No(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Ho(t){return Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ho(t)}Po("numeric",(function(t,e,n){return function(e,r){var o=parseFloat(e),l=parseFloat(r),c=n.sortEmptyCells;if(o===l||isNaN(o)&&isNaN(l))return Oo;if(c){if(Object(R.isEmpty)(e))return"asc"===t?Co:So;if(Object(R.isEmpty)(r))return"asc"===t?So:Co}return isNaN(o)?So:isNaN(l)?Co:o<l?"asc"===t?Co:So:o>l?"asc"===t?So:Co:Oo}})),Po("checkbox",(function(t,e,n){var r=e.checkedTemplate,o=e.uncheckedTemplate,l=n.sortEmptyCells;return function(c,f){var h=Object(R.isEmpty)(c),d=Object(R.isEmpty)(f),y=h?o:c,v=d?o:f,m=y===o||y===r,w=v===o||v===r;if(!1===l){if(h&&!1===d)return So;if(!1===h&&d)return Co}return!1===m&&w?"asc"===t?Co:So:m&&!1===w?"asc"===t?So:Co:!1===m&&!1===w?ko(t,e,n)(c,f):y===o&&v===r?"asc"===t?Co:So:y===r&&v===o?"asc"===t?So:Co:Oo}})),Po("date",(function(t,e,n){return function(r,o){var l=n.sortEmptyCells;if(r===o)return Oo;if(Object(R.isEmpty)(r))return Object(R.isEmpty)(o)?Oo:l&&"asc"===t?Co:So;if(Object(R.isEmpty)(o))return l&&"asc"===t?So:Co;var c=e.dateFormat,f=K(r,c),h=K(o,c);return f.isValid()?h.isValid()?h.isAfter(f)?"asc"===t?Co:So:h.isBefore(f)?"asc"===t?So:Co:Oo:Co:So}})),Po(jo,ko);var Lo=["column"],Bo=["column"];function Uo(t){return function(t){if(Array.isArray(t))return Fo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Fo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fo(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fo(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Vo(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Wo(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Vo(Object(source),!0).forEach((function(e){zo(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Vo(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function zo(t,e,n){return(e=Ko(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yo(source,t){if(null==source)return{};var e,i,n=function(source,t){if(null==source)return{};var e,i,n={},r=Object.keys(source);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||(n[e]=source[e]);return n}(source,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(source);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(source,e)&&(n[e]=source[e])}return n}function Go(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ko(n.key),n)}}function Ko(t){var e=function(input,t){if("object"!==Ho(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Ho(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Ho(e)?e:String(e)}function Xo(){return Xo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Zo(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Xo.apply(this,arguments)}function $o(t,p){return $o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},$o(t,p)}function qo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Zo(t);if(e){var o=Zo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Ho(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Zo(t){return Zo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zo(t)}var Jo="columnSorting",Qo="append",ti="replace";Ao(Jo,(function(t,e){return function(n,r){var o,l,c,f,h,d,y=Do(n).slice(1),v=Do(r).slice(1);return l=t[o=0],c=e[o],f=y[o],h=v[o],((d=c.columnSorting).compareFunctionFactory?d.compareFunctionFactory:xo(c.type))(l,c,d)(f,h)}})),lt.a.getSingleton().register("beforeColumnSort"),lt.a.getSingleton().register("afterColumnSort");var ei=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$o(t,e)}(l,t);var e,n,r,o=qo(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).columnStatesManager=null,e.columnMetaCache=null,e.pluginKey=Jo,e.indexesSequenceCache=null,e}return e=l,n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[this.pluginKey]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.columnStatesManager=new ao(this.hot,"".concat(this.pluginKey,".sortingStates")),this.columnMetaCache=new tn.a((function(e){var n=t.hot.toVisualColumn(e);return null===n&&(n=e),t.getMergedPluginSettings(n)})),this.hot.columnIndexMapper.registerMap("".concat(this.pluginKey,".columnMeta"),this.columnMetaCache),this.addHook("afterGetColHeader",(function(e,n){return t.onAfterGetColHeader(e,n)})),this.addHook("beforeOnCellMouseDown",(function(){return t.onBeforeOnCellMouseDown.apply(t,arguments)})),this.addHook("afterOnCellMouseDown",(function(e,n){return t.onAfterOnCellMouseDown(e,n)})),this.addHook("afterInit",(function(){return t.loadOrSortBySettings()})),this.addHook("afterLoadData",(function(){return t.onAfterLoadData.apply(t,arguments)})),this.hot.view&&this.loadOrSortBySettings(),Xo(Zo(l.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){var t=this,e=function(e,n){var r=ho(n);!1!==po(e,n)&&null!==r&&t.updateHeaderClasses(r)};this.hot.addHook("afterGetColHeader",e),this.hot.addHookOnce("afterViewRender",(function(){t.hot.removeHook("afterGetColHeader",e)})),this.hot.batchExecution((function(){null!==t.indexesSequenceCache&&(t.hot.rowIndexMapper.setIndexesSequence(t.indexesSequenceCache.getValues()),t.hot.rowIndexMapper.unregisterMap(t.pluginKey))}),!0),this.hot.columnIndexMapper.unregisterMap("".concat(this.pluginKey,".columnMeta")),this.columnStatesManager.destroy(),this.columnMetaCache=null,this.columnStatesManager=null,Xo(Zo(l.prototype),"disablePlugin",this).call(this)}},{key:"sort",value:function(t){var e=this.getSortConfig(),n=this.getNormalizedSortConfigs(t),r=this.areValidSortConfigs(n);!1!==this.hot.runHooks("beforeColumnSort",e,n,r)&&(0===e.length&&null===this.indexesSequenceCache&&(this.indexesSequenceCache=this.hot.rowIndexMapper.registerMap(this.pluginKey,new Kr.a),this.indexesSequenceCache.setValues(this.hot.rowIndexMapper.getIndexesSequence())),r&&(this.columnStatesManager.setSortStates(n),this.sortByPresetSortStates(n),this.saveAllSortSettings(n)),this.hot.runHooks("afterColumnSort",e,r?n:e,r),r&&(this.hot.render(),this.hot.forceFullRender=!1,this.hot.view.render()))}},{key:"clearSort",value:function(){this.sort([])}},{key:"isSorted",value:function(){return this.enabled&&!this.columnStatesManager.isListOfSortedColumnsEmpty()}},{key:"getSortConfig",value:function(t){return Object(R.isDefined)(t)?this.columnStatesManager.getColumnSortState(t):this.columnStatesManager.getSortStates()}},{key:"setSortConfig",value:function(t){var e=this.getNormalizedSortConfigs(t);this.areValidSortConfigs(e)&&this.columnStatesManager.setSortStates(e)}},{key:"getNormalizedSortConfigs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)?t.slice(0,1):[t]}},{key:"areValidSortConfigs",value:function(t){var e=this.hot.countCols();return co(t)&&t.every((function(t){var n=t.column;return n<=e&&n>=0}))}},{key:"saveAllSortSettings",value:function(t){var e=this,n=this.columnStatesManager.getAllColumnsProperties();n.initialConfig=Object(j.arrayMap)(t,(function(t){var n=t.column,r=Yo(t,Lo);return Wo({column:e.hot.toPhysicalColumn(n)},r)})),this.hot.runHooks("persistentStateSave","columnSorting",n)}},{key:"getAllSavedSortSettings",value:function(){var t=this,e={};this.hot.runHooks("persistentStateLoad","columnSorting",e);var n=e.value;return Object(R.isDefined)(n)&&Array.isArray(n.initialConfig)&&(n.initialConfig=Object(j.arrayMap)(n.initialConfig,(function(e){var n=e.column,r=Yo(e,Bo);return Wo({column:t.hot.toVisualColumn(n)},r)}))),n}},{key:"getColumnNextConfig",value:function(t){var e=this.columnStatesManager.getSortOrderOfColumn(t);if(Object(R.isDefined)(e)){var n=fo(e);return Object(R.isDefined)(n)?{column:t,sortOrder:n}:void 0}var r=this.hot.countCols();if(Number.isInteger(t)&&t>=0&&t<r)return{column:t,sortOrder:fo()}}},{key:"getNextSortConfig",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qo,n=this.columnStatesManager.getIndexOfColumnInSortQueue(t),r=-1!==n,o=this.getSortConfig(),l=this.getColumnNextConfig(t);if(r){if(Object(R.isUndefined)(l))return[].concat(Uo(o.slice(0,n)),Uo(o.slice(n+1)));if(e===Qo)return[].concat(Uo(o.slice(0,n)),Uo(o.slice(n+1)),[l]);if(e===ti)return[].concat(Uo(o.slice(0,n)),[l],Uo(o.slice(n+1)))}return Object(R.isDefined)(l)?o.concat(l):o}},{key:"getPluginColumnConfig",value:function(t){if(Object(h.isObject)(t)){var e=t[this.pluginKey];if(Object(h.isObject)(e))return e}return{}}},{key:"getMergedPluginSettings",value:function(t){var e=this.hot.getSettings()[this.pluginKey],n=this.columnStatesManager.getAllColumnsProperties(),r=this.hot.getCellMeta(0,t),o=Object.getPrototypeOf(r);return Array.isArray(o.columns)?Object.assign(n,e,this.getPluginColumnConfig(o.columns[t])):Object(Gr.isFunction)(o.columns)?Object.assign(n,e,this.getPluginColumnConfig(o.columns(t))):Object.assign(n,e)}},{key:"getFirstCellSettings",value:function(t){var e=this.hot.getCellMeta(0,t),n=Object.create(e);return n[this.pluginKey]=this.columnMetaCache.getValueAtIndex(this.hot.toPhysicalColumn(t)),n}},{key:"getNumberOfRowsToSort",value:function(t){var e=this.hot.getSettings();return e.maxRows<=t?e.maxRows:t-e.minSpareRows}},{key:"sortByPresetSortStates",value:function(t){var e=this;if(0!==t.length){for(var n=[],r=this.hot.countRows(),o=function(n){return Object(j.arrayMap)(t,(function(t){return e.hot.getDataAtCell(n,t.column)}))},l=0;l<this.getNumberOfRowsToSort(r);l+=1)n.push([this.hot.toPhysicalRow(l)].concat(o(l)));var c=Object(j.arrayMap)(n,(function(t){return t[0]}));!function(t,e){for(var n=Io(e),r=arguments.length,o=new Array(r>2?r-2:0),l=2;l<r;l++)o[l-2]=arguments[l];t.sort(n.apply(void 0,o))}(n,this.pluginKey,Object(j.arrayMap)(t,(function(t){return t.sortOrder})),Object(j.arrayMap)(t,(function(t){return e.getFirstCellSettings(t.column)})));for(var f=n.length;f<r;f+=1)n.push([f].concat(o(f)));var h=Object(j.arrayMap)(n,(function(t){return t[0]})),d=new Map(Object(j.arrayMap)(c,(function(t,e){return[t,h[e]]}))),y=Object(j.arrayMap)(this.hot.rowIndexMapper.getIndexesSequence(),(function(t){return d.has(t)?d.get(t):t}));this.hot.rowIndexMapper.setIndexesSequence(y)}else this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues())}},{key:"loadOrSortBySettings",value:function(){var t=this.getAllSavedSortSettings();if(Object(h.isObject)(t))this.sortBySettings(t);else{var e=this.hot.getSettings()[this.pluginKey];this.sortBySettings(e)}}},{key:"sortBySettings",value:function(t){if(Object(h.isObject)(t)){this.columnStatesManager.updateAllColumnsProperties(t);var e=t.initialConfig;(Array.isArray(e)||Object(h.isObject)(e))&&this.sort(e)}else this.hot.render()}},{key:"onAfterGetColHeader",value:function(t,e){var n=ho(e);if(!1!==po(t,e)&&null!==n){var r=this.getFirstCellSettings(t)[this.pluginKey],o=r.indicator,l=r.headerAction;this.updateHeaderClasses(n,this.columnStatesManager,t,o,l)}}},{key:"updateHeaderClasses",value:function(t){if(Object(c.removeClass)(t,Array.from(mo.values()).concat(bo,go,vo)),!1!==this.enabled){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];Object(c.addClass)(t,wo.apply(void 0,n))}}},{key:"onUpdateSettings",value:function(t){Xo(Zo(l.prototype),"onUpdateSettings",this).call(this),null!==this.columnMetaCache&&this.columnMetaCache.init(this.hot.columnIndexMapper.getNumberOfIndexes()),Object(R.isDefined)(t[this.pluginKey])&&this.sortBySettings(t[this.pluginKey])}},{key:"onAfterLoadData",value:function(t){!0===t&&this.hot.view&&this.loadOrSortBySettings()}},{key:"wasClickableHeaderClicked",value:function(t,e){return this.getFirstCellSettings(e)[this.pluginKey].headerAction&&"SPAN"===t.target.nodeName}},{key:"onBeforeOnCellMouseDown",value:function(t,e,n,r){!1!==yo(e.row,e.col,t)&&this.wasClickableHeaderClicked(t,e.col)&&this.hot.getShortcutManager().isCtrlPressed()&&(r.column=!0)}},{key:"onAfterOnCellMouseDown",value:function(t,e){!1!==yo(e.row,e.col,t)&&this.wasClickableHeaderClicked(t,e.col)&&(this.hot.getShortcutManager().isCtrlPressed()&&(this.hot.deselectCell(),this.hot.selectColumns(e.col)),this.sort(this.getColumnNextConfig(e.col)))}},{key:"destroy",value:function(){var t;null===(t=this.columnStatesManager)||void 0===t||t.destroy(),Xo(Zo(l.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return Jo}},{key:"PLUGIN_PRIORITY",get:function(){return 50}}],n&&Go(e.prototype,n),r&&Go(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);n(244),n(425);function ni(t){return ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ni(t)}function ri(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==ni(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==ni(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===ni(o)?o:String(o)),n)}var r,o}var oi,ii=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.plugin=e,this.hot=this.plugin.hot,this.endpoints=[],this.settings=n,this.settingsType="array",this.currentEndpoint=null,this.cellsToSetCache=[]}var e,n,r;return e=t,n=[{key:"getEndpoint",value:function(t){return"function"===this.settingsType?this.fillMissingEndpointData(this.settings)[t]:this.endpoints[t]}},{key:"getAllEndpoints",value:function(){return"function"===this.settingsType?this.fillMissingEndpointData(this.settings):this.endpoints}},{key:"fillMissingEndpointData",value:function(t){return this.parseSettings(t.call(this))}},{key:"parseSettings",value:function(t){var e=this,n=[],r=t;if(r||"function"!=typeof this.settings)return r||(r=this.settings),Object(j.arrayEach)(r,(function(t){var r={};e.assignSetting(t,r,"ranges",[[0,e.hot.countRows()-1]]),e.assignSetting(t,r,"reversedRowCoords",!1),e.assignSetting(t,r,"destinationRow",new Error("\n        You must provide a destination row for the Column Summary plugin in order to work properly!\n      ")),e.assignSetting(t,r,"destinationColumn",new Error("\n        You must provide a destination column for the Column Summary plugin in order to work properly!\n      ")),e.assignSetting(t,r,"sourceColumn",t.destinationColumn),e.assignSetting(t,r,"type","sum"),e.assignSetting(t,r,"forceNumeric",!1),e.assignSetting(t,r,"suppressDataTypeErrors",!0),e.assignSetting(t,r,"suppressDataTypeErrors",!0),e.assignSetting(t,r,"customFunction",null),e.assignSetting(t,r,"readOnly",!0),e.assignSetting(t,r,"roundFloat",!1),n.push(r)})),n;this.settingsType="function"}},{key:"assignSetting",value:function(t,e,n,r){if("ranges"!==n||void 0!==t[n]){if("ranges"!==n||0!==t[n].length)if(void 0===t[n]){if(r instanceof Error)throw r;e[n]=r}else"destinationRow"===n&&e.reversedRowCoords?e[n]=this.hot.countRows()-t[n]-1:e[n]=t[n]}else e[n]=r}},{key:"resetSetupBeforeStructureAlteration",value:function(t,e,n){if("function"===this.settingsType){var r=t.indexOf("row")>-1?"row":"col",o=this.getAllEndpoints();Object(j.arrayEach)(o,(function(o){"row"===r&&o.destinationRow>=e&&("insert_row"===t?o.alterRowOffset=n:"remove_row"===t&&(o.alterRowOffset=-1*n)),"col"===r&&o.destinationColumn>=e&&("insert_col"===t?o.alterColumnOffset=n:"remove_col"===t&&(o.alterColumnOffset=-1*n))})),this.resetAllEndpoints(o,!1)}}},{key:"resetSetupAfterStructureAlteration",value:function(t,e,n,r,source){var o=this,l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if("function"!==this.settingsType){var c=t.indexOf("row")>-1?"row":"col",f=t.indexOf("remove")>-1?-1:1,h=this.getAllEndpoints(),d=0===t.indexOf("move_row"),y=e;Object(j.arrayEach)(h,(function(t){"row"===c&&t.destinationRow>=y&&(t.alterRowOffset=f*n),"col"===c&&t.destinationColumn>=y&&(t.alterColumnOffset=f*n)})),this.resetAllEndpoints(h,!d),d?Object(j.arrayEach)(h,(function(t){o.extendEndpointRanges(t,y,r[0],r.length),o.recreatePhysicalRanges(t),o.clearOffsetInformation(t)})):Object(j.arrayEach)(h,(function(t){o.shiftEndpointCoordinates(t,y)})),l&&this.refreshAllEndpoints()}else this.hot.addHookOnce("beforeViewRender",(function t(){return o.hot.removeHook("beforeViewRender",t),o.refreshAllEndpoints()}))}},{key:"clearOffsetInformation",value:function(t){t.alterRowOffset=void 0,t.alterColumnOffset=void 0}},{key:"extendEndpointRanges",value:function(t,e,n,r){Object(j.arrayEach)(t.ranges,(function(t){t[1]&&(e>=t[0]&&e<=t[1]?n>t[1]?t[1]+=r:n<t[0]&&(t[0]-=r):n>=t[0]&&n<=t[1]&&(t[1]-=r,e<=t[0]&&(t[0]+=1,t[1]+=1)))}))}},{key:"recreatePhysicalRanges",value:function(t){var e=this,n=t.ranges,r=[],o=[];Object(j.arrayEach)(n,(function(t){var n=[];if(t[1])for(var i=t[0];i<=t[1];i++)n.push(e.hot.toPhysicalRow(i));else n.push(e.hot.toPhysicalRow(t[0]));o.push(n)})),Object(j.arrayEach)(o,(function(t){var e=[];Object(j.arrayEach)(t,(function(n,o){0===o?e.push(n):t[o]!==t[o-1]+1&&(e.push(t[o-1]),r.push(e),(e=[]).push(n)),o===t.length-1&&(e.push(n),r.push(e))}))})),t.ranges=r}},{key:"shiftEndpointCoordinates",value:function(t,e){t.alterRowOffset&&0!==t.alterRowOffset?(t.destinationRow+=t.alterRowOffset||0,Object(j.arrayEach)(t.ranges,(function(element){Object(j.arrayEach)(element,(function(n,r){n>=e&&(element[r]+=t.alterRowOffset||0)}))}))):t.alterColumnOffset&&0!==t.alterColumnOffset&&(t.destinationColumn+=t.alterColumnOffset||0,t.sourceColumn+=t.alterColumnOffset||0)}},{key:"resetAllEndpoints",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAllEndpoints(),n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.some((function(e){var n=e.alterRowOffset||0,r=e.alterColumnOffset||0;return e.destinationRow+n>=t.hot.countRows()||e.destinationColumn+r>=t.hot.countCols()}))||(this.cellsToSetCache=[],Object(j.arrayEach)(e,(function(e){t.resetEndpointValue(e,n)})),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[])}},{key:"refreshAllEndpoints",value:function(){var t=this;this.cellsToSetCache=[],Object(j.arrayEach)(this.getAllEndpoints(),(function(e){t.currentEndpoint=e,t.plugin.calculate(e),t.setEndpointValue(e,"init")})),this.currentEndpoint=null,this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}},{key:"refreshChangedEndpoints",value:function(t){var e=this,n=[];this.cellsToSetCache=[],Object(j.arrayEach)(t,(function(t,r,o){"".concat(t[2]||"")!=="".concat(t[3])&&Object(j.arrayEach)(e.getAllEndpoints(),(function(t,l){e.hot.propToCol(o[r][1])===t.sourceColumn&&-1===n.indexOf(l)&&n.push(l)}))})),Object(j.arrayEach)(n,(function(t){e.refreshEndpoint(e.getEndpoint(t))})),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}},{key:"refreshEndpoint",value:function(t){this.currentEndpoint=t,this.plugin.calculate(t),this.setEndpointValue(t),this.currentEndpoint=null}},{key:"resetEndpointValue",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.alterRowOffset||0,r=t.alterColumnOffset||0;this.cellsToSetCache.push([this.hot.toVisualRow(t.destinationRow+(e?n:0)),this.hot.toVisualColumn(t.destinationColumn+(e?r:0)),""])}},{key:"setEndpointValue",value:function(t,source){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.hot.toVisualRow(t.destinationRow);if(t.destinationRow>=this.hot.countRows()||t.destinationColumn>=this.hot.countCols())this.throwOutOfBoundsWarning();else{var r=this.hot.toVisualRow(t.destinationRow);if(null!==r){var o=this.hot.getCellMeta(r,t.destinationColumn);"init"!==source&&o.readOnly===t.readOnly||(o.readOnly=t.readOnly,o.className="columnSummaryResult")}t.roundFloat&&!isNaN(t.result)&&(t.result=t.result.toFixed(t.roundFloat)),e?this.hot.setDataAtCell(n,t.destinationColumn,t.result,"ColumnSummary.set"):this.cellsToSetCache.push([n,t.destinationColumn,t.result]),t.alterRowOffset=void 0,t.alterColumnOffset=void 0}}},{key:"throwOutOfBoundsWarning",value:function(){Object(kr.b)("One of the Column Summary plugins' destination points you provided is beyond the table boundaries!")}}],n&&ri(e.prototype,n),r&&ri(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),ai=ii,ui=n(687);function si(t){return null==t||isNaN(t)}function ci(t){return ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ci(t)}function fi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==ci(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==ci(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===ci(o)?o:String(o)),n)}var r,o}function hi(){return hi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=yi(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},hi.apply(this,arguments)}function di(t,p){return di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},di(t,p)}function pi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yi(t);if(e){var o=yi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===ci(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function yi(t){return yi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yi(t)}var gi="columnSummary",vi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&di(t,e)}(l,t);var e,n,r,o=pi(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).endpoints=null,e}return e=l,n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[gi]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.settings=this.hot.getSettings()[gi],this.endpoints=new ai(this,this.settings),this.addHook("afterInit",(function(){return t.onAfterInit.apply(t,arguments)})),this.addHook("afterChange",(function(){return t.onAfterChange.apply(t,arguments)})),this.addHook("beforeCreateRow",(function(e,n,source){return t.endpoints.resetSetupBeforeStructureAlteration("insert_row",e,n,null,source)})),this.addHook("beforeCreateCol",(function(e,n,source){return t.endpoints.resetSetupBeforeStructureAlteration("insert_col",e,n,null,source)})),this.addHook("beforeRemoveRow",(function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.endpoints).resetSetupBeforeStructureAlteration.apply(e,["remove_row"].concat(r))})),this.addHook("beforeRemoveCol",(function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.endpoints).resetSetupBeforeStructureAlteration.apply(e,["remove_col"].concat(r))})),this.addHook("afterCreateRow",(function(e,n,source){return t.endpoints.resetSetupAfterStructureAlteration("insert_row",e,n,null,source)})),this.addHook("afterCreateCol",(function(e,n,source){return t.endpoints.resetSetupAfterStructureAlteration("insert_col",e,n,null,source)})),this.addHook("afterRemoveRow",(function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.endpoints).resetSetupAfterStructureAlteration.apply(e,["remove_row"].concat(r))})),this.addHook("afterRemoveCol",(function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.endpoints).resetSetupAfterStructureAlteration.apply(e,["remove_col"].concat(r))})),this.addHook("afterRowMove",(function(){return t.onAfterRowMove.apply(t,arguments)})),hi(yi(l.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.endpoints=null,this.settings=null,this.currentEndpoint=null}},{key:"calculate",value:function(t){switch(t.type.toLowerCase()){case"sum":t.result=this.calculateSum(t);break;case"min":case"max":t.result=this.calculateMinMax(t,t.type);break;case"count":t.result=this.countEntries(t);break;case"average":t.result=this.calculateAverage(t);break;case"custom":t.result=t.customFunction.call(this,t)}}},{key:"calculateSum",value:function(t){var e=this,n=0;return Object(h.objectEach)(t.ranges,(function(r){n+=e.getPartialSum(r,t.sourceColumn)})),n}},{key:"getPartialSum",value:function(t,col){var e=0,i=t[1]||t[0],n=null,r=0;do{if(null!==(n=si(n=this.getCellValue(i,col))?null:n)){var o=("".concat(n).split(".")[1]||[]).length||1;o>r&&(r=o)}e+=n||0,i-=1}while(i>=t[0]);return Math.round(e*Math.pow(10,r))/Math.pow(10,r)}},{key:"calculateMinMax",value:function(t,e){var n=this,r=null;return Object(h.objectEach)(t.ranges,(function(o){var l=n.getPartialMinMax(o,t.sourceColumn,e);if(null===r&&null!==l&&(r=l),null!==l)switch(e){case"min":r=Math.min(r,l);break;case"max":r=Math.max(r,l)}})),null===r?"Not enough data":r}},{key:"getPartialMinMax",value:function(t,col,e){var n,r=null,i=t[1]||t[0];do{if(n=si(n=this.getCellValue(i,col))?null:n,null===r)r=n;else if(null!==n)switch(e){case"min":r=Math.min(r,n);break;case"max":r=Math.max(r,n)}i-=1}while(i>=t[0]);return r}},{key:"countEmpty",value:function(t,col){var e,n=0,i=t[1]||t[0];do{null===(e=si(e=this.getCellValue(i,col))?null:e)&&(n+=1),i-=1}while(i>=t[0]);return n}},{key:"countEntries",value:function(t){var e=this,n=0,r=t.ranges;return Object(h.objectEach)(r,(function(r){var o=void 0===r[1]?1:r[1]-r[0]+1,l=e.countEmpty(r,t.sourceColumn);n+=o,n-=l})),n}},{key:"calculateAverage",value:function(t){return this.calculateSum(t)/this.countEntries(t)}},{key:"getCellValue",value:function(t,col){var e,n,r=this.hot.toVisualRow(t),o=this.hot.toVisualColumn(col),l=this.hot.getSourceDataAtCell(t,col),c="";if(null!==r&&null!==o&&(c=this.hot.getCellMeta(r,o).className||""),c.indexOf("columnSummaryResult")>-1)return null;if(this.endpoints.currentEndpoint.forceNumeric&&("string"==typeof l&&(l=l.replace(/,/,".")),l=parseFloat(l)),isNaN(l)&&!this.endpoints.currentEndpoint.suppressDataTypeErrors)throw new Error(Object(ui.a)(oi||(e=["ColumnSummary plugin: cell at (",", ",") is not in a \n          numeric format. Cannot do the calculation."],(n=["ColumnSummary plugin: cell at (",", ",") is not in a\\x20\n          numeric format. Cannot do the calculation."])||(n=e.slice(0)),oi=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))),t,col));return l}},{key:"onAfterInit",value:function(){this.endpoints.endpoints=this.endpoints.parseSettings(),this.endpoints.refreshAllEndpoints(!0)}},{key:"onAfterChange",value:function(t,source){t&&"ColumnSummary.reset"!==source&&"ColumnSummary.set"!==source&&"loadData"!==source&&this.endpoints.refreshChangedEndpoints(t)}},{key:"onAfterRowMove",value:function(t,e){this.endpoints.resetSetupBeforeStructureAlteration("move_row",t[0],t.length,t,this.pluginName),this.endpoints.resetSetupAfterStructureAlteration("move_row",e,t.length,t,this.pluginName)}}],r=[{key:"PLUGIN_KEY",get:function(){return gi}},{key:"PLUGIN_PRIORITY",get:function(){return 220}}],n&&fi(e.prototype,n),r&&fi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function bi(t){return bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bi(t)}function mi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==bi(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==bi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===bi(o)?o:String(o)),n)}var r,o}var wi=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rootDocument=e,this.isRtl=n,this.container=null,this.editor=this.createEditor(),this.editorStyle=this.editor.style,this.hidden=!0,this.hide()}var e,n,r;return e=t,n=[{key:"setPosition",value:function(t,e){this.editorStyle.left="".concat(t,"px"),this.editorStyle.top="".concat(e,"px")}},{key:"setSize",value:function(t,e){if(t&&e){var input=this.getInputElement();input.style.width="".concat(t,"px"),input.style.height="".concat(e,"px")}}},{key:"getSize",value:function(){return{width:Object(c.outerWidth)(this.getInputElement()),height:Object(c.outerHeight)(this.getInputElement())}}},{key:"resetSize",value:function(){var input=this.getInputElement();input.style.width="",input.style.height=""}},{key:"setReadOnlyState",value:function(t){this.getInputElement().readOnly=t}},{key:"show",value:function(){this.editorStyle.display="block",this.hidden=!1}},{key:"hide",value:function(){this.hidden||(this.editorStyle.display="none"),this.hidden=!0}},{key:"isVisible",value:function(){return"block"===this.editorStyle.display}},{key:"setValue",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")||"";this.getInputElement().value=t}},{key:"getValue",value:function(){return this.getInputElement().value}},{key:"isFocused",value:function(){return this.rootDocument.activeElement===this.getInputElement()}},{key:"focus",value:function(){this.getInputElement().focus()}},{key:"createEditor",value:function(){var e=this.rootDocument.createElement("div"),n=this.rootDocument.createElement("textarea");return e.style.display="none",this.container=this.rootDocument.createElement("div"),this.container.setAttribute("dir",this.isRtl?"rtl":"ltr"),Object(c.addClass)(this.container,t.CLASS_EDITOR_CONTAINER),this.rootDocument.body.appendChild(this.container),Object(c.addClass)(e,t.CLASS_EDITOR),Object(c.addClass)(n,t.CLASS_INPUT),e.appendChild(n),this.container.appendChild(e),e}},{key:"getInputElement",value:function(){return this.editor.querySelector(".".concat(t.CLASS_INPUT))}},{key:"destroy",value:function(){var t=this.container?this.container.parentNode:null;this.editor.parentNode.removeChild(this.editor),this.editor=null,this.editorStyle=null,t&&t.removeChild(this.container)}}],r=[{key:"CLASS_EDITOR_CONTAINER",get:function(){return"htCommentsContainer"}},{key:"CLASS_EDITOR",get:function(){return"htComments"}},{key:"CLASS_INPUT",get:function(){return"htCommentTextArea"}},{key:"CLASS_CELL",get:function(){return"htCommentCell"}}],n&&mi(e.prototype,n),r&&mi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Oi=wi,Ci=(n(762),"---------");function Si(t){return Object(c.hasClass)(t,"htSeparator")}function ki(t){return Object(c.hasClass)(t,"htDisabled")}function ji(t){return Object(c.hasClass)(t,"htSelectionDisabled")}function Ri(t){var e=t.getSelected();return e?e[0]<0?null:e:null}function Ei(t,e){var n={};return Object(j.arrayEach)(t,(function(t){t.forAll((function(t,col){t>=0&&col>=0&&(n[t]||(n[t]=[]),n[t][col]=e(t,col))}))})),n}function Pi(t,e,n,r,o){Object(j.arrayEach)(t,(function(t){t.forAll((function(t,col){t>=0&&col>=0&&function(t,col,e,n,r,o){var l=r(t,col),c=n;l.className&&(c="vertical"===e?function(t,e){if(-1!==t.indexOf(e))return t;var n=t.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ","");return"".concat(n," ").concat(e)}(l.className,n):function(t,e){if(-1!==t.indexOf(e))return t;var n=t.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ","");return"".concat(n," ").concat(e)}(l.className,n));o(t,col,"className",c)}(t,col,e,n,r,o)}))}))}function Mi(t,e){var n=!1;return Array.isArray(t)&&Object(j.arrayEach)(t,(function(t){return t.forAll((function(t,col){if(t>=0&&col>=0&&e(t,col))return n=!0,!1})),n})),n}function _i(label){return'<span class="selected">'.concat(String.fromCharCode(10003),"</span>").concat(label)}function Ti(t,e){for(var n=t.slice(0);0<n.length&&n[0].name===e;)n.shift();return n}function Ai(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ci,n=t.slice(0);return n=function(t,e){var n=t.slice(0);return n.reverse(),(n=Ti(n,e)).reverse(),n}(n=Ti(n,e),e),n=function(t){var e=[];return Object(j.arrayEach)(t,(function(t,n){n>0?e[e.length-1].name!==t.name&&e.push(t):e.push(t)})),e}(n),n}var Ii=n(712);function xi(t){return xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xi(t)}function Di(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==xi(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==xi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===xi(o)?o:String(o)),n)}var r,o}var Ni=250,Hi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.wasLastActionShow=!0,this.showDebounced=null,this.hidingTimer=null,this.updateDelay(e)}var e,n,r;return e=t,n=[{key:"hide",value:function(){var t=this;this.wasLastActionShow=!1,this.hidingTimer=setTimeout((function(){!1===t.wasLastActionShow&&t.runLocalHooks("hide")}),250)}},{key:"show",value:function(t){this.wasLastActionShow=!0,this.showDebounced(t)}},{key:"cancelHiding",value:function(){this.wasLastActionShow=!0,clearTimeout(this.hidingTimer),this.hidingTimer=null}},{key:"updateDelay",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ni;this.showDebounced=Object(Gr.debounce)((function(e){t.wasLastActionShow&&t.runLocalHooks("show",e.from.row,e.from.col)}),e)}},{key:"destroy",value:function(){this.clearLocalHooks()}}],n&&Di(e.prototype,n),r&&Di(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object(h.mixin)(Hi,Ii.a);var Li=Hi,Bi=n(665);function Ui(t){return Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ui(t)}function Fi(t,e,n){return(e=Wi(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vi(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wi(n.key),n)}}function Wi(t){var e=function(input,t){if("object"!==Ui(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Ui(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Ui(e)?e:String(e)}function zi(){return zi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Xi(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},zi.apply(this,arguments)}function Yi(t,p){return Yi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Yi(t,p)}function Gi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Xi(t);if(e){var o=Xi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Ui(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ki(t)}(this,n)}}function Ki(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xi(t){return Xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xi(t)}var $i="comments",qi=new WeakMap,Zi="comment",Ji="value",Qi="style",ta="readOnly",ea=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yi(t,e)}(l,t);var e,n,r,o=Gi(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).editor=null,e.displaySwitch=null,e.eventManager=null,e.range={},e.preventEditorAutoSwitch=!1,qi.set(Ki(e),{tempEditorDimensions:{},cellBelowCursor:null}),e}return e=l,n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[$i]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.editor||(this.editor=new Oi(this.hot.rootDocument,this.hot.isRtl())),this.eventManager||(this.eventManager=new $.a(this)),this.displaySwitch||(this.displaySwitch=new Li(this.getDisplayDelaySetting())),this.addHook("afterContextMenuDefaultOptions",(function(e){return t.addToContextMenu(e)})),this.addHook("afterRenderer",(function(e,n,col,r,o,l){return t.onAfterRenderer(e,l)})),this.addHook("afterScrollHorizontally",(function(){return t.hide()})),this.addHook("afterScrollVertically",(function(){return t.hide()})),this.addHook("afterBeginEditing",(function(){return t.hide()})),this.displaySwitch.addLocalHook("hide",(function(){return t.hide()})),this.displaySwitch.addLocalHook("show",(function(e,col){return t.showAtCell(e,col)})),this.registerListeners(),zi(Xi(l.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),zi(Xi(l.prototype),"updatePlugin",this).call(this),this.displaySwitch.updateDelay(this.getDisplayDelaySetting())}},{key:"disablePlugin",value:function(){zi(Xi(l.prototype),"disablePlugin",this).call(this)}},{key:"registerListeners",value:function(){var t=this,e=this.hot.rootDocument;this.eventManager.addEventListener(e,"mouseover",(function(e){return t.onMouseOver(e)})),this.eventManager.addEventListener(e,"mousedown",(function(e){return t.onMouseDown(e)})),this.eventManager.addEventListener(e,"mouseup",(function(){return t.onMouseUp()})),this.eventManager.addEventListener(this.editor.getInputElement(),"blur",(function(){return t.onEditorBlur()})),this.eventManager.addEventListener(this.editor.getInputElement(),"mousedown",(function(e){return t.onEditorMouseDown(e)})),this.eventManager.addEventListener(this.editor.getInputElement(),"mouseup",(function(e){return t.onEditorMouseUp(e)}))}},{key:"setRange",value:function(t){this.range=t}},{key:"clearRange",value:function(){this.range={}}},{key:"targetIsCellWithComment",value:function(t){var e=Object(c.closest)(t.target,"TD","TBODY");return!!(e&&Object(c.hasClass)(e,"htCommentCell")&&Object(c.closest)(e,[this.hot.rootElement]))}},{key:"targetIsCommentTextArea",value:function(t){return this.editor.getInputElement()===t.target}},{key:"setComment",value:function(t){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var e=this.editor.getValue(),n="";null!=t?n=t:null!=e&&(n=e);var r=this.range.from.row,col=this.range.from.col;this.updateCommentMeta(r,col,Fi({},Ji,n)),this.hot.render()}},{key:"setCommentAtCell",value:function(t,e,n){this.setRange({from:this.hot._createCellCoords(t,e)}),this.setComment(n)}},{key:"removeComment",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');this.hot.setCellMeta(this.range.from.row,this.range.from.col,Zi),t&&this.hot.render(),this.hide()}},{key:"removeCommentAtCell",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.setRange({from:this.hot._createCellCoords(t,e)}),this.removeComment(n)}},{key:"getComment",value:function(){var t=this.range.from.row,e=this.range.from.col;return this.getCommentMeta(t,e,Ji)}},{key:"getCommentAtCell",value:function(t,e){return this.getCommentMeta(t,e,Ji)}},{key:"show",value:function(){if(!this.range.from)throw new Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var t=this.range.from,e=t.row,col=t.col;if(e<0||e>this.hot.countSourceRows()-1||col<0||col>this.hot.countSourceCols()-1)return!1;var meta=this.hot.getCellMeta(this.range.from.row,this.range.from.col);return this.editor.setValue(meta[Zi]?meta[Zi][Ji]:""),this.editor.show(),this.refreshEditor(!0),!0}},{key:"showAtCell",value:function(t,e){return this.setRange({from:this.hot._createCellCoords(t,e)}),this.show()}},{key:"hide",value:function(){this.editor.hide()}},{key:"refreshEditor",value:function(){var t,e;if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.range.from&&this.editor.isVisible()){var n=this.hot,r=n.rowIndexMapper,o=n.columnIndexMapper,l=this.range.from,f=l.row,h=l.col,d=r.getRenderableFromVisualIndex(f),y=o.getRenderableFromVisualIndex(h),v=null===d;this.editor.setPosition(0,0),null===d&&(d=r.getRenderableFromVisualIndex(r.getNearestNotHiddenIndex(f,-1))),null===y&&(y=o.getRenderableFromVisualIndex(o.getNearestNotHiddenIndex(h,-1)));var m=null===d,w=null===y;d=null!==(t=d)&&void 0!==t?t:0,y=null!==(e=y)&&void 0!==e?e:0;var O=this.hot,C=O.rootWindow,S=O.view._wt,k=S.wtTable,j=S.getCell({row:d,col:y},!0),R=this.getCommentMeta(f,h,Qi);R?this.editor.setSize(R.width,R.height):this.editor.resetSize();var E=w?0:k.getStretchedColumnWidth(y),P=v&&!m?Object(c.outerHeight)(j):0,M=j.getBoundingClientRect(),_=M.left,T=M.top,A=M.width,I=M.height,x=this.editor.getSize(),D=x.width,N=x.height,H=this.hot.rootWindow,L=H.innerWidth,B=H.innerHeight,U=this.hot.rootDocument.documentElement,F=_+C.scrollX+E,V=T+C.scrollY+P;this.hot.isRtl()&&(F-=D+E),this.hot.isLtr()&&_+A+D>L?F=_+C.scrollX-D-1:this.hot.isRtl()&&F<-(U.scrollWidth-U.clientWidth)&&(F=_+C.scrollX+E+1),T+N>B&&(V-=N-I+1),this.editor.setPosition(F,V),this.editor.setReadOnlyState(this.getCommentMeta(f,h,ta))}}},{key:"checkSelectionCommentsConsistency",value:function(){var t=this.hot.getSelectedRangeLast();if(!t)return!1;var e=!1,n=t.getTopStartCorner();return this.getCommentMeta(n.row,n.col,Ji)&&(e=!0),e}},{key:"updateCommentMeta",value:function(t,e,n){var r,o=this.hot.getCellMeta(t,e)[Zi];o?(r=Object(h.deepClone)(o),Object(h.deepExtend)(r,n)):r=n,this.hot.setCellMeta(t,e,Zi,r)}},{key:"getCommentMeta",value:function(t,e,n){var r=this.hot.getCellMeta(t,e);if(r[Zi])return r[Zi][n]}},{key:"onMouseDown",value:function(t){if(this.hot.view&&this.hot.view._wt&&!this.preventEditorAutoSwitch&&!this.targetIsCommentTextArea(t)){var e=Object(c.closest)(t.target,"TD","TBODY"),n=null;e&&(n=this.hot.getCoords(e)),(!e||this.range.from&&n&&(this.range.from.row!==n.row||this.range.from.col!==n.col))&&this.hide()}}},{key:"onMouseOver",value:function(t){var e=qi.get(this),n=this.hot.rootDocument;if(!(this.preventEditorAutoSwitch||this.editor.isFocused()||Object(c.hasClass)(t.target,"wtBorder")||e.cellBelowCursor===t.target)&&this.editor)if(e.cellBelowCursor=n.elementFromPoint(t.clientX,t.clientY),this.targetIsCellWithComment(t)){var r=this.hot._createCellRange(this.hot.getCoords(t.target));this.displaySwitch.show(r)}else Object(c.isChildOf)(t.target,n)&&!this.targetIsCommentTextArea(t)&&this.displaySwitch.hide()}},{key:"onMouseUp",value:function(){this.preventEditorAutoSwitch=!1}},{key:"onAfterRenderer",value:function(t,e){e[Zi]&&e[Zi][Ji]&&Object(c.addClass)(t,e.commentedCellClassName)}},{key:"onEditorBlur",value:function(){this.setComment()}},{key:"onEditorMouseDown",value:function(t){qi.get(this).tempEditorDimensions={width:Object(c.outerWidth)(t.target),height:Object(c.outerHeight)(t.target)}}},{key:"onEditorMouseUp",value:function(t){var e=qi.get(this),n=Object(c.outerWidth)(t.target),r=Object(c.outerHeight)(t.target);n===e.tempEditorDimensions.width+1&&r===e.tempEditorDimensions.height+2||this.updateCommentMeta(this.range.from.row,this.range.from.col,Fi({},Qi,{width:n,height:r}))}},{key:"onContextMenuAddComment",value:function(){var t=this.hot.getSelectedRangeLast();this.preventEditorAutoSwitch=!0,this.displaySwitch.cancelHiding(),this.setRange({from:t.highlight}),this.show(),this.hot.deselectCell(),this.editor.focus()}},{key:"onContextMenuRemoveComment",value:function(){var t=this,e=this.hot.getSelectedRangeLast();this.preventEditorAutoSwitch=!0,e.forAll((function(e,n){e>=0&&n>=0&&t.removeCommentAtCell(e,n,!1)})),this.hot.render()}},{key:"onContextMenuMakeReadOnly",value:function(){var t=this,e=this.hot.getSelectedRangeLast();this.preventEditorAutoSwitch=!0,e.forAll((function(e,n){if(e>=0&&n>=0){var r=!!t.getCommentMeta(e,n,ta);t.updateCommentMeta(e,n,Fi({},ta,!r))}}))}},{key:"addToContextMenu",value:function(t){var e=this,n=function(){return e.hot.rowIndexMapper.getRenderableIndexesLength()>0&&e.hot.columnIndexMapper.getRenderableIndexesLength()>0};t.items.push({name:"---------"},{key:"commentsAddEdit",name:function(){return e.checkSelectionCommentsConsistency()?e.hot.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_EDIT_COMMENT):e.hot.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_ADD_COMMENT)},callback:function(){return e.onContextMenuAddComment()},disabled:function(){return!n()||!(e.hot.getSelectedLast()&&!e.hot.selection.isSelectedByCorner())}},{key:"commentsRemove",name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_REMOVE_COMMENT)},callback:function(){return e.onContextMenuRemoveComment()},disabled:function(){return!n()||!(e.hot.getSelectedLast()&&!e.hot.selection.isSelectedByCorner())}},{key:"commentsReadOnly",name:function(){var t=this,label=this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_READ_ONLY_COMMENT);return Mi(this.getSelectedRangeLast(),(function(e,col){var n=t.getCellMeta(e,col)[Zi];if(n&&(n=n[ta]),n)return!0}))&&(label=_i(label)),label},callback:function(){return e.onContextMenuMakeReadOnly()},disabled:function(){return!n()||!(e.hot.getSelectedLast()&&!e.hot.selection.isSelectedByCorner()&&e.checkSelectionCommentsConsistency())}})}},{key:"getDisplayDelaySetting",value:function(){var t=this.hot.getSettings()[$i];if(Object(h.isObject)(t))return t.displayDelay}},{key:"destroy",value:function(){this.editor&&this.editor.destroy(),this.displaySwitch&&this.displaySwitch.destroy(),zi(Xi(l.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return $i}},{key:"PLUGIN_PRIORITY",get:function(){return 60}}],n&&Vi(e.prototype,n),r&&Vi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function na(t){return na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},na(t)}function ra(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==na(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==na(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===na(o)?o:String(o)),n)}var r,o}var oa=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hot=e,this.commands={},this.commonCallback=null}var e,n,r;return e=t,n=[{key:"registerCommand",value:function(t,e){this.commands[t]=e}},{key:"setCommonCallback",value:function(t){this.commonCallback=t}},{key:"execute",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var l=t.split(":"),c=l[0],f=2===l.length?l[1]:null,d=this.commands[c];if(!d)throw new Error("Menu command '".concat(c,"' not exists."));if(f&&d.submenu&&(d=function(t,e){var n;return Object(j.arrayEach)(e,(function(e){var r=e.key?e.key.split(":"):null;if(Array.isArray(r)&&r[1]===t)return n=e,!1})),n}(f,d.submenu.items)),!0!==d.disabled&&("function"!=typeof d.disabled||!0!==d.disabled.call(this.hot))&&!Object(h.hasOwnProperty)(d,"submenu")){var y=[];"function"==typeof d.callback&&y.push(d.callback),"function"==typeof this.commonCallback&&y.push(this.commonCallback),r.unshift(l.join(":")),Object(j.arrayEach)(y,(function(t){return t.apply(e.hot,r)}))}}}],n&&ra(e.prototype,n),r&&ra(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var ia=oa,aa="alignment";var la="clear_column";var ua="col_left";var sa="col_right";var ca="make_read_only";var fa="redo";var ha=n(810);function da(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return pa(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pa(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pa(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var ya="remove_col";function ga(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return va(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return va(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function va(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var ba="remove_row";var ma="row_above";var wa="row_below";var Oa="no_items";var Ca,Sa="undo";function ka(t){return ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ka(t)}function ja(t,e,n){return(e=function(t){var e=function(input,t){if("object"!==ka(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==ka(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===ka(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ra=[ma,wa,ua,sa,la,ba,ya,Sa,fa,ca,aa,Ci,Oa],Ea=(ja(Ca={},Ci,(function(){return{name:Ci}})),ja(Ca,Oa,(function(){return{key:Oa,name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_NO_ITEMS)},disabled:!0,isCommand:!1}})),ja(Ca,ma,(function(){return{key:ma,name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_ROW_ABOVE)},callback:function(){var t=this.getSelectedRangeLast().getTopLeftCorner();this.alter("insert_row_above",t.row,1,"ContextMenu.rowAbove")},disabled:function(){return!Ri(this)||(this.selection.isSelectedByCorner()?0===this.countRows():this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows)},hidden:function(){return!this.getSettings().allowInsertRow}}})),ja(Ca,wa,(function(){return{key:wa,name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_ROW_BELOW)},callback:function(){var t=this.getSelectedRangeLast().getBottomRightCorner();this.alter("insert_row_below",t.row,1,"ContextMenu.rowBelow")},disabled:function(){return!Ri(this)||!this.selection.isSelectedByCorner()&&(this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows)},hidden:function(){return!this.getSettings().allowInsertRow}}})),ja(Ca,ua,(function(){return{key:ua,name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_INSERT_LEFT)},callback:function(){var t=this.getSelectedRangeLast().getTopLeftCorner(),e=this.isRtl()?"insert_col_end":"insert_col_start";this.alter(e,t.col,1,"ContextMenu.columnLeft")},disabled:function(){return!this.isColumnModificationAllowed()||(!Ri(this)||(this.selection.isSelectedByCorner()?0===this.countCols():this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols))},hidden:function(){return!this.getSettings().allowInsertColumn}}})),ja(Ca,sa,(function(){return{key:sa,name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_INSERT_RIGHT)},callback:function(){var t=this.getSelectedRangeLast().getTopRightCorner(),e=this.isRtl()?"insert_col_start":"insert_col_end";this.alter(e,t.col,1,"ContextMenu.columnRight")},disabled:function(){return!this.isColumnModificationAllowed()||(!Ri(this)||!this.selection.isSelectedByCorner()&&(this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols))},hidden:function(){return!this.getSettings().allowInsertColumn}}})),ja(Ca,la,(function(){return{key:la,name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_CLEAR_COLUMN)},callback:function(t,e){var n=e[0].start.col,r=e[0].end.col;this.countRows()&&this.populateFromArray(0,n,[[null]],Math.max(e[0].start.row,e[0].end.row),r,"ContextMenu.clearColumn")},disabled:function(){return!Ri(this)||!this.selection.isSelectedByColumnHeader()}}})),ja(Ca,ba,(function(){return{key:ba,name:function(){var t=this.getSelected(),e=0;if(t)if(t.length>1)e=1;else{var n=ga(t[0],3);n[0]-n[2]!=0&&(e=1)}return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_REMOVE_ROW,e)},callback:function(){this.alter("remove_row",Object(ha.g)(this.getSelected()),1,"ContextMenu.removeRow")},disabled:function(){if(!Ri(this))return!0;var t=this.countRows();return this.selection.isSelectedByCorner()?0===t:this.selection.isSelectedByColumnHeader()||0===t},hidden:function(){return!this.getSettings().allowRemoveRow}}})),ja(Ca,ya,(function(){return{key:ya,name:function(){var t=this.getSelected(),e=0;if(t)if(t.length>1)e=1;else{var n=da(t[0],4);n[1]-n[3]!=0&&(e=1)}return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_REMOVE_COLUMN,e)},callback:function(){this.alter("remove_col",Object(ha.f)(this.getSelected()),null,"ContextMenu.removeColumn")},disabled:function(){if(!this.isColumnModificationAllowed())return!0;if(!Ri(this))return!0;var t=this.countCols();return this.selection.isSelectedByCorner()?0===t:this.selection.isSelectedByRowHeader()||0===t},hidden:function(){return!this.getSettings().allowRemoveColumn}}})),ja(Ca,Sa,(function(){return{key:Sa,name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_UNDO)},callback:function(){this.undo()},hidden:function(){var t=this.getPlugin("undoRedo");return!t||!t.isEnabled()},disabled:function(){return!this.getPlugin("undoRedo").isUndoAvailable()}}})),ja(Ca,fa,(function(){return{key:fa,name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_REDO)},callback:function(){this.redo()},hidden:function(){var t=this.getPlugin("undoRedo");return!t||!t.isEnabled()},disabled:function(){return!this.getPlugin("undoRedo").isRedoAvailable()}}})),ja(Ca,ca,(function(){return{key:ca,name:function(){var t=this,label=this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_READ_ONLY);return Mi(this.getSelectedRange(),(function(e,col){return t.getCellMeta(e,col).readOnly}))&&(label=_i(label)),label},callback:function(){var t=this,e=this.getSelectedRange(),n=Mi(e,(function(e,col){return t.getCellMeta(e,col).readOnly}));Object(j.arrayEach)(e,(function(e){e.forAll((function(e,col){e>=0&&col>=0&&t.setCellMeta(e,col,"readOnly",!n)}))})),this.render()},disabled:function(){return!!this.selection.isSelectedByCorner()||(0===this.countRows()||0===this.countCols()||(!this.getSelectedRange()||0===this.getSelectedRange().length))}}})),ja(Ca,aa,(function(){return{key:aa,name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_ALIGNMENT)},disabled:function(){return 0===this.countRows()||0===this.countCols()||!(this.getSelectedRange()&&!this.selection.isSelectedByCorner())},submenu:{items:[{key:"".concat(aa,":left"),name:function(){var t=this,label=this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_ALIGNMENT_LEFT);return Mi(this.getSelectedRange(),(function(e,col){var n=t.getCellMeta(e,col).className;if(n&&-1!==n.indexOf("htLeft"))return!0}))&&(label=_i(label)),label},callback:function(){var t=this,e=this.getSelectedRange(),n=Ei(e,(function(e,col){return t.getCellMeta(e,col).className})),r="horizontal",o="htLeft";this.runHooks("beforeCellAlignment",n,e,r,o),Pi(e,r,o,(function(e,col){return t.getCellMeta(e,col)}),(function(e,col,n,r){return t.setCellMeta(e,col,n,r)})),this.render()},disabled:!1},{key:"".concat(aa,":center"),name:function(){var t=this,label=this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_ALIGNMENT_CENTER);return Mi(this.getSelectedRange(),(function(e,col){var n=t.getCellMeta(e,col).className;if(n&&-1!==n.indexOf("htCenter"))return!0}))&&(label=_i(label)),label},callback:function(){var t=this,e=this.getSelectedRange(),n=Ei(e,(function(e,col){return t.getCellMeta(e,col).className})),r="horizontal",o="htCenter";this.runHooks("beforeCellAlignment",n,e,r,o),Pi(e,r,o,(function(e,col){return t.getCellMeta(e,col)}),(function(e,col,n,r){return t.setCellMeta(e,col,n,r)})),this.render()},disabled:!1},{key:"".concat(aa,":right"),name:function(){var t=this,label=this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_ALIGNMENT_RIGHT);return Mi(this.getSelectedRange(),(function(e,col){var n=t.getCellMeta(e,col).className;if(n&&-1!==n.indexOf("htRight"))return!0}))&&(label=_i(label)),label},callback:function(){var t=this,e=this.getSelectedRange(),n=Ei(e,(function(e,col){return t.getCellMeta(e,col).className})),r="horizontal",o="htRight";this.runHooks("beforeCellAlignment",n,e,r,o),Pi(e,r,o,(function(e,col){return t.getCellMeta(e,col)}),(function(e,col,n,r){return t.setCellMeta(e,col,n,r)})),this.render()},disabled:!1},{key:"".concat(aa,":justify"),name:function(){var t=this,label=this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_ALIGNMENT_JUSTIFY);return Mi(this.getSelectedRange(),(function(e,col){var n=t.getCellMeta(e,col).className;if(n&&-1!==n.indexOf("htJustify"))return!0}))&&(label=_i(label)),label},callback:function(){var t=this,e=this.getSelectedRange(),n=Ei(e,(function(e,col){return t.getCellMeta(e,col).className})),r="horizontal",o="htJustify";this.runHooks("beforeCellAlignment",n,e,r,o),Pi(e,r,o,(function(e,col){return t.getCellMeta(e,col)}),(function(e,col,n,r){return t.setCellMeta(e,col,n,r)})),this.render()},disabled:!1},{name:Ci},{key:"".concat(aa,":top"),name:function(){var t=this,label=this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_ALIGNMENT_TOP);return Mi(this.getSelectedRange(),(function(e,col){var n=t.getCellMeta(e,col).className;if(n&&-1!==n.indexOf("htTop"))return!0}))&&(label=_i(label)),label},callback:function(){var t=this,e=this.getSelectedRange(),n=Ei(e,(function(e,col){return t.getCellMeta(e,col).className})),r="vertical",o="htTop";this.runHooks("beforeCellAlignment",n,e,r,o),Pi(e,r,o,(function(e,col){return t.getCellMeta(e,col)}),(function(e,col,n,r){return t.setCellMeta(e,col,n,r)})),this.render()},disabled:!1},{key:"".concat(aa,":middle"),name:function(){var t=this,label=this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_ALIGNMENT_MIDDLE);return Mi(this.getSelectedRange(),(function(e,col){var n=t.getCellMeta(e,col).className;if(n&&-1!==n.indexOf("htMiddle"))return!0}))&&(label=_i(label)),label},callback:function(){var t=this,e=this.getSelectedRange(),n=Ei(e,(function(e,col){return t.getCellMeta(e,col).className})),r="vertical",o="htMiddle";this.runHooks("beforeCellAlignment",n,e,r,o),Pi(e,r,o,(function(e,col){return t.getCellMeta(e,col)}),(function(e,col,n,r){return t.setCellMeta(e,col,n,r)})),this.render()},disabled:!1},{key:"".concat(aa,":bottom"),name:function(){var t=this,label=this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_ALIGNMENT_BOTTOM);return Mi(this.getSelectedRange(),(function(e,col){var n=t.getCellMeta(e,col).className;if(n&&-1!==n.indexOf("htBottom"))return!0}))&&(label=_i(label)),label},callback:function(){var t=this,e=this.getSelectedRange(),n=Ei(e,(function(e,col){return t.getCellMeta(e,col).className})),r="vertical",o="htBottom";this.runHooks("beforeCellAlignment",n,e,r,o),Pi(e,r,o,(function(e,col){return t.getCellMeta(e,col)}),(function(e,col,n,r){return t.setCellMeta(e,col,n,r)})),this.render()},disabled:!1}]}}})),Ca);function Pa(){var t={};return Object(h.objectEach)(Ea,(function(e,n){t[n]=e()})),t}function Ma(t){return Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ma(t)}function _a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==Ma(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Ma(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===Ma(o)?o:String(o)),n)}var r,o}var Ta=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hot=e,this.predefinedItems=Pa(),this.defaultOrderPattern=n}var e,n,r;return e=t,n=[{key:"setPredefinedItems",value:function(t){var e=this,n={};this.defaultOrderPattern.length=0,Object(h.objectEach)(t,(function(t,r){var o="";t.name===Ci?(n[Ci]=t,o=Ci):isNaN(parseInt(r,10))?(t.key=void 0===t.key?r:t.key,n[r]=t,o=t.key):(n[t.key]=t,o=t.key),e.defaultOrderPattern.push(o)})),this.predefinedItems=n}},{key:"getItems",value:function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],pattern=t;return pattern&&pattern.items?pattern=pattern.items:Array.isArray(pattern)||(pattern=e),Object(h.isObject)(pattern)?Object(h.objectEach)(pattern,(function(t,e){var o=n["string"==typeof t?t:e];o||(o=t),Object(h.isObject)(t)?Object(h.extend)(o,t):"string"==typeof o&&(o={name:o}),void 0===o.key&&(o.key=e),r.push(o)})):Object(j.arrayEach)(pattern,(function(t,e){var o=n[t];!o&&Ra.indexOf(t)>=0||(o||(o={name:t,key:"".concat(e)}),Object(h.isObject)(t)&&Object(h.extend)(o,t),void 0===o.key&&(o.key=e),r.push(o))})),r}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,this.defaultOrderPattern,this.predefinedItems)}}],n&&_a(e.prototype,n),r&&_a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var Aa=Ta;n(245);function Ia(t){return Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ia(t)}function xa(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==Ia(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Ia(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===Ia(o)?o:String(o)),n)}var r,o}var Da=function(){function t(object,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n,r,o,l,f,h,d=Object(c.getWindowScrollTop)(e),y=Object(c.getWindowScrollLeft)(e);this.rootWindow=e,this.type=this.getSourceType(object),"literal"===this.type?(n=parseInt(object.top,10),o=parseInt(object.left,10),f=object.height||0,h=object.width||0,r=n,l=o,n+=d,o+=y):"event"===this.type&&(n=parseInt(object.pageY,10),o=parseInt(object.pageX,10),f=object.target.clientHeight,h=object.target.clientWidth,r=n-d,l=o-y),this.top=n,this.topRelative=r,this.left=o,this.leftRelative=l,this.scrollTop=d,this.scrollLeft=y,this.cellHeight=f,this.cellWidth=h}var e,n,r;return e=t,n=[{key:"getSourceType",value:function(object){var t="literal";return object instanceof Event&&(t="event"),t}},{key:"fitsAbove",value:function(element){return this.topRelative>=element.offsetHeight}},{key:"fitsBelow",value:function(element){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rootWindow.innerHeight;return this.topRelative+element.offsetHeight<=t}},{key:"fitsOnRight",value:function(element){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rootWindow.innerWidth;return this.leftRelative+this.cellWidth+element.offsetWidth<=t}},{key:"fitsOnLeft",value:function(element){return this.leftRelative>=element.offsetWidth}}],n&&xa(e.prototype,n),r&&xa(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Na=Da,Ha=n(852),La=n(719);function Ba(t){return Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ba(t)}function Ua(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Fa(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Ua(Object(source),!0).forEach((function(e){Va(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Ua(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function Va(t,e,n){return(e=za(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wa(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,za(n.key),n)}}function za(t){var e=function(input,t){if("object"!==Ba(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Ba(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Ba(e)?e:String(e)}var Ya=215,Ga="menu",Ka=Ga,Xa=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hot=e,this.options=n||{parent:null,name:null,className:"",keepInViewport:!0,standalone:!1,minWidth:Ya,container:this.hot.rootDocument.documentElement},this.eventManager=new $.a(this),this.container=this.createContainer(this.options.name),this.hotMenu=null,this.hotSubMenus={},this.parentMenu=this.options.parent||null,this.menuItems=null,this.origOutsideClickDeselects=null,this.keyEvent=!1,this.offset={above:0,below:0,left:0,right:0},this._afterScrollCallback=null,this.registerEvents()}var e,n,r;return e=t,n=[{key:"registerEvents",value:function(){for(var t=this,e=this.hot.rootWindow;e;)this.eventManager.addEventListener(e.document,"mousedown",(function(e){return t.onDocumentMouseDown(e)})),this.eventManager.addEventListener(e.document,"contextmenu",(function(e){return t.onDocumentContextMenu(e)})),e=Object(c.getParentWindow)(e)}},{key:"setMenuItems",value:function(t){this.menuItems=t}},{key:"getSelectedItem",value:function(){return this.hasSelectedItem()?this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]):null}},{key:"hasSelectedItem",value:function(){return Array.isArray(this.hotMenu.getSelectedLast())}},{key:"setOffset",value:function(area){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.offset[area]=t}},{key:"isSubMenu",value:function(){return null!==this.parentMenu}},{key:"open",value:function(){var t=this;this.runLocalHooks("beforeOpen"),this.container.removeAttribute("style"),this.container.style.display="block";var e=Object(Gr.debounce)((function(e){return t.openSubMenu(e)}),300),n=this.options.minWidth||Ya,r=!1,o=Object(j.arrayFilter)(this.menuItems,(function(e){return e.key===Oa&&(r=!0),function(t,e){return!t.hidden||!("function"==typeof t.hidden&&t.hidden.call(e))}(e,t.hot)}));if(o.length<1&&!r)o.push(Pa()[Oa]);else if(0===o.length)return;o=Ai(o,Ci);var l=!1,h={data:o,colHeaders:!1,autoColumnSize:!0,autoWrapRow:!1,modifyColWidth:function(t){return Object(R.isDefined)(t)&&t<n?n:t},autoRowSize:!1,readOnly:!0,editor:!1,copyPaste:!1,maxCols:1,columns:[{data:"name",renderer:function(e,n,r,col,o,l){return t.menuItemRenderer(e,n,r,col,o,l)}}],renderAllRows:!0,fragmentSelection:!1,outsideClickDeselects:!1,disableVisualSelection:"area",layoutDirection:this.hot.isRtl()?"rtl":"ltr",afterOnCellMouseOver:function(n,r){t.isAllSubMenusClosed()?e(r.row):t.openSubMenu(r.row)},rowHeights:function(t){return o[t].name===Ci?1:23},afterOnCellContextMenu:function(e){e.preventDefault(),Object(La.isWindowsOS)()&&l&&t.hasSelectedItem()&&t.close(!0)},beforeOnCellMouseUp:function(e){t.hasSelectedItem()&&(l=!t.isCommandPassive(t.getSelectedItem()),t.executeCommand(e))},afterOnCellMouseUp:function(e){Object(La.isWindowsOS)()&&Object(f.isRightClick)(e)||!l||!t.hasSelectedItem()||(Object(La.isMobileBrowser)()||Object(La.isIpadOS)()?setTimeout((function(){return t.close(!0)}),325):t.close(!0))},afterUnlisten:function(){!t.hasSelectedItem()&&t.isOpened()&&t.hotMenu.listen()}};this.origOutsideClickDeselects=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1,this.hotMenu=new Ha.a(this.container,h),this.hotMenu.addHook("afterInit",(function(){return t.onAfterInit()})),this.hotMenu.addHook("afterSelection",(function(){return t.onAfterSelection.apply(t,arguments)})),this.hotMenu.init(),this.hotMenu.listen();var d=this.hotMenu.getShortcutManager(),y=d.addContext(Ka),v=Fa(Fa({},{group:Ga}),{},{runOnlyIf:function(e){return!1===Object(c.isInput)(e.target)||!1===t.container.contains(e.target)}});d.setActiveContextName("menu"),y.addShortcuts([{keys:[["Escape"]],callback:function(){t.keyEvent=!0,t.close(),t.keyEvent=!1}},{keys:[["ArrowDown"]],callback:function(){var e=t.hotMenu.getSelectedLast();t.keyEvent=!0,e?t.selectNextCell(e[0],e[1]):t.selectFirstCell(),t.keyEvent=!1}},{keys:[["ArrowUp"]],callback:function(){var e=t.hotMenu.getSelectedLast();t.keyEvent=!0,e?t.selectPrevCell(e[0],e[1]):t.selectLastCell(),t.keyEvent=!1}},{keys:[["ArrowRight"]],callback:function(){var e=t.hotMenu.getSelectedLast();if(t.keyEvent=!0,e){var menu=t.openSubMenu(e[0]);menu&&menu.selectFirstCell()}t.keyEvent=!1}},{keys:[["ArrowLeft"]],callback:function(){var e=t.hotMenu.getSelectedLast();t.keyEvent=!0,e&&t.isSubMenu()&&(t.close(),t.parentMenu&&t.parentMenu.hotMenu.listen()),t.keyEvent=!1}},{keys:[["Enter"]],callback:function(e){var n=t.hotMenu.getSelectedLast();t.keyEvent=!0,t.hotMenu.getSourceDataAtRow(n[0]).submenu||(t.executeCommand(e),t.close(!0)),t.keyEvent=!1}},{keys:[["PageUp"]],callback:function(){var e=t.hotMenu.getSelectedLast();t.keyEvent=!0,e?t.hotMenu.selection.transformStart(-t.hotMenu.countVisibleRows(),0):t.selectFirstCell(),t.keyEvent=!1}},{keys:[["PageDown"]],callback:function(){var e=t.hotMenu.getSelectedLast();t.keyEvent=!0,e?t.hotMenu.selection.transformStart(t.hotMenu.countVisibleRows(),0):t.selectLastCell(),t.keyEvent=!1}}],v),this.blockMainTableCallbacks(),this.runLocalHooks("afterOpen")}},{key:"close",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isOpened()&&(t&&this.parentMenu?this.parentMenu.close():(this.closeAllSubMenus(),this.container.style.display="none",this.releaseMainTableCallbacks(),this.hotMenu.destroy(),this.hotMenu=null,this.hot.getSettings().outsideClickDeselects=this.origOutsideClickDeselects,this.runLocalHooks("afterClose"),this.parentMenu&&this.parentMenu.hotMenu.listen()))}},{key:"openSubMenu",value:function(e){if(!this.hotMenu)return!1;var n=this.hotMenu.getCell(e,0);if(this.closeAllSubMenus(),!n||!function(t){return Object(c.hasClass)(t,"htSubmenu")}(n))return!1;var r=this.hotMenu.getSourceDataAtRow(e),o=new t(this.hot,{parent:this,name:r.name,className:this.options.className,keepInViewport:!0,container:this.options.container});return o.setMenuItems(r.submenu.items),o.open(),o.setPosition(n.getBoundingClientRect()),this.hotSubMenus[r.key]=o,o}},{key:"closeSubMenu",value:function(t){var e=this.hotMenu.getSourceDataAtRow(t),n=this.hotSubMenus[e.key];n&&(n.destroy(),delete this.hotSubMenus[e.key])}},{key:"closeAllSubMenus",value:function(){var t=this;Object(j.arrayEach)(this.hotMenu.getData(),(function(e,n){return t.closeSubMenu(n)}))}},{key:"isAllSubMenusClosed",value:function(){return 0===Object.keys(this.hotSubMenus).length}},{key:"destroy",value:function(){var t=this.container.parentNode;this.clearLocalHooks(),this.close(),this.parentMenu=null,this.eventManager.destroy(),t&&t.removeChild(this.container)}},{key:"isOpened",value:function(){return null!==this.hotMenu}},{key:"executeCommand",value:function(t){if(this.isOpened()&&this.hasSelectedItem()){var e=this.getSelectedItem();if(this.runLocalHooks("select",e,t),!this.isCommandPassive(e)){var n=this.hot.getSelectedRange(),r=n?function(t){return Object(j.arrayMap)(t,(function(t){return{start:t.getTopStartCorner(),end:t.getBottomEndCorner()}}))}(n):[];this.runLocalHooks("executeCommand",e.key,r,t),this.isSubMenu()&&this.parentMenu.runLocalHooks("executeCommand",e.key,r,t)}}}},{key:"isCommandPassive",value:function(t){var e=t.isCommand,n=t.name,r=t.disabled,o=t.submenu,l=!0===r||"function"==typeof r&&!0===r.call(this.hot);return!1===e||n===Ci||!0===l||o}},{key:"setPosition",value:function(t){var cursor=new Na(t,this.container.ownerDocument.defaultView);this.options.keepInViewport?(cursor.fitsBelow(this.container)?this.setPositionBelowCursor(cursor):cursor.fitsAbove(this.container)?this.setPositionAboveCursor(cursor):this.setPositionBelowCursor(cursor),this.hot.isLtr()?this.setHorizontalPositionForLtr(cursor):this.setHorizontalPositionForRtl(cursor)):(this.setPositionBelowCursor(cursor),this.setPositionOnRightOfCursor(cursor))}},{key:"setHorizontalPositionForRtl",value:function(cursor){cursor.fitsOnLeft(this.container)?this.setPositionOnLeftOfCursor(cursor):this.setPositionOnRightOfCursor(cursor)}},{key:"setHorizontalPositionForLtr",value:function(cursor){cursor.fitsOnRight(this.container)?this.setPositionOnRightOfCursor(cursor):this.setPositionOnLeftOfCursor(cursor)}},{key:"setPositionAboveCursor",value:function(cursor){var t=this.offset.above+cursor.top-this.container.offsetHeight;this.isSubMenu()&&(t=cursor.top+cursor.cellHeight-this.container.offsetHeight+3),this.container.style.top="".concat(t,"px")}},{key:"setPositionBelowCursor",value:function(cursor){var t=this.offset.below+cursor.top+1;this.isSubMenu()&&(t=cursor.top-1),this.container.style.top="".concat(t,"px")}},{key:"setPositionOnRightOfCursor",value:function(cursor){var t=cursor.left;if(this.isSubMenu()){var e=this.parentMenu.container.getBoundingClientRect().right;t+=cursor.cellWidth+e-(cursor.left+cursor.cellWidth)}else t+=this.offset.right;this.container.style.left="".concat(t,"px")}},{key:"setPositionOnLeftOfCursor",value:function(cursor){var t=this.offset.left+cursor.left-this.container.offsetWidth;if(this.isSubMenu()){var e=this.parentMenu.container.getBoundingClientRect().left;t-=cursor.left-e}this.container.style.left="".concat(t,"px")}},{key:"selectFirstCell",value:function(){var t=this.hotMenu.getCell(0,0);Si(t)||ki(t)||ji(t)?this.selectNextCell(0,0):this.hotMenu.selectCell(0,0)}},{key:"selectLastCell",value:function(){var t=this.hotMenu.countRows()-1,e=this.hotMenu.getCell(t,0);Si(e)||ki(e)||ji(e)?this.selectPrevCell(t,0):(this.hotMenu.selectCell(t,0,void 0,void 0,!1),this.hotMenu.scrollViewportTo(t,0,!0,!1))}},{key:"selectNextCell",value:function(t,col){var e=t+1,n=e<this.hotMenu.countRows()?this.hotMenu.getCell(e,col):null;n&&(Si(n)||ki(n)||ji(n)?this.selectNextCell(e,col):this.hotMenu.selectCell(e,col))}},{key:"selectPrevCell",value:function(t,col){var e=t-1,n=e>=0?this.hotMenu.getCell(e,col):null;n&&(Si(n)||ki(n)||ji(n)?this.selectPrevCell(e,col):this.hotMenu.selectCell(e,col))}},{key:"menuItemRenderer",value:function(t,e,n,col,r,o){var l,f=this,d=t.getSourceDataAtRow(n),y=this.hot.rootDocument.createElement("div"),v=function(t){return t.disableSelection},m=o;"function"==typeof m&&(m=m.call(this.hot)),Object(c.empty)(e),Object(c.addClass)(y,"htItemWrapper"),e.appendChild(y),l=d,new RegExp(Ci,"i").test(l.name)?Object(c.addClass)(e,"htSeparator"):"function"==typeof d.renderer?(Object(c.addClass)(e,"htCustomMenuRenderer"),e.appendChild(d.renderer(t,y,n,col,r,m))):Object(c.fastInnerHTML)(y,m),function(t){return!0===t.disabled||"function"==typeof t.disabled&&!0===t.disabled.call(f.hot)}(d)?(Object(c.addClass)(e,"htDisabled"),this.eventManager.addEventListener(e,"mouseenter",(function(){return t.deselectCell()}))):v(d)?(Object(c.addClass)(e,"htSelectionDisabled"),this.eventManager.addEventListener(e,"mouseenter",(function(){return t.deselectCell()}))):function(t){return Object(h.hasOwnProperty)(t,"submenu")}(d)?(Object(c.addClass)(e,"htSubmenu"),v(d)?this.eventManager.addEventListener(e,"mouseenter",(function(){return t.deselectCell()})):this.eventManager.addEventListener(e,"mouseenter",(function(){return t.selectCell(n,col,void 0,void 0,!1,!1)}))):(Object(c.removeClass)(e,["htSubmenu","htDisabled"]),v(d)?this.eventManager.addEventListener(e,"mouseenter",(function(){return t.deselectCell()})):this.eventManager.addEventListener(e,"mouseenter",(function(){return t.selectCell(n,col,void 0,void 0,!1,!1)})))}},{key:"createContainer",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.options.container.ownerDocument,r=e;return r&&(Object(Gr.isFunction)(r)&&(r=null===(r=r.call(this.hot))||Object(R.isUndefined)(r)?"":r.toString()),r=r.replace(/[^A-z0-9]/g,"_"),r="".concat(this.options.className,"Sub_").concat(r),t=n.querySelector(".".concat(this.options.className,".").concat(r))),t||(t=n.createElement("div"),Object(c.addClass)(t,"htMenu ".concat(this.options.className)),r&&Object(c.addClass)(t,r),this.options.container.appendChild(t)),t}},{key:"blockMainTableCallbacks",value:function(){this._afterScrollCallback=function(){},this.hot.addHook("afterScrollVertically",this._afterScrollCallback),this.hot.addHook("afterScrollHorizontally",this._afterScrollCallback)}},{key:"releaseMainTableCallbacks",value:function(){this._afterScrollCallback&&(this.hot.removeHook("afterScrollVertically",this._afterScrollCallback),this.hot.removeHook("afterScrollHorizontally",this._afterScrollCallback),this._afterScrollCallback=null)}},{key:"onAfterInit",value:function(){var t=this.hotMenu.view._wt.wtTable,data=this.hotMenu.getSettings().data,e=t.hider.style,n=t.holder.style,r=parseInt(e.width,10),o=Object(j.arrayReduce)(data,(function(t,e){return t+(e.name===Ci?1:26)}),0);n.width="".concat(r+3,"px"),n.height="".concat(o+3,"px"),e.height=n.height}},{key:"onAfterSelection",value:function(t,e,n,r,o){!1===this.keyEvent&&(o.value=!0)}},{key:"onDocumentMouseDown",value:function(t){this.isOpened()&&(this.options.standalone&&this.hotMenu&&!Object(c.isChildOf)(t.target,this.hotMenu.rootElement)?this.close(!0):!this.isAllSubMenusClosed()&&!this.isSubMenu()||Object(c.isChildOf)(t.target,".htMenu")||this.close(!0))}},{key:"onDocumentContextMenu",value:function(t){this.isOpened()&&Object(c.hasClass)(t.target,"htCore")&&Object(c.isChildOf)(t.target,this.hotMenu.rootElement)&&t.preventDefault()}}],n&&Wa(e.prototype,n),r&&Wa(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object(h.mixin)(Xa,Ii.a);var $a=Xa;function qa(t){return qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qa(t)}function Za(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==qa(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==qa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===qa(o)?o:String(o)),n)}var r,o}function Ja(){return Ja="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=nl(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Ja.apply(this,arguments)}function Qa(t,p){return Qa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Qa(t,p)}function tl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=nl(t);if(e){var o=nl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===qa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return el(t)}(this,n)}}function el(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nl(t){return nl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nl(t)}var rl="contextMenu";lt.a.getSingleton().register("afterContextMenuDefaultOptions"),lt.a.getSingleton().register("beforeContextMenuShow"),lt.a.getSingleton().register("afterContextMenuShow"),lt.a.getSingleton().register("afterContextMenuHide"),lt.a.getSingleton().register("afterContextMenuExecute");var il=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qa(t,e)}(l,t);var e,n,r,o=tl(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).eventManager=new $.a(el(e)),e.commandExecutor=new ia(e.hot),e.itemsFactory=null,e.menu=null,e}return e=l,n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[rl]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[rl];"function"==typeof e.callback&&this.commandExecutor.setCommonCallback(e.callback),this.menu=new $a(this.hot,{className:"htContextMenu",keepInViewport:!0,container:e.uiContainer||this.hot.rootDocument.body}),this.menu.addLocalHook("beforeOpen",(function(){return t.onMenuBeforeOpen()})),this.menu.addLocalHook("afterOpen",(function(){return t.onMenuAfterOpen()})),this.menu.addLocalHook("afterClose",(function(){return t.onMenuAfterClose()})),this.menu.addLocalHook("executeCommand",(function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.executeCommand).call.apply(e,[t].concat(r))})),this.addHook("afterOnCellContextMenu",(function(e){return t.onAfterOnCellContextMenu(e)})),Ja(nl(l.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),Ja(nl(l.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.close(),this.menu&&(this.menu.destroy(),this.menu=null),Ja(nl(l.prototype),"disablePlugin",this).call(this)}},{key:"open",value:function(t){if(this.menu&&(this.prepareMenuItems(),this.menu.open(),this.menu.isOpened())){var e=0,n=0;if(this.hot.rootDocument!==this.menu.container.ownerDocument){var r=this.hot.rootWindow.frameElement.getBoundingClientRect(),o=r.top,l=r.left;e=o-Object(c.getWindowScrollTop)(t.view),n=l-Object(c.getWindowScrollLeft)(t.view)}else e=-1*Object(c.getWindowScrollTop)(this.menu.hotMenu.rootWindow),n=-1*Object(c.getWindowScrollLeft)(this.menu.hotMenu.rootWindow);this.menu.setPosition({top:parseInt(t.pageY,10)+e,left:parseInt(t.pageX,10)+n})}}},{key:"close",value:function(){this.menu&&(this.menu.close(),this.itemsFactory=null)}},{key:"executeCommand",value:function(t){var e;null===this.itemsFactory&&this.prepareMenuItems();for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=this.commandExecutor).execute.apply(e,[t].concat(r))}},{key:"prepareMenuItems",value:function(){var t=this;this.itemsFactory=new Aa(this.hot,l.DEFAULT_ITEMS);var e=this.hot.getSettings()[rl],n={items:this.itemsFactory.getItems(e)};this.hot.runHooks("afterContextMenuDefaultOptions",n),this.itemsFactory.setPredefinedItems(n.items);var r=this.itemsFactory.getItems(e);this.hot.runHooks("beforeContextMenuSetItems",r),this.menu.setMenuItems(r),Object(j.arrayEach)(r,(function(e){return t.commandExecutor.registerCommand(e.key,e)}))}},{key:"onAfterOnCellContextMenu",value:function(t){var e=this.hot.getSettings(),n=e.rowHeaders,r=e.colHeaders,element=t.target;this.close(),Object(c.hasClass)(element,"handsontableInput")||(t.preventDefault(),t.stopPropagation(),(n||r||function(element){return"TD"===element.nodeName||"TD"===element.parentNode.nodeName}(element)||Object(c.hasClass)(element,"current")&&Object(c.hasClass)(element,"wtBorder"))&&this.open(t))}},{key:"onMenuBeforeOpen",value:function(){this.hot.runHooks("beforeContextMenuShow",this)}},{key:"onMenuAfterOpen",value:function(){this.hot.runHooks("afterContextMenuShow",this)}},{key:"onMenuAfterClose",value:function(){this.hot.listen(),this.hot.runHooks("afterContextMenuHide",this)}},{key:"destroy",value:function(){this.close(),this.menu&&this.menu.destroy(),Ja(nl(l.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return rl}},{key:"PLUGIN_PRIORITY",get:function(){return 70}},{key:"PLUGIN_DEPS",get:function(){return["plugin:AutoColumnSize"]}},{key:"DEFAULT_ITEMS",get:function(){return[ma,wa,Ci,ua,sa,Ci,ba,ya,Ci,Sa,fa,Ci,ca,Ci,aa]}}],n&&Za(e.prototype,n),r&&Za(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);il.SEPARATOR={name:Ci};var al=n(1052);function ll(t){return ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ll(t)}function sl(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==ll(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==ll(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===ll(o)?o:String(o)),n)}var r,o}var cl=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data={}}var e,n,r;return e=t,(n=[{key:"setData",value:function(t,e){this.data[t]=e}},{key:"getData",value:function(t){return this.data[t]||void 0}}])&&sl(e.prototype,n),r&&sl(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function fl(t){return fl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fl(t)}function hl(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==fl(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==fl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===fl(o)?o:String(o)),n)}var r,o}function pl(t,e,n){return e&&hl(t.prototype,e),n&&hl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var yl=pl((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clipboardData=new cl}));function gl(t){return gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gl(t)}function vl(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==gl(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==gl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===gl(o)?o:String(o)),n)}var r,o}var bl=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rootDocument=e.defaultView?e:e.ownerDocument,this.mainElement=null,this.eventManager=new $.a(this),this.listenersCount=new WeakSet,this.container=e}var e,n,r;return e=t,(n=[{key:"useSecondaryElement",value:function(){var t=function(t){var e=Cl.get(t);if(e)return e.parentElement||t.appendChild(e),e;var element=(t.defaultView?t:t.ownerDocument).createElement("textarea");return Cl.set(t,element),element.setAttribute("data-hot-input",""),element.className="HandsontableCopyPaste",element.tabIndex=-1,element.autocomplete="off",element.wrap="hard",element.value=" ",t.appendChild(element),element}(this.container);this.listenersCount.has(t)||(this.listenersCount.add(t),Ol(this.eventManager,t,this)),this.mainElement=t}},{key:"setFocusableElement",value:function(element){this.listenersCount.has(element)||(this.listenersCount.add(element),Ol(this.eventManager,element,this)),this.mainElement=element}},{key:"getFocusableElement",value:function(){return this.mainElement}},{key:"focus",value:function(){this.mainElement.value=" ",Object(La.isMobileBrowser)()||Object(c.selectElementIfAllowed)(this.mainElement)}}])&&vl(e.prototype,n),r&&vl(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object(h.mixin)(bl,Ii.a);var ml=new WeakMap;var wl=function(t,e){return function(n){return e.runLocalHooks(t,n)}};function Ol(t,element,e){t.addEventListener(element,"copy",wl("copy",e)),t.addEventListener(element,"cut",wl("cut",e)),t.addEventListener(element,"paste",wl("paste",e))}var Cl=new WeakMap;function Sl(t){if(t instanceof bl){var e=ml.get(t.container);if((e=isNaN(e)?0:e)>0&&(e-=1),function(t){t.eventManager.clear()}(t),e<=0){e=0;var n=Cl.get(t.container);n&&n.parentNode&&(n.parentNode.removeChild(n),Cl.delete(t.container)),t.mainElement=null}ml.set(t.container,e)}}function kl(t){return kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kl(t)}function jl(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==kl(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==kl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===kl(o)?o:String(o)),n)}var r,o}function Rl(t,e){Pl(t,e),e.add(t)}function El(t,e,n){Pl(t,e),e.set(t,n)}function Pl(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ml(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function _l(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Al(t,e,"get"))}function Tl(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Al(t,e,"set"),n),n}function Al(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Il=new WeakMap,xl=new WeakMap,Dl=new WeakMap,Nl=new WeakMap,Hl=new WeakMap,Ll=new WeakMap,Bl=new WeakSet,Ul=new WeakSet,Fl=function(){function t(e){var n=e.countRows,r=e.countColumns,o=e.rowsLimit,l=e.columnsLimit,c=e.countColumnHeaders;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Rl(this,Ul),Rl(this,Bl),El(this,Il,{writable:!0,value:void 0}),El(this,xl,{writable:!0,value:void 0}),El(this,Dl,{writable:!0,value:void 0}),El(this,Nl,{writable:!0,value:void 0}),El(this,Hl,{writable:!0,value:void 0}),El(this,Ll,{writable:!0,value:void 0}),Tl(this,xl,n),Tl(this,Dl,r),Tl(this,Nl,o),Tl(this,Hl,l),Tl(this,Ll,c)}var e,n,r;return e=t,(n=[{key:"setSelectedRange",value:function(t){Tl(this,Il,t)}},{key:"getCellsRange",value:function(){if(0===_l(this,xl).call(this)||0===_l(this,Dl).call(this))return null;var t=_l(this,Il).getTopStartCorner(),e=t.row,n=t.col,r=_l(this,Il).getBottomEndCorner(),o=r.row,l=r.col,c=Ml(this,Ul,Wl).call(this,e,o),f=Ml(this,Bl,Vl).call(this,n,l);return{isRangeTrimmed:o!==c||l!==f,startRow:e,startCol:n,endRow:c,endCol:f}}},{key:"getMostBottomColumnHeadersRange",value:function(){if(0===_l(this,Dl).call(this)||0===_l(this,Ll).call(this))return null;var t=_l(this,Il).getTopStartCorner().col,e=_l(this,Il).getBottomEndCorner().col,n=Ml(this,Bl,Vl).call(this,t,e);return{isRangeTrimmed:e!==n,startRow:-1,startCol:t,endRow:-1,endCol:n}}},{key:"getAllColumnHeadersRange",value:function(){if(0===_l(this,Dl).call(this)||0===_l(this,Ll).call(this))return null;var t=_l(this,Il).getTopStartCorner().col,e=_l(this,Il).getBottomEndCorner().col,n=Ml(this,Bl,Vl).call(this,t,e);return{isRangeTrimmed:e!==n,startRow:-_l(this,Ll).call(this),startCol:t,endRow:-1,endCol:n}}}])&&jl(e.prototype,n),r&&jl(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Vl(t,e){return Math.min(e,Math.max(t+_l(this,Hl).call(this)-1,t))}function Wl(t,e){return Math.min(e,Math.max(t+_l(this,Nl).call(this)-1,t))}function zl(t){var e=[],n=[];return Object(j.arrayEach)(t,(function(t){var r=Math.min(t.startRow,t.endRow),o=Math.max(t.startRow,t.endRow);Object(ie.rangeEach)(r,o,(function(t){-1===e.indexOf(t)&&e.push(t)}));var l=Math.min(t.startCol,t.endCol),c=Math.max(t.startCol,t.endCol);Object(ie.rangeEach)(l,c,(function(t){-1===n.indexOf(t)&&n.push(t)}))})),{rows:e,columns:n}}var Yl=n(812);function Gl(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return Kl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kl(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kl(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Xl(t){return Xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xl(t)}function $l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ou(n.key),n)}}function ql(){return ql="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=tu(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},ql.apply(this,arguments)}function Zl(t,p){return Zl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Zl(t,p)}function Jl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tu(t);if(e){var o=tu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Xl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ql(t)}(this,n)}}function Ql(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tu(t){return tu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tu(t)}function eu(t,e,n){nu(t,e),e.set(t,n)}function nu(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ru(t,e,n){return(e=ou(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ou(t){var e=function(input,t){if("object"!==Xl(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Xl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Xl(e)?e:String(e)}function iu(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,lu(t,e,"get"))}function au(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,lu(t,e,"set"),n),n}function lu(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}lt.a.getSingleton().register("afterCopyLimit"),lt.a.getSingleton().register("modifyCopyableRange"),lt.a.getSingleton().register("beforeCut"),lt.a.getSingleton().register("afterCut"),lt.a.getSingleton().register("beforePaste"),lt.a.getSingleton().register("afterPaste"),lt.a.getSingleton().register("beforeCopy"),lt.a.getSingleton().register("afterCopy");var uu="copyPaste",su=["fragmentSelection"],cu=['<meta name="generator" content="Handsontable"/>','<style type="text/css">td{white-space:normal}br{mso-data-placement:same-cell}</style>'].join(""),fu=new WeakMap,hu=new WeakMap,du=new WeakMap,pu=new WeakMap,yu=new WeakMap,gu=new WeakMap,vu=new WeakMap,bu=new WeakSet,mu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zl(t,e)}(l,t);var e,n,r,o=Jl(l);function l(){var t,e,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var r=arguments.length,c=new Array(r),f=0;f<r;f++)c[f]=arguments[f];return t=o.call.apply(o,[this].concat(c)),nu(e=Ql(t),n=bu),n.add(e),ru(Ql(t),"columnsLimit",1/0),ru(Ql(t),"rowsLimit",1/0),ru(Ql(t),"pasteMode","overwrite"),ru(Ql(t),"uiContainer",t.hot.rootDocument.body),eu(Ql(t),fu,{writable:!0,value:!1}),eu(Ql(t),hu,{writable:!0,value:!1}),eu(Ql(t),du,{writable:!0,value:!1}),eu(Ql(t),pu,{writable:!0,value:"cells-only"}),eu(Ql(t),yu,{writable:!0,value:!1}),eu(Ql(t),gu,{writable:!0,value:!1}),eu(Ql(t),vu,{writable:!0,value:new Fl({countRows:function(){return t.hot.countRows()},countColumns:function(){return t.hot.countCols()},rowsLimit:function(){return t.rowsLimit},columnsLimit:function(){return t.columnsLimit},countColumnHeaders:function(){return t.hot.view.getColumnHeadersCount()}})}),ru(Ql(t),"copyableRanges",[]),ru(Ql(t),"focusableElement",void 0),t}return e=l,n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[uu]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e,n,r,o,c,f=this.hot.getSettings()[uu];"object"===Xl(f)&&(this.pasteMode=null!==(e=f.pasteMode)&&void 0!==e?e:this.pasteMode,this.rowsLimit=isNaN(f.rowsLimit)?this.rowsLimit:f.rowsLimit,this.columnsLimit=isNaN(f.columnsLimit)?this.columnsLimit:f.columnsLimit,au(this,fu,!!f.copyColumnHeaders),au(this,hu,!!f.copyColumnGroupHeaders),au(this,du,!!f.copyColumnHeadersOnly),this.uiContainer=null!==(n=f.uiContainer)&&void 0!==n?n:this.uiContainer),this.addHook("afterContextMenuDefaultOptions",(function(e){return t.onAfterContextMenuDefaultOptions(e)})),this.addHook("afterOnCellMouseUp",(function(){return t.onAfterOnCellMouseUp()})),this.addHook("afterSelectionEnd",(function(){return t.onAfterSelectionEnd()})),this.addHook("beforeKeyDown",(function(){return t.onBeforeKeyDown()})),this.focusableElement=(r=this.uiContainer,o=new bl(r),c=ml.get(r),c=isNaN(c)?0:c,ml.set(r,c+1),o),this.focusableElement.addLocalHook("copy",(function(e){return t.onCopy(e)})).addLocalHook("cut",(function(e){return t.onCut(e)})).addLocalHook("paste",(function(e){return t.onPaste(e)})),ql(tu(l.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.getOrCreateFocusableElement(),ql(tu(l.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.focusableElement&&Sl(this.focusableElement),ql(tu(l.prototype),"disablePlugin",this).call(this)}},{key:"copy",value:function(){au(this,pu,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cells-only"),au(this,yu,!0),this.getOrCreateFocusableElement(),this.focusableElement.focus(),this.hot.rootDocument.execCommand("copy")}},{key:"copyCellsOnly",value:function(){this.copy("cells-only")}},{key:"copyColumnHeadersOnly",value:function(){this.copy("column-headers-only")}},{key:"copyWithAllColumnHeaders",value:function(){this.copy("with-column-group-headers")}},{key:"copyWithColumnHeaders",value:function(){this.copy("with-column-headers")}},{key:"cut",value:function(){au(this,gu,!0),this.getOrCreateFocusableElement(),this.focusableElement.focus(),this.hot.rootDocument.execCommand("cut")}},{key:"getRangedCopyableData",value:function(t){return Object(al.b)(this.getRangedData(t))}},{key:"getRangedData",value:function(t){var e=this,data=[],n=zl(t),r=n.rows,o=n.columns;return Object(j.arrayEach)(r,(function(t){var n=[];Object(j.arrayEach)(o,(function(r){t<0?n.push(e.hot.getColHeader(r,t)):n.push(e.hot.getCopyableData(t,r))})),data.push(n)})),data}},{key:"paste",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(t||e){var n=new yl;t&&n.clipboardData.setData("text/plain",t),e&&n.clipboardData.setData("text/html",e),this.getOrCreateFocusableElement(),this.onPaste(n)}}},{key:"setCopyableText",value:function(){var t=this.hot.getSelectedRangeLast();if(t){iu(this,vu).setSelectedRange(t);var e=new Map([["headers",null],["cells",null]]);"column-headers-only"===iu(this,pu)?e.set("headers",iu(this,vu).getMostBottomColumnHeadersRange()):("with-column-headers"===iu(this,pu)?e.set("headers",iu(this,vu).getMostBottomColumnHeadersRange()):"with-column-group-headers"===iu(this,pu)&&e.set("headers",iu(this,vu).getAllColumnHeadersRange()),e.set("cells",iu(this,vu).getCellsRange())),this.copyableRanges=Array.from(e.values()).filter((function(t){return null!==t})).map((function(t){return{startRow:t.startRow,startCol:t.startCol,endRow:t.endRow,endCol:t.endCol}})),this.copyableRanges=this.hot.runHooks("modifyCopyableRange",this.copyableRanges);var n=e.get("cells");if(null!==n&&n.isRangeTrimmed){var r=n.startRow,o=n.startCol,l=n.endRow,c=n.endCol;this.hot.runHooks("afterCopyLimit",l-r+1,c-o+1,this.rowsLimit,this.columnsLimit)}}}},{key:"getOrCreateFocusableElement",value:function(){var t,e=null===(t=this.hot.getActiveEditor())||void 0===t?void 0:t.TEXTAREA;e?this.focusableElement.setFocusableElement(e):this.focusableElement.useSecondaryElement()}},{key:"isEditorOpened",value:function(){var t;return null===(t=this.hot.getActiveEditor())||void 0===t?void 0:t.isOpened()}},{key:"populateValues",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.hot.getSelectedRangeLast();if(t.length){for(var n=t.length,r=t[0].length,o=[],l=e.getTopStartCorner(),c=l.row,f=l.col,h=e.getBottomEndCorner(),d=h.row,y=h.col,v=c,m=f,w=c,O=f;o.length<n||v<=d;){var C=this.hot.getCellMeta(v,f),S=C.skipRowOnPaste,k=C.visualRow;if(v=k+1,!0!==S){w=k,m=f;for(var j=[],R=o.length%n;j.length<r||m<=y;){var E=this.hot.getCellMeta(c,m),P=E.skipColumnOnPaste,M=E.visualCol;if(m=M+1,!0!==P){O=M;var _=j.length%r;j.push(t[R][_])}}o.push(j)}}return this.hot.populateFromArray(c,f,o,void 0,void 0,"CopyPaste.paste",this.pasteMode),[c,f,w,O]}}},{key:"onCopy",value:function(t){if((this.hot.isListening()||iu(this,yu))&&!this.isEditorOpened()){this.setCopyableText(),au(this,yu,!1);var data=this.getRangedData(this.copyableRanges),e=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(this,bu,wu).call(this,this.copyableRanges);if(this.hot.runHooks("beforeCopy",data,this.copyableRanges,e)){var n=Object(al.b)(data);if(t&&t.clipboardData){var r=Object(Yl._dataToHTML)(data,this.hot.rootDocument);t.clipboardData.setData("text/plain",n),t.clipboardData.setData("text/html",[cu,r].join(""))}else"undefined"==typeof ClipboardEvent&&this.hot.rootWindow.clipboardData.setData("Text",n);this.hot.runHooks("afterCopy",data,this.copyableRanges,e)}au(this,pu,"cells-only"),t.preventDefault()}}},{key:"onCut",value:function(t){if((this.hot.isListening()||iu(this,gu))&&!this.isEditorOpened()){this.setCopyableText(),au(this,gu,!1);var e=this.getRangedData(this.copyableRanges);if(this.hot.runHooks("beforeCut",e,this.copyableRanges)){var n=Object(al.b)(e);if(t&&t.clipboardData){var r=Object(Yl._dataToHTML)(e,this.hot.rootDocument);t.clipboardData.setData("text/plain",n),t.clipboardData.setData("text/html",[cu,r].join(""))}else"undefined"==typeof ClipboardEvent&&this.hot.rootWindow.clipboardData.setData("Text",n);this.hot.emptySelectedCells("CopyPaste.cut"),this.hot.runHooks("afterCut",e,this.copyableRanges)}t.preventDefault()}}},{key:"onPaste",value:function(t){if(this.hot.isListening()&&!this.isEditorOpened()){var e;if(t&&t.preventDefault&&t.preventDefault(),t&&void 0!==t.clipboardData){var n=Object(E.sanitize)(t.clipboardData.getData("text/html"),{ADD_TAGS:["meta"],ADD_ATTR:["content"],FORCE_BODY:!0});e=n&&/(<table)|(<TABLE)/g.test(n)?Object(Yl.htmlToGridSettings)(n,this.hot.rootDocument).data:t.clipboardData.getData("text/plain")}else"undefined"==typeof ClipboardEvent&&void 0!==this.hot.rootWindow.clipboardData&&(e=this.hot.rootWindow.clipboardData.getData("Text"));if("string"==typeof e&&(e=Object(al.a)(e)),(!e||0!==e.length)&&!1!==this.hot.runHooks("beforePaste",e,this.copyableRanges)){var r=Gl(this.populateValues(e),4),o=r[0],l=r[1],c=r[2],f=r[3];this.hot.selectCell(o,l,Math.min(this.hot.countRows()-1,c),Math.min(this.hot.countCols()-1,f)),this.hot.runHooks("afterPaste",e,this.copyableRanges)}}}},{key:"onAfterContextMenuDefaultOptions",value:function(t){var e;t.items.push({name:"---------"},(e=this,{key:"copy",name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_COPY)},callback:function(){e.copyCellsOnly()},disabled:function(){if(0===this.countRows()||0===this.countCols())return!0;var t=this.getSelected();return!t||t.length>1},hidden:!1})),iu(this,fu)&&t.items.push(function(t){return{key:"copy_with_column_headers",name:function(){var t=this.getSelectedRangeLast(),e=t?Math.min(t.getWidth()-1,1):0;return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_HEADERS,e)},callback:function(){t.copyWithColumnHeaders()},disabled:function(){if(!this.hasColHeaders())return!0;var t=this.getSelected();return!t||t.length>1},hidden:!1}}(this)),iu(this,hu)&&t.items.push(function(t){return{key:"copy_with_column_group_headers",name:function(){var t=this.getSelectedRangeLast(),e=t?Math.min(t.getWidth()-1,1):0;return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_GROUP_HEADERS,e)},callback:function(){t.copyWithAllColumnHeaders()},disabled:function(){if(!this.hasColHeaders()||!this.getSettings().nestedHeaders)return!0;var t=this.getSelected();return!t||t.length>1},hidden:!1}}(this)),iu(this,du)&&t.items.push(function(t){return{key:"copy_column_headers_only",name:function(){var t=this.getSelectedRangeLast(),e=t?Math.min(t.getWidth()-1,1):0;return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_COPY_COLUMN_HEADERS_ONLY,e)},callback:function(){t.copyColumnHeadersOnly()},disabled:function(){if(!this.hasColHeaders())return!0;var t=this.getSelected();return!t||t.length>1},hidden:!1}}(this)),t.items.push(function(t){return{key:"cut",name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_CUT)},callback:function(){t.cut()},disabled:function(){if(0===this.countRows()||0===this.countCols())return!0;var t=this.getSelected();return!t||t.length>1},hidden:!1}}(this))}},{key:"onAfterOnCellMouseUp",value:function(){!this.hot.isListening()||this.isEditorOpened()||this.hot.getSettings().fragmentSelection||(this.getOrCreateFocusableElement(),this.focusableElement.focus())}},{key:"onAfterSelectionEnd",value:function(){this.isEditorOpened()||(this.getOrCreateFocusableElement(),this.hot.getSettings().fragmentSelection&&this.focusableElement.getFocusableElement()!==this.hot.rootDocument.activeElement&&Object(c.getSelectionText)()||(this.setCopyableText(),this.focusableElement.focus()))}},{key:"onBeforeKeyDown",value:function(){if(this.hot.isListening()&&!this.isEditorOpened()){var t=this.hot.rootDocument.activeElement,e=this.hot.getActiveEditor();!e||t!==this.focusableElement.getFocusableElement()&&t!==e.select||(this.getOrCreateFocusableElement(),this.focusableElement.focus())}}},{key:"destroy",value:function(){this.focusableElement&&(Sl(this.focusableElement),this.focusableElement=null),ql(tu(l.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return uu}},{key:"SETTING_KEYS",get:function(){return[uu].concat(su)}},{key:"PLUGIN_PRIORITY",get:function(){return 80}}],n&&$l(e.prototype,n),r&&$l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function wu(t){for(var e=zl(t).rows,n=0,r=0;r<e.length&&!(e[r]>=0);r++)n+=1;return{columnHeadersCount:n}}function Ou(t,col){return"border_row".concat(t,"col").concat(col)}function Cu(t){var e,n;(Object(R.isDefined)(t.start)||Object(R.isDefined)(t.left))&&(t.start=null!==(e=t.start)&&void 0!==e?e:t.left);(Object(R.isDefined)(t.end)||Object(R.isDefined)(t.right))&&(t.end=null!==(n=t.end)&&void 0!==n?n:t.right);return delete t.left,delete t.right,t}function Su(t){return Object(R.isDefined)(t.start)&&(t.left=t.start),Object(R.isDefined)(t.end)&&(t.right=t.end),t}function ku(t,col){return{id:Ou(t,col),border:{width:1,color:"#000",cornerVisible:!1},row:t,col:col,top:{hide:!0},bottom:{hide:!0},start:{hide:!0},end:{hide:!0}}}function ju(t,e){var n=!1;return Object(j.arrayEach)(t.getSelectedRange(),(function(r){r.forAll((function(r,o){if(!(r<0||o<0)){var l=t.getCellMeta(r,o).borders;if(l){if(!e)return n=!0,!1;if(!Object(h.hasOwnProperty)(l[e],"hide")||!1===l[e].hide)return n=!0,!1}}}))})),n}function Ru(label){return'<span class="selected">'.concat(String.fromCharCode(10003),"</span>").concat(label)}var Eu=new Map([["left","start"],["right","end"]]);function Pu(t){var e=t.hot.isRtl()?"start":"end";return{key:"borders:right",name:function(){var label=this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_BORDERS_RIGHT);return ju(this,e)&&(label=Ru(label)),label},callback:function(n,r){var o=ju(this,e);t.prepareBorder(r,e,o)}}}function Mu(t){return{key:"borders:bottom",name:function(){var label=this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_BORDERS_BOTTOM);return ju(this,"bottom")&&(label=Ru(label)),label},callback:function(e,n){var r=ju(this,"bottom");t.prepareBorder(n,"bottom",r)}}}function _u(t){var e=t.hot.isRtl()?"end":"start";return{key:"borders:left",name:function(){var label=this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_BORDERS_LEFT);return ju(this,e)&&(label=Ru(label)),label},callback:function(n,r){var o=ju(this,e);t.prepareBorder(r,e,o)}}}function Tu(t){return{key:"borders:no_borders",name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_REMOVE_BORDERS)},callback:function(e,n){t.prepareBorder(n,"noBorders")},disabled:function(){return!ju(this)}}}function Au(t){return Au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Au(t)}function Iu(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return xu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xu(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xu(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Du(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fu(n.key),n)}}function Nu(){return Nu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Uu(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Nu.apply(this,arguments)}function Hu(t,p){return Hu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Hu(t,p)}function Lu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Uu(t);if(e){var o=Uu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Au(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bu(t)}(this,n)}}function Bu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uu(t){return Uu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Uu(t)}function Fu(t){var e=function(input,t){if("object"!==Au(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Au(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Au(e)?e:String(e)}var Vu="customBorders",Wu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hu(t,e)}(l,t);var e,n,r,o=Lu(l);function l(){var t,e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return t=o.call.apply(o,[this].concat(f)),e=Bu(t),r=[],(n=Fu(n="savedBorders"))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,t}return e=l,r=[{key:"PLUGIN_KEY",get:function(){return Vu}},{key:"PLUGIN_PRIORITY",get:function(){return 90}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[Vu]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("afterContextMenuDefaultOptions",(function(e){return t.onAfterContextMenuDefaultOptions(e)})),this.addHook("init",(function(){return t.onAfterInit()})),Nu(Uu(l.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.hideBorders(),Nu(Uu(l.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.changeBorderSettings(),Nu(Uu(l.prototype),"updatePlugin",this).call(this)}},{key:"setBorders",value:function(t,e){var n=this,r=["top","bottom","start","end"],o=null;e&&(this.checkSettingsCohesion([e]),r=Object.keys(e),o=Cu(e));var l=Object(ha.c)(t),c=Object(ha.e)(l);Object(j.arrayEach)(t,(function(t){for(var e=Iu(c(t),4),l=e[0],f=e[1],h=e[2],d=e[3],y=function(t){for(var e=function(col){Object(j.arrayEach)(r,(function(e){var r,l;n.prepareBorderFromCustomAdded(t,col,o,(r=e,null!==(l=Eu.get(r))&&void 0!==l?l:r))}))},col=f;col<=d;col+=1)e(col)},v=l;v<=h;v+=1)y(v)})),this.hot.view.render()}},{key:"getBorders",value:function(t){var e=this;if(!Array.isArray(t))return this.savedBorders;var n=Object(ha.c)(t),r=Object(ha.e)(n),o=[];return Object(j.arrayEach)(t,(function(t){for(var n=Iu(r(t),4),l=n[0],c=n[1],f=n[2],h=n[3],d=function(t){for(var n=function(col){Object(j.arrayEach)(e.savedBorders,(function(e){e.row===t&&e.col===col&&o.push(Su(e))}))},col=c;col<=h;col+=1)n(col)},y=l;y<=f;y+=1)d(y)})),o}},{key:"clearBorders",value:function(t){var e=this;t?this.setBorders(t):(Object(j.arrayEach)(this.savedBorders,(function(t){e.clearBordersFromSelectionSettings(t.id),e.clearNullCellRange(),e.hot.removeCellMeta(t.row,t.col,"borders")})),this.savedBorders.length=0)}},{key:"insertBorderIntoSettings",value:function(t,e){this.checkSavedBorders(t)||this.savedBorders.push(t);var n=this.hot._createCellRange(this.hot._createCellCoords(t.row,t.col));this.checkCustomSelections(t,n,e)||this.hot.selection.highlight.addCustomSelection({border:t,visualCellRange:n})}},{key:"prepareBorderFromCustomAdded",value:function(t,e,n,r){var o=this.hot.countRows(),l=this.hot.countCols();if(!(t>=o||e>=l)){var c,f,d=ku(t,e);n&&(c=d,f=n,Object(h.hasOwnProperty)(f,"border")&&f.border&&(c.border=f.border),Object(h.hasOwnProperty)(f,"top")&&Object(R.isDefined)(f.top)&&(f.top?(Object(h.isObject)(f.top)||(f.top={width:1,color:"#000"}),c.top=f.top):(f.top={hide:!0},c.top=f.top)),Object(h.hasOwnProperty)(f,"bottom")&&Object(R.isDefined)(f.bottom)&&(f.bottom?(Object(h.isObject)(f.bottom)||(f.bottom={width:1,color:"#000"}),c.bottom=f.bottom):(f.bottom={hide:!0},c.bottom=f.bottom)),Object(h.hasOwnProperty)(f,"start")&&Object(R.isDefined)(f.start)&&(f.start?(Object(h.isObject)(f.start)||(f.start={width:1,color:"#000"}),c.start=f.start):(f.start={hide:!0},c.start=f.start)),Object(h.hasOwnProperty)(f,"end")&&Object(R.isDefined)(f.end)&&(f.end?(Object(h.isObject)(f.end)||(f.end={width:1,color:"#000"}),c.end=f.end):(f.end={hide:!0},c.end=f.end)),d=c,Object(j.arrayEach)(this.hot.selection.highlight.customSelections,(function(t){if(d.id===t.settings.id)return Object.assign(t.settings,n),d.id=t.settings.id,d.top=t.settings.top,d.bottom=t.settings.bottom,d.start=t.settings.start,d.end=t.settings.end,!1}))),this.hot.setCellMeta(t,e,"borders",Su(d)),this.insertBorderIntoSettings(d,r)}}},{key:"prepareBorderFromCustomAddedRange",value:function(t,e){var n=this,r=Math.min(t.to.row,this.hot.countRows()-1),o=Math.min(t.to.col,this.hot.countCols()-1);Object(ie.rangeEach)(t.from.row,r,(function(r){Object(ie.rangeEach)(t.from.col,o,(function(o){var l=ku(r,o),c=0;r===t.from.row&&Object(h.hasOwnProperty)(e,"top")&&(c+=1,l.top=e.top),r===t.to.row&&Object(h.hasOwnProperty)(e,"bottom")&&(c+=1,l.bottom=e.bottom),o===t.from.col&&Object(h.hasOwnProperty)(e,"start")&&(c+=1,l.start=e.start),o===t.to.col&&Object(h.hasOwnProperty)(e,"end")&&(c+=1,l.end=e.end),c>0&&(n.hot.setCellMeta(r,o,"borders",Su(l)),n.insertBorderIntoSettings(l))}))}))}},{key:"removeAllBorders",value:function(t,e){var n=Ou(t,e);this.spliceBorder(n),this.clearBordersFromSelectionSettings(n),this.clearNullCellRange(),this.hot.removeCellMeta(t,e,"borders")}},{key:"setBorder",value:function(t,e,n,r){var o=this.hot.getCellMeta(t,e).borders;o=o&&void 0!==o.border?Cu(o):ku(t,e),r?(o[n]={hide:!0},4===this.countHide(o)?this.removeAllBorders(t,e):(this.checkCustomSelectionsFromContextMenu(o,n,r)||this.insertBorderIntoSettings(o),this.hot.setCellMeta(t,e,"borders",Su(o)))):(o[n]={width:1,color:"#000"},this.checkCustomSelectionsFromContextMenu(o,n,r)||this.insertBorderIntoSettings(o),this.hot.setCellMeta(t,e,"borders",Su(o)))}},{key:"prepareBorder",value:function(t,e,n){var r=this;Object(j.arrayEach)(t,(function(t){var o=t.start,l=t.end;if(o.row===l.row&&o.col===l.col)"noBorders"===e?r.removeAllBorders(o.row,o.col):r.setBorder(o.row,o.col,e,n);else switch(e){case"noBorders":Object(ie.rangeEach)(o.col,l.col,(function(t){Object(ie.rangeEach)(o.row,l.row,(function(e){r.removeAllBorders(e,t)}))}));break;case"top":Object(ie.rangeEach)(o.col,l.col,(function(t){r.setBorder(o.row,t,e,n)}));break;case"bottom":Object(ie.rangeEach)(o.col,l.col,(function(t){r.setBorder(l.row,t,e,n)}));break;case"start":Object(ie.rangeEach)(o.row,l.row,(function(t){r.setBorder(t,o.col,e,n)}));break;case"end":Object(ie.rangeEach)(o.row,l.row,(function(t){r.setBorder(t,l.col,e,n)}))}}))}},{key:"createCustomBorders",value:function(t){var e=this;Object(j.arrayEach)(t,(function(t){var n=Cu(t);t.range?e.prepareBorderFromCustomAddedRange(t.range,n):e.prepareBorderFromCustomAdded(t.row,t.col,n)}))}},{key:"countHide",value:function(t){var e=[t.top,t.bottom,t.start,t.end];return Object(j.arrayReduce)(e,(function(t,e){var n=t;return e&&e.hide&&(n+=1),n}),0)}},{key:"clearBordersFromSelectionSettings",value:function(t){var e=Object(j.arrayMap)(this.hot.selection.highlight.customSelections,(function(t){return t.settings.id})).indexOf(t);e>-1&&this.hot.selection.highlight.customSelections[e].clear()}},{key:"clearNullCellRange",value:function(){var t=this;Object(j.arrayEach)(this.hot.selection.highlight.customSelections,(function(e,n){if(null===e.cellRange)return t.hot.selection.highlight.customSelections[n].destroy(),t.hot.selection.highlight.customSelections.splice(n,1),!1}))}},{key:"hideBorders",value:function(){var t=this;Object(j.arrayEach)(this.savedBorders,(function(e){t.clearBordersFromSelectionSettings(e.id),t.clearNullCellRange()}))}},{key:"spliceBorder",value:function(t){var e=Object(j.arrayMap)(this.savedBorders,(function(t){return t.id})).indexOf(t);e>-1&&this.savedBorders.splice(e,1)}},{key:"checkSavedBorders",value:function(t){var e=this,n=!1;return 4===this.countHide(t)?(this.spliceBorder(t.id),n=!0):Object(j.arrayEach)(this.savedBorders,(function(r,o){if(t.id===r.id)return e.savedBorders[o]=t,n=!0,!1})),n}},{key:"checkCustomSelectionsFromContextMenu",value:function(t,e,n){var r=!1;return Object(j.arrayEach)(this.hot.selection.highlight.customSelections,(function(o){if(t.id===o.settings.id)return Object(h.objectEach)(o.instanceBorders,(function(t){t.toggleHiddenClass(e,n)})),r=!0,!1})),r}},{key:"checkCustomSelections",value:function(t,e,n){var r=this.countHide(t),o=!1;return 4===r?(this.removeAllBorders(t.row,t.col),o=!0):Object(j.arrayEach)(this.hot.selection.highlight.customSelections,(function(r){if(t.id===r.settings.id)return r.visualCellRange=e,r.commit(),n&&Object(h.objectEach)(r.instanceBorders,(function(e){e.changeBorderStyle(n,t)})),o=!0,!1})),o}},{key:"changeBorderSettings",value:function(){var t=this.hot.getSettings()[Vu];if(Array.isArray(t)){var e=Object(h.deepClone)(t);this.checkSettingsCohesion(e),e.length||(this.savedBorders=e),this.createCustomBorders(e)}else void 0!==t&&this.createCustomBorders(this.savedBorders)}},{key:"checkSettingsCohesion",value:function(t){var e=t.some((function(t){return Object(R.isDefined)(t.left)||Object(R.isDefined)(t.right)})),n=function(t){return t.some((function(t){return Object(R.isDefined)(t.start)||Object(R.isDefined)(t.end)}))}(t);if(e&&n)throw new Error('The "left"/"right" and "start"/"end" options should not be used together. Please use only the option "start"/"end".');if(this.hot.isRtl()&&e)throw new Error('The "left"/"right" properties are not supported for RTL. Please use option "start"/"end".')}},{key:"onAfterContextMenuDefaultOptions",value:function(t){var e;this.hot.getSettings()[Vu]&&t.items.push({name:"---------"},{key:"borders",name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_BORDERS)},disabled:function(){return this.selection.isSelectedByCorner()},submenu:{items:[(e=this,{key:"borders:top",name:function(){var label=this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_BORDERS_TOP);return ju(this,"top")&&(label=Ru(label)),label},callback:function(t,n){var r=ju(this,"top");e.prepareBorder(n,"top",r)}}),Pu(this),Mu(this),_u(this),Tu(this)]}})}},{key:"onAfterInit",value:function(){this.changeBorderSettings()}},{key:"destroy",value:function(){Nu(Uu(l.prototype),"destroy",this).call(this)}}])&&Du(e.prototype,n),r&&Du(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function zu(t){return zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zu(t)}function Yu(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==zu(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==zu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===zu(o)?o:String(o)),n)}var r,o}function Gu(){return Gu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=qu(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Gu.apply(this,arguments)}function Ku(t,p){return Ku=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Ku(t,p)}function Xu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=qu(t);if(e){var o=qu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===zu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $u(t)}(this,n)}}function $u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qu(t){return qu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qu(t)}var Zu="dragToScroll",Ju=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ku(t,e)}(l,t);var e,n,r,o=Xu(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).eventManager=new $.a($u(e)),e.boundaries=null,e.callback=null,e.listening=!1,e}return e=l,r=[{key:"PLUGIN_KEY",get:function(){return Zu}},{key:"PLUGIN_PRIORITY",get:function(){return 100}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[Zu]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("afterOnCellMouseDown",(function(e){return t.setupListening(e)})),this.addHook("afterOnCellCornerMouseDown",(function(e){return t.setupListening(e)})),this.registerEvents(),Gu(qu(l.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),Gu(qu(l.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.unregisterEvents(),Gu(qu(l.prototype),"disablePlugin",this).call(this)}},{key:"setBoundaries",value:function(t){this.boundaries=t}},{key:"setCallback",value:function(t){this.callback=t}},{key:"check",value:function(t,e){var n=0,r=0;e<this.boundaries.top?r=e-this.boundaries.top:e>this.boundaries.bottom&&(r=e-this.boundaries.bottom),t<this.boundaries.left?n=t-this.boundaries.left:t>this.boundaries.right&&(n=t-this.boundaries.right),this.callback(n,r)}},{key:"listen",value:function(){this.listening=!0}},{key:"unlisten",value:function(){this.listening=!1}},{key:"isListening",value:function(){return this.listening}},{key:"registerEvents",value:function(){for(var t=this,e=this.hot.rootWindow;e;)this.eventManager.addEventListener(e.document,"contextmenu",(function(){return t.unlisten()})),this.eventManager.addEventListener(e.document,"mouseup",(function(){return t.unlisten()})),this.eventManager.addEventListener(e.document,"mousemove",(function(e){return t.onMouseMove(e)})),e=Object(c.getParentWindow)(e)}},{key:"unregisterEvents",value:function(){this.eventManager.clear()}},{key:"setupListening",value:function(t){if(!Object(f.isRightClick)(t)){var e=this.hot.view._wt.wtTable.holder;e!==this.hot.rootWindow&&(this.setBoundaries(e.getBoundingClientRect()),this.setCallback((function(t,n){t<0?e.scrollLeft-=50:t>0&&(e.scrollLeft+=50),n<0?e.scrollTop-=20:n>0&&(e.scrollTop+=20)})),this.listen())}}},{key:"onMouseMove",value:function(t){this.isListening()&&this.check(t.clientX,t.clientY)}},{key:"destroy",value:function(){Gu(qu(l.prototype),"destroy",this).call(this)}}])&&Yu(e.prototype,n),r&&Yu(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function Qu(t){return Qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qu(t)}function ts(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==Qu(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Qu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===Qu(o)?o:String(o)),n)}var r,o}function es(){return es="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=is(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},es.apply(this,arguments)}function ns(t,p){return ns=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},ns(t,p)}function rs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=is(t);if(e){var o=is(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Qu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return os(t)}(this,n)}}function os(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function is(t){return is=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},is(t)}lt.a.getSingleton().register("afterDropdownMenuDefaultOptions"),lt.a.getSingleton().register("beforeDropdownMenuShow"),lt.a.getSingleton().register("afterDropdownMenuShow"),lt.a.getSingleton().register("afterDropdownMenuHide"),lt.a.getSingleton().register("afterDropdownMenuExecute");var as="dropdownMenu",ls="changeType",us=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ns(t,e)}(l,t);var e,n,r,o=rs(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).eventManager=new $.a(os(e)),e.commandExecutor=new ia(e.hot),e.itemsFactory=null,e.menu=null,e.hot.addHook("afterGetColHeader",(function(col,t){return e.onAfterGetColHeader(col,t)})),e}return e=l,n=[{key:"isEnabled",value:function(){return this.hot.getSettings()[as]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){this.itemsFactory=new Aa(this.hot,l.DEFAULT_ITEMS);var e=this.hot.getSettings()[as],n={items:this.itemsFactory.getItems(e)};this.registerEvents(),"function"==typeof e.callback&&this.commandExecutor.setCommonCallback(e.callback),es(is(l.prototype),"enablePlugin",this).call(this),this.callOnPluginsReady((function(){t.hot.runHooks("afterDropdownMenuDefaultOptions",n),t.itemsFactory.setPredefinedItems(n.items);var r=t.itemsFactory.getItems(e);t.menu&&t.menu.destroy(),t.menu=new $a(t.hot,{className:"htDropdownMenu",keepInViewport:!0,container:e.uiContainer||t.hot.rootDocument.body}),t.hot.runHooks("beforeDropdownMenuSetItems",r),t.menu.setMenuItems(r),t.menu.addLocalHook("beforeOpen",(function(){return t.onMenuBeforeOpen()})),t.menu.addLocalHook("afterOpen",(function(){return t.onMenuAfterOpen()})),t.menu.addLocalHook("afterClose",(function(){return t.onMenuAfterClose()})),t.menu.addLocalHook("executeCommand",(function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.executeCommand).call.apply(e,[t].concat(r))})),Object(j.arrayEach)(r,(function(e){return t.commandExecutor.registerCommand(e.key,e)}))}))}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),es(is(l.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.close(),this.menu&&this.menu.destroy(),es(is(l.prototype),"disablePlugin",this).call(this)}},{key:"registerEvents",value:function(){var t=this;this.eventManager.addEventListener(this.hot.rootElement,"click",(function(e){return t.onTableClick(e)}))}},{key:"open",value:function(t){this.menu&&(this.menu.open(),t.width&&this.menu.setOffset("left",t.width),this.menu.setPosition(t))}},{key:"close",value:function(){this.menu&&this.menu.close()}},{key:"executeCommand",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=this.commandExecutor).execute.apply(e,[t].concat(r))}},{key:"setListening",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.menu.isOpened()&&(t?this.menu.hotMenu.listen():this.menu.hotMenu.unlisten())}},{key:"onTableClick",value:function(t){if(t.stopPropagation(),Object(c.hasClass)(t.target,ls)&&!this.menu.isOpened()){var e=0,n=0;if(this.hot.rootDocument!==this.menu.container.ownerDocument){var r=this.hot.rootWindow.frameElement.getBoundingClientRect();e=r.top,n=r.left}var rect=t.target.getBoundingClientRect();this.open({left:rect.left+n,top:rect.top+t.target.offsetHeight+3+e,width:rect.width,height:rect.height})}}},{key:"onAfterGetColHeader",value:function(col,t){var e=t.parentNode;if(e){var n=e.parentNode.childNodes,r=Array.prototype.indexOf.call(n,e);if(!(col<0||r!==n.length-1)){var o=t.querySelector(".".concat(ls));if(!this.enabled||!o)if(this.enabled){var button=this.hot.rootDocument.createElement("button");button.className=ls,button.type="button",button.onclick=function(){return!1},t.firstChild.insertBefore(button,t.firstChild.firstChild)}else o&&o.parentNode.removeChild(o)}}}},{key:"onMenuBeforeOpen",value:function(){this.hot.runHooks("beforeDropdownMenuShow",this)}},{key:"onMenuAfterOpen",value:function(){this.hot.runHooks("afterDropdownMenuShow",this)}},{key:"onMenuAfterClose",value:function(){this.hot.listen(),this.hot.runHooks("afterDropdownMenuHide",this)}},{key:"destroy",value:function(){this.close(),this.menu&&this.menu.destroy(),es(is(l.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return as}},{key:"PLUGIN_PRIORITY",get:function(){return 230}},{key:"PLUGIN_DEPS",get:function(){return["plugin:AutoColumnSize"]}},{key:"DEFAULT_ITEMS",get:function(){return[ua,sa,Ci,ya,Ci,la,Ci,ca,Ci,aa]}}],n&&ts(e.prototype,n),r&&ts(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function ss(t){return ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ss(t)}function cs(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return fs(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fs(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fs(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function hs(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==ss(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==ss(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===ss(o)?o:String(o)),n)}var r,o}us.SEPARATOR={name:Ci};var ds=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hot=e,this.options={}}var e,n,r;return e=t,(n=[{key:"setOptions",value:function(t){this.options=t}},{key:"getData",value:function(){var t=this,e=this._getDataRange(),n=e.startRow,r=e.startCol,o=e.endRow,l=e.endCol,c=this.options,data=[];return Object(ie.rangeEach)(n,o,(function(e){var n=[];!c.exportHiddenRows&&t._isHiddenRow(e)||(Object(ie.rangeEach)(r,l,(function(r){!c.exportHiddenColumns&&t._isHiddenColumn(r)||n.push(t.hot.getDataAtCell(e,r))})),data.push(n))})),data}},{key:"getRowHeaders",value:function(){var t=this,e=[];if(this.options.rowHeaders){var n=this._getDataRange(),r=n.startRow,o=n.endRow,l=this.hot.getRowHeader();Object(ie.rangeEach)(r,o,(function(n){!t.options.exportHiddenRows&&t._isHiddenRow(n)||e.push(l[n])}))}return e}},{key:"getColumnHeaders",value:function(){var t=this,e=[];if(this.options.columnHeaders){var n=this._getDataRange(),r=n.startCol,o=n.endCol,l=this.hot.getColHeader();Object(ie.rangeEach)(r,o,(function(n){!t.options.exportHiddenColumns&&t._isHiddenColumn(n)||e.push(l[n])}))}return e}},{key:"_getDataRange",value:function(){var t=this.hot.countCols()-1,e=this.hot.countRows()-1,n=cs(this.options.range,4),r=n[0],o=void 0===r?0:r,l=n[1],c=void 0===l?0:l,f=n[2],h=void 0===f?e:f,d=n[3],y=void 0===d?t:d;return{startRow:o=Math.max(o,0),startCol:c=Math.max(c,0),endRow:h=Math.min(h,e),endCol:y=Math.min(y,t)}}},{key:"_isHiddenRow",value:function(t){return this.hot.rowIndexMapper.isHidden(this.hot.toPhysicalRow(t))}},{key:"_isHiddenColumn",value:function(t){return this.hot.columnIndexMapper.isHidden(this.hot.toPhysicalColumn(t))}}])&&hs(e.prototype,n),r&&hs(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();n(660);function ps(t){return ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ps(t)}function ys(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==ps(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==ps(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===ps(o)?o:String(o)),n)}var r,o}var gs=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataProvider=e,this.options=this._mergeOptions(n),this.dataProvider.setOptions(this.options)}var e,n,r;return e=t,r=[{key:"DEFAULT_OPTIONS",get:function(){return{mimeType:"text/plain",fileExtension:"txt",filename:"Handsontable [YYYY]-[MM]-[DD]",encoding:"utf-8",bom:!1,columnHeaders:!1,rowHeaders:!1,exportHiddenColumns:!1,exportHiddenRows:!1,range:[]}}}],(n=[{key:"_mergeOptions",value:function(e){var n=Object(h.clone)(this.constructor.DEFAULT_OPTIONS),r=new Date;return n=Object(h.extend)(Object(h.clone)(t.DEFAULT_OPTIONS),n),(n=Object(h.extend)(n,e)).filename=Object(E.substitute)(n.filename,{YYYY:r.getFullYear(),MM:"".concat(r.getMonth()+1).padStart(2,"0"),DD:"".concat(r.getDate()).padStart(2,"0")}),n}}])&&ys(e.prototype,n),r&&ys(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),vs=gs;function bs(t){return bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bs(t)}function ms(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(input,t){if("object"!==bs(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==bs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(r,"string"),"symbol"===bs(o)?o:String(o)),n)}var r,o}function ws(t,p){return ws=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},ws(t,p)}function Os(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Cs(t);if(e){var o=Cs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===bs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Cs(t){return Cs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cs(t)}var Ss=String.fromCharCode(13),ks=String.fromCharCode(34),js=String.fromCharCode(10),Rs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ws(t,e)}(l,t);var e,n,r,o=Os(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),o.apply(this,arguments)}return e=l,n=[{key:"export",value:function(){var t=this,e=this.options,data=this.dataProvider.getData(),n=this.dataProvider.getColumnHeaders(),r=n.length>0,o=this.dataProvider.getRowHeaders(),l=o.length>0,c=e.bom?String.fromCharCode(65279):"";return r&&(n=Object(j.arrayMap)(n,(function(e){return t._escapeCell(e,!0)})),l&&(c+=e.columnDelimiter),c+=n.join(e.columnDelimiter),c+=e.rowDelimiter),Object(j.arrayEach)(data,(function(n,r){r>0&&(c+=e.rowDelimiter),l&&(c+=t._escapeCell(o[r])+e.columnDelimiter),c+=n.map((function(e){return t._escapeCell(e)})).join(e.columnDelimiter)})),c}},{key:"_escapeCell",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(R.stringify)(t);return""!==n&&(e||n.indexOf(Ss)>=0||n.indexOf(ks)>=0||n.indexOf(js)>=0||n.indexOf(this.options.columnDelimiter)>=0)&&(n=n.replace(new RegExp('"',"g"),'""'),n='"'.concat(n,'"')),n}}],r=[{key:"DEFAULT_OPTIONS",get:function(){return{mimeType:"text/csv",fileExtension:"csv",bom:!0,columnDelimiter:",",rowDelimiter:"\r\n"}}}],n&&ms(e.prototype,n),r&&ms(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(vs);function Es(t){return Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Es(t)}var Ps,Ms,_s,Ts=(Ps={},_s=Rs,(Ms=function(t){var e=function(input,t){if("object"!==Es(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Es(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Es(e)?e:String(e)}(Ms="csv"))in Ps?Object.defineProperty(Ps,Ms,{value:_s,enumerable:!0,configurable:!0,writable:!0}):Ps[Ms]=_s,Ps);function As(t){return As="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},As(t)}function Is(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xs(n.key),n)}}function xs(t){var e=function(input,t){if("object"!==As(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==As(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===As(e)?e:String(e)}function Ds(t,p){return Ds=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Ds(t,p)}function Ns(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Hs(t);if(e){var o=Hs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===As(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Hs(t){return Hs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hs(t)}var Ls=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ds(t,e)}(l,t);var e,n,r,o=Ns(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),o.apply(this,arguments)}return e=l,n=[{key:"isEnabled",value:function(){return!0}},{key:"exportAsString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._createTypeFormatter(t,e).export()}},{key:"exportAsBlob",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._createBlob(this._createTypeFormatter(t,e))}},{key:"downloadFile",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.hot,r=n.rootDocument,o=n.rootWindow,l=this._createTypeFormatter(t,e),c=this._createBlob(l),f=o.URL||o.webkitURL,a=r.createElement("a"),h="".concat(l.options.filename,".").concat(l.options.fileExtension);if(void 0!==a.download){var d=f.createObjectURL(c);a.style.display="none",a.setAttribute("href",d),a.setAttribute("download",h),r.body.appendChild(a),a.dispatchEvent(new MouseEvent("click")),r.body.removeChild(a),setTimeout((function(){f.revokeObjectURL(d)}),100)}else navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob(c,h)}},{key:"_createTypeFormatter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ts[t])throw new Error('Export format type "'.concat(t,'" is not supported.'));return function(t,e,n){return"function"==typeof Ts[t]?new Ts[t](e,n):null}(t,new ds(this.hot),e)}},{key:"_createBlob",value:function(t){var e=null;return"undefined"!=typeof Blob&&(e=new Blob([t.export()],{type:"".concat(t.options.mimeType,";charset=").concat(t.options.encoding)})),e}}],r=[{key:"PLUGIN_KEY",get:function(){return"exportFile"}},{key:"PLUGIN_PRIORITY",get:function(){return 240}}],n&&Is(e.prototype,n),r&&Is(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);n(94);function Bs(t){return Bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bs(t)}function Us(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fs(n.key),n)}}function Fs(t){var e=function(input,t){if("object"!==Bs(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Bs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Bs(e)?e:String(e)}var Vs=function(){function t(e,n){var r=n.id,o=n.stateless,l=void 0===o||o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hot=e,this.id=r,this.elements=[],this.hidden=!1,this.stateId="Filters.component.".concat(this.id),this.state=l?null:this.hot.columnIndexMapper.registerMap(this.stateId,new Xr.a)}var e,n,r;return e=t,(n=[{key:"reset",value:function(){Object(j.arrayEach)(this.elements,(function(t){return t.reset()}))}},{key:"hide",value:function(){this.hidden=!0}},{key:"show",value:function(){this.hidden=!1}},{key:"isHidden",value:function(){return null===this.hot||this.hidden}},{key:"restoreState",value:function(t){this.state&&this.setState(this.state.getValueAtIndex(t))}},{key:"setState",value:function(){throw new Error("The state setting logic is not implemented")}},{key:"saveState",value:function(t){this.state&&this.state.setValueAtIndex(t,this.getState())}},{key:"getState",value:function(){throw new Error("The state gathering logic is not implemented")}},{key:"destroy",value:function(){this.hot.columnIndexMapper.unregisterMap(this.stateId),this.clearLocalHooks(),Object(j.arrayEach)(this.elements,(function(t){return t.destroy()})),this.state=null,this.elements=null,this.hot=null}}])&&Us(e.prototype,n),r&&Us(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object(h.mixin)(Vs,Ii.a);var Ws=Vs,zs={};function Ys(t,e){if(!zs[t])throw Error('Filter condition "'.concat(t,'" does not exist.'));var n=zs[t],r=n.condition,o=n.descriptor,l=e;return o.inputValuesDecorator&&(l=o.inputValuesDecorator(l)),function(t){return r.apply(t.meta.instance,[].concat([t],[l]))}}function Gs(t){if(!zs[t])throw Error('Filter condition "'.concat(t,'" does not exist.'));return zs[t].descriptor}function Ks(t,e,n){n.key=t,zs[t]={condition:e,descriptor:n}}var Xs="none";Ks(Xs,(function(){return!0}),{name:Bi.FILTERS_CONDITIONS_NONE,inputsCount:0,showOperators:!1});var $s="empty";Ks($s,(function(t){return Object(R.isEmpty)(t.value)}),{name:Bi.FILTERS_CONDITIONS_EMPTY,inputsCount:0,showOperators:!0});var qs="not_empty";function Zs(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return Js(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Js(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Js(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}Ks(qs,(function(t,e){return!Ys($s,e)(t)}),{name:Bi.FILTERS_CONDITIONS_NOT_EMPTY,inputsCount:0,showOperators:!0});var Qs="eq";Ks(Qs,(function(t,e){var n=Zs(e,1)[0];return Object(R.stringify)(t.value).toLocaleLowerCase(t.meta.locale)===Object(R.stringify)(n)}),{name:Bi.FILTERS_CONDITIONS_EQUAL,inputsCount:1,showOperators:!0});var tc="neq";function ec(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return nc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nc(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nc(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}Ks(tc,(function(t,e){return!Ys(Qs,e)(t)}),{name:Bi.FILTERS_CONDITIONS_NOT_EQUAL,inputsCount:1,showOperators:!0});function rc(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return oc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oc(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oc(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}Ks("gt",(function(t,e){var n=ec(e,1)[0];return"numeric"===t.meta.type&&(n=parseFloat(n,10)),t.value>n}),{name:Bi.FILTERS_CONDITIONS_GREATER_THAN,inputsCount:1,showOperators:!0});function ic(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return ac(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ac(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ac(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}Ks("gte",(function(t,e){var n=rc(e,1)[0];return"numeric"===t.meta.type&&(n=parseFloat(n,10)),t.value>=n}),{name:Bi.FILTERS_CONDITIONS_GREATER_THAN_OR_EQUAL,inputsCount:1,showOperators:!0});function lc(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return uc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uc(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uc(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}Ks("lt",(function(t,e){var n=ic(e,1)[0];return"numeric"===t.meta.type&&(n=parseFloat(n,10)),t.value<n}),{name:Bi.FILTERS_CONDITIONS_LESS_THAN,inputsCount:1,showOperators:!0});function sc(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return cc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cc(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cc(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}Ks("lte",(function(t,e){var n=lc(e,1)[0];return"numeric"===t.meta.type&&(n=parseFloat(n,10)),t.value<=n}),{name:Bi.FILTERS_CONDITIONS_LESS_THAN_OR_EQUAL,inputsCount:1,showOperators:!0});var fc="date_after";function hc(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return dc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dc(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dc(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}Ks(fc,(function(t,e){var n=sc(e,1)[0],r=K(t.value,t.meta.dateFormat),o=K(n,t.meta.dateFormat);return!(!r.isValid()||!o.isValid())&&r.diff(o)>=0}),{name:Bi.FILTERS_CONDITIONS_AFTER,inputsCount:1,showOperators:!0});var pc="date_before";function yc(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return gc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gc(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gc(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}Ks(pc,(function(t,e){var n=hc(e,1)[0],r=K(t.value,t.meta.dateFormat),o=K(n,t.meta.dateFormat);return!(!r.isValid()||!o.isValid())&&r.diff(o)<=0}),{name:Bi.FILTERS_CONDITIONS_BEFORE,inputsCount:1,showOperators:!0});var vc="between";Ks(vc,(function(t,e){var n=yc(e,2),r=n[0],o=n[1];if("numeric"===t.meta.type){var l=parseFloat(r,10),c=parseFloat(o,10);r=Math.min(l,c),o=Math.max(l,c)}else if("date"===t.meta.type){var f=Ys(pc,[o]),h=Ys(fc,[r]);return f(t)&&h(t)}return t.value>=r&&t.value<=o}),{name:Bi.FILTERS_CONDITIONS_BETWEEN,inputsCount:2,showOperators:!0});var bc="not_between";function mc(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return wc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wc(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wc(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}Ks(bc,(function(t,e){return!Ys(vc,e)(t)}),{name:Bi.FILTERS_CONDITIONS_NOT_BETWEEN,inputsCount:2,showOperators:!0});var Oc="begins_with";Ks(Oc,(function(t,e){var n=mc(e,1)[0];return Object(R.stringify)(t.value).toLocaleLowerCase(t.meta.locale).startsWith(Object(R.stringify)(n))}),{name:Bi.FILTERS_CONDITIONS_BEGINS_WITH,inputsCount:1,showOperators:!0});n(311);function Cc(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return Sc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sc(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sc(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var kc="ends_with";function jc(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return Rc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rc(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rc(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}Ks(kc,(function(t,e){var n=Cc(e,1)[0];return Object(R.stringify)(t.value).toLocaleLowerCase(t.meta.locale).endsWith(Object(R.stringify)(n))}),{name:Bi.FILTERS_CONDITIONS_ENDS_WITH,inputsCount:1,showOperators:!0});var Ec="contains";Ks(Ec,(function(t,e){var n=jc(e,1)[0];return Object(R.stringify)(t.value).toLocaleLowerCase(t.meta.locale).indexOf(Object(R.stringify)(n))>=0}),{name:Bi.FILTERS_CONDITIONS_CONTAINS,inputsCount:1,showOperators:!0});var Pc="not_contains";Ks(Pc,(function(t,e){return!Ys(Ec,e)(t)}),{name:Bi.FILTERS_CONDITIONS_NOT_CONTAIN,inputsCount:1,showOperators:!0});var Mc="date_tomorrow";Ks(Mc,(function(t){var e=K(t.value,t.meta.dateFormat);return!!e.isValid()&&e.isSame(K().subtract(-1,"days").startOf("day"),"d")}),{name:Bi.FILTERS_CONDITIONS_TOMORROW,inputsCount:0});var _c="date_today";Ks(_c,(function(t){var e=K(t.value,t.meta.dateFormat);return!!e.isValid()&&e.isSame(K().startOf("day"),"d")}),{name:Bi.FILTERS_CONDITIONS_TODAY,inputsCount:0});var Tc,Ac="date_yesterday";function Ic(t){return Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ic(t)}function xc(t,e,n){return(e=function(t){var e=function(input,t){if("object"!==Ic(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Ic(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Ic(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Ks(Ac,(function(t){var e=K(t.value,t.meta.dateFormat);return!!e.isValid()&&e.isSame(K().subtract(1,"days").startOf("day"),"d")}),{name:Bi.FILTERS_CONDITIONS_YESTERDAY,inputsCount:0});var Dc="text",Nc=(xc(Tc={},"numeric",[Xs,Ci,$s,qs,Ci,Qs,tc,Ci,"gt","gte","lt","lte",vc,bc]),xc(Tc,Dc,[Xs,Ci,$s,qs,Ci,Qs,tc,Ci,Oc,kc,Ci,Ec,Pc]),xc(Tc,"date",[Xs,Ci,$s,qs,Ci,Qs,tc,Ci,pc,fc,vc,Ci,Mc,_c,Ac]),Tc);function Hc(t){return Hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hc(t)}function Lc(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bc(n.key),n)}}function Bc(t){var e=function(input,t){if("object"!==Hc(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Hc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Hc(e)?e:String(e)}var Uc="built",Fc="building",Vc=["click","input","keydown","keypress","keyup","focus","blur","change"],Wc=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hot=e,this.eventManager=new $.a(this),this.options=Object(h.extend)(t.DEFAULTS,n),this._element=this.hot.rootDocument.createElement(this.options.wrapIt?"div":this.options.tagName),this.buildState=null}var e,n,r;return e=t,n=[{key:"setValue",value:function(t){this.options.value=t,this.update()}},{key:"getValue",value:function(){return this.options.value}},{key:"element",get:function(){return this.buildState===Fc?this._element:this.buildState===Uc?(this.update(),this._element):(this.buildState=Fc,this.build(),this.buildState=Uc,this._element)}},{key:"isBuilt",value:function(){return this.buildState===Uc}},{key:"translateIfPossible",value:function(t){return"string"==typeof t&&t.startsWith(Bi.FILTERS_NAMESPACE)?this.hot.getTranslatedPhrase(t):t}},{key:"build",value:function(){var t=this,e=function(element,e){t.eventManager.addEventListener(element,e,(function(n){return t.runLocalHooks(e,n,t)}))};if(this.buildState||(this.buildState=Fc),this.options.className&&Object(c.addClass)(this._element,this.options.className),this.options.children.length)Object(j.arrayEach)(this.options.children,(function(element){return t._element.appendChild(element.element)}));else if(this.options.wrapIt){var element=this.hot.rootDocument.createElement(this.options.tagName);Object(h.objectEach)(this.options,(function(e,n){void 0!==element[n]&&"className"!==n&&"tagName"!==n&&"children"!==n&&(element[n]=t.translateIfPossible(e))})),this._element.appendChild(element),Object(j.arrayEach)(Vc,(function(t){return e(element,t)}))}else Object(j.arrayEach)(Vc,(function(n){return e(t._element,n)}))}},{key:"update",value:function(){}},{key:"reset",value:function(){this.options.value="",this.update()}},{key:"show",value:function(){this.element.style.display=""}},{key:"hide",value:function(){this.element.style.display="none"}},{key:"focus",value:function(){}},{key:"destroy",value:function(){this.eventManager.destroy(),this.eventManager=null,this.hot=null,this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null}}],r=[{key:"DEFAULTS",get:function(){return Object(h.clone)({className:"",value:"",tagName:"div",children:[],wrapIt:!0})}}],n&&Lc(e.prototype,n),r&&Lc(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object(h.mixin)(Wc,Ii.a);var zc=Wc;function Yc(t){return Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yc(t)}function Gc(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kc(n.key),n)}}function Kc(t){var e=function(input,t){if("object"!==Yc(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Yc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Yc(e)?e:String(e)}function Xc(){return Xc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Jc(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Xc.apply(this,arguments)}function $c(t,p){return $c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},$c(t,p)}function qc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jc(t);if(e){var o=Jc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Yc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Zc(t)}(this,n)}}function Zc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jc(t){return Jc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jc(t)}var Qc=new WeakMap,tf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$c(t,e)}(l,t);var e,n,r,o=qc(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n=o.call(this,t,Object(h.extend)(l.DEFAULTS,e)),Qc.set(Zc(n),{}),n.registerHooks(),n}return e=l,r=[{key:"DEFAULTS",get:function(){return Object(h.clone)({placeholder:"",type:"text",tagName:"input"})}}],(n=[{key:"registerHooks",value:function(){var t=this;this.addLocalHook("click",(function(){return t.onClick()})),this.addLocalHook("keyup",(function(e){return t.onKeyup(e)}))}},{key:"build",value:function(){Xc(Jc(l.prototype),"build",this).call(this);var t=Qc.get(this),e=this.hot.rootDocument.createElement("div");t.input=this._element.firstChild,Object(c.addClass)(this._element,"htUIInput"),Object(c.addClass)(e,"htUIInputIcon"),this._element.appendChild(e),this.update()}},{key:"update",value:function(){if(this.isBuilt()){var input=Qc.get(this).input;input.type=this.options.type,input.placeholder=this.translateIfPossible(this.options.placeholder),input.value=this.translateIfPossible(this.options.value)}}},{key:"focus",value:function(){this.isBuilt()&&Qc.get(this).input.focus()}},{key:"onClick",value:function(){}},{key:"onKeyup",value:function(t){this.options.value=t.target.value}}])&&Gc(e.prototype,n),r&&Gc(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(zc);function ef(t){return ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(t)}function nf(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rf(n.key),n)}}function rf(t){var e=function(input,t){if("object"!==ef(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==ef(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===ef(e)?e:String(e)}function of(){return of="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=sf(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},of.apply(this,arguments)}function af(t,p){return af=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},af(t,p)}function lf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=sf(t);if(e){var o=sf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===ef(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return uf(t)}(this,n)}}function uf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sf(t){return sf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sf(t)}var cf=new WeakMap,ff=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&af(t,e)}(l,t);var e,n,r,o=lf(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n=o.call(this,t,Object(h.extend)(l.DEFAULTS,e)),cf.set(uf(n),{}),n.menu=null,n.items=[],n.registerHooks(),n}return e=l,r=[{key:"DEFAULTS",get:function(){return Object(h.clone)({className:"htUISelect",wrapIt:!1})}}],(n=[{key:"registerHooks",value:function(){var t=this;this.addLocalHook("click",(function(){return t.onClick()}))}},{key:"setItems",value:function(t){this.items=this.translateNames(t),this.menu&&this.menu.setMenuItems(this.items)}},{key:"translateNames",value:function(t){var e=this;return Object(j.arrayEach)(t,(function(t){t.name=e.translateIfPossible(t.name)})),t}},{key:"build",value:function(){var t=this;of(sf(l.prototype),"build",this).call(this),this.menu=new $a(this.hot,{className:"htSelectUI htFiltersConditionsMenu",keepInViewport:!1,standalone:!0,container:this.options.menuContainer}),this.menu.setMenuItems(this.items);var caption=new zc(this.hot,{className:"htUISelectCaption"}),e=new zc(this.hot,{className:"htUISelectDropdown"}),n=cf.get(this);n.caption=caption,n.captionElement=caption.element,n.dropdown=e,Object(j.arrayEach)([caption,e],(function(element){return t._element.appendChild(element.element)})),this.menu.addLocalHook("select",(function(e){return t.onMenuSelect(e)})),this.menu.addLocalHook("afterClose",(function(){return t.onMenuClosed()})),this.update()}},{key:"update",value:function(){var t;this.isBuilt()&&(t=this.options.value?this.options.value.name:this.menu.hot.getTranslatedPhrase(Bi.FILTERS_CONDITIONS_NONE),cf.get(this).captionElement.textContent=t,of(sf(l.prototype),"update",this).call(this))}},{key:"openOptions",value:function(){var rect=this.element.getBoundingClientRect();this.menu&&(this.menu.open(),this.menu.setPosition({left:this.hot.isLtr()?rect.left-5:rect.left-31,top:rect.top-1,width:rect.width,height:rect.height}))}},{key:"closeOptions",value:function(){this.menu&&this.menu.close()}},{key:"onMenuSelect",value:function(t){t.name!==Ci&&(this.options.value=t,this.update(),this.runLocalHooks("select",this.options.value))}},{key:"onMenuClosed",value:function(){this.runLocalHooks("afterClose")}},{key:"onClick",value:function(){this.openOptions()}},{key:"destroy",value:function(){this.menu&&(this.menu.destroy(),this.menu=null);var t=cf.get(this),caption=t.caption,e=t.dropdown;caption&&caption.destroy(),e&&e.destroy(),of(sf(l.prototype),"destroy",this).call(this)}}])&&nf(e.prototype,n),r&&nf(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(zc);function hf(t){return hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hf(t)}function df(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pf(n.key),n)}}function pf(t){var e=function(input,t){if("object"!==hf(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==hf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===hf(e)?e:String(e)}function yf(){return yf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=bf(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},yf.apply(this,arguments)}function gf(t,p){return gf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},gf(t,p)}function vf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=bf(t);if(e){var o=bf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===hf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function bf(t){return bf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bf(t)}var mf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gf(t,e)}(l,t);var e,n,r,o=vf(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=o.call(this,t,{id:e.id,stateless:!1})).name=e.name,n.addSeparator=e.addSeparator,n.elements.push(new ff(n.hot,{menuContainer:e.menuContainer})),n.elements.push(new tf(n.hot,{placeholder:Bi.FILTERS_BUTTONS_PLACEHOLDER_VALUE})),n.elements.push(new tf(n.hot,{placeholder:Bi.FILTERS_BUTTONS_PLACEHOLDER_SECOND_VALUE})),n.registerHooks(),n}return e=l,n=[{key:"registerHooks",value:function(){var t=this;this.getSelectElement().addLocalHook("select",(function(e){return t.onConditionSelect(e)})),this.getSelectElement().addLocalHook("afterClose",(function(){return t.onSelectUIClosed()})),Object(j.arrayEach)(this.getInputElements(),(function(input){input.addLocalHook("keydown",(function(e){return t.onInputKeyDown(e)}))}))}},{key:"setState",value:function(t){var e=this;if(this.reset(),t){var n=Object(h.clone)(t.command);n.name.startsWith(Bi.FILTERS_CONDITIONS_NAMESPACE)&&(n.name=this.hot.getTranslatedPhrase(n.name)),this.getSelectElement().setValue(n),Object(j.arrayEach)(t.args,(function(t,r){if(r>n.inputsCount-1)return!1;var element=e.getInputElement(r);element.setValue(t),element[n.inputsCount>r?"show":"hide"](),r||setTimeout((function(){return element.focus()}),10)}))}}},{key:"getState",value:function(){var t=this.getSelectElement().getValue()||Gs(Xs),e=[];return Object(j.arrayEach)(this.getInputElements(),(function(element,n){t.inputsCount>n&&e.push(element.getValue())})),{command:t,args:e}}},{key:"updateState",value:function(t,e){var n=Gs(t?t.name:Xs);this.state.setValueAtIndex(e,{command:n,args:t?t.args:[]}),t||Object(j.arrayEach)(this.getInputElements(),(function(element){return element.setValue(null)}))}},{key:"getSelectElement",value:function(){return this.elements.filter((function(element){return element instanceof ff}))[0]}},{key:"getInputElement",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.getInputElements()[t]}},{key:"getInputElements",value:function(){return this.elements.filter((function(element){return element instanceof tf}))}},{key:"getMenuItemDescriptor",value:function(){var t=this;return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:function(){return t.isHidden()},renderer:function(e,n,r,col,o,l){Object(c.addClass)(n.parentNode,"htFiltersMenuCondition"),t.addSeparator&&Object(c.addClass)(n.parentNode,"border");var label=t.hot.rootDocument.createElement("div");return Object(c.addClass)(label,"htFiltersMenuLabel"),label.textContent=l,n.appendChild(label),n.parentNode.hasAttribute("ghost-table")||Object(j.arrayEach)(t.elements,(function(t){return n.appendChild(t.element)})),n}}}},{key:"reset",value:function(){var t=this.hot.getPlugin("filters").getSelectedColumn(),e=[Gs(Xs)];if(null!==t){var n=t.visualIndex;e=function(t){var e=[],n=t;return Nc[n]||(n=Dc),Object(j.arrayEach)(Nc[n],(function(t){var option;option=t===Ci?{name:Ci}:Object(h.clone)(Gs(t)),e.push(option)})),e}(this.hot.getDataType(0,n,this.hot.countRows(),n))}Object(j.arrayEach)(this.getInputElements(),(function(element){return element.hide()})),this.getSelectElement().setItems(e),yf(bf(l.prototype),"reset",this).call(this),this.getSelectElement().setValue(e[0])}},{key:"onConditionSelect",value:function(t){Object(j.arrayEach)(this.getInputElements(),(function(element,e){element[t.inputsCount>e?"show":"hide"](),0===e&&setTimeout((function(){return element.focus()}),10)})),this.runLocalHooks("change",t)}},{key:"onSelectUIClosed",value:function(){this.runLocalHooks("afterClose")}},{key:"onInputKeyDown",value:function(t){Object(P.isKey)(t.keyCode,"ENTER")?(this.runLocalHooks("accept"),Object(f.stopImmediatePropagation)(t)):Object(P.isKey)(t.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),Object(f.stopImmediatePropagation)(t))}}],n&&df(e.prototype,n),r&&df(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Ws),wf=mf,Of={};function Cf(t,e,n){Of[t]={name:e,func:n}}var Sf="conjunction",kf=Bi.FILTERS_LABELS_CONJUNCTION;Cf(Sf,kf,(function(t,e){return t.every((function(t){return t.func(e)}))}));var jf="disjunction",Rf=Bi.FILTERS_LABELS_DISJUNCTION;Cf(jf,Rf,(function(t,e){return t.some((function(t){return t.func(e)}))}));var Ef="disjunctionWithExtraCondition",Pf=Bi.FILTERS_LABELS_DISJUNCTION;function Mf(t){return Mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mf(t)}function _f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tf(n.key),n)}}function Tf(t){var e=function(input,t){if("object"!==Mf(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Mf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Mf(e)?e:String(e)}function Af(){return Af="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Nf(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Af.apply(this,arguments)}function If(t,p){return If=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},If(t,p)}function xf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Nf(t);if(e){var o=Nf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Mf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Df(t)}(this,n)}}function Df(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nf(t){return Nf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nf(t)}Cf(Ef,Pf,(function(t,e){if(t.length<3)throw Error("Operation doesn't work on less then three conditions.");return t.slice(0,t.length-1).some((function(t){return t.func(e)}))&&t[t.length-1].func(e)}));var Hf,Lf=new WeakMap,Bf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&If(t,e)}(l,t);var e,n,r,o=xf(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n=o.call(this,t,Object(h.extend)(l.DEFAULTS,e)),Lf.set(Df(n),{}),n}return e=l,n=[{key:"build",value:function(){Af(Nf(l.prototype),"build",this).call(this);var t=Lf.get(this);t.input=this._element.firstChild;var label=this.hot.rootDocument.createElement("label");label.textContent=this.translateIfPossible(this.options.label.textContent),label.htmlFor=this.translateIfPossible(this.options.label.htmlFor),t.label=label,this._element.appendChild(label),this.update()}},{key:"update",value:function(){if(this.isBuilt()){var t=Lf.get(this);t.input.checked=this.options.checked,t.label.textContent=this.translateIfPossible(this.options.label.textContent)}}},{key:"isChecked",value:function(){return this.options.checked}},{key:"setChecked",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.options.checked=t,this.update()}},{key:"focus",value:function(){this.isBuilt()&&Lf.get(this).input.focus()}}],r=[{key:"DEFAULTS",get:function(){return Object(h.clone)({type:"radio",tagName:"input",className:"htUIRadio",label:{}})}}],n&&_f(e.prototype,n),r&&_f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(zc),Uf=Bf;function Ff(t){return Ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ff(t)}function Vf(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wf(n.key),n)}}function Wf(t){var e=function(input,t){if("object"!==Ff(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Ff(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Ff(e)?e:String(e)}function zf(t,p){return zf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},zf(t,p)}function Yf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Gf(t);if(e){var o=Gf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Ff(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Gf(t){return Gf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gf(t)}var Kf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zf(t,e)}(l,t);var e,n,r,o=Yf(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=o.call(this,t,{id:e.id,stateless:!1})).name=e.name,n.buildOperatorsElement(),n}return e=l,n=[{key:"getMenuItemDescriptor",value:function(){var t=this;return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:function(){return t.isHidden()},renderer:function(e,n){return Object(c.addClass)(n.parentNode,"htFiltersMenuOperators"),n.parentNode.hasAttribute("ghost-table")||Object(j.arrayEach)(t.elements,(function(t){return n.appendChild(t.element)})),n}}}},{key:"buildOperatorsElement",value:function(){var t=this,e=[Sf,jf];Object(j.arrayEach)(e,(function(n){var r,o=new Uf(t.hot,{name:"operator",label:{htmlFor:n,textContent:(r=n,Of[r].name)},value:n,checked:n===e[0],id:n});o.addLocalHook("change",(function(e){return t.onRadioInputChange(e)})),t.elements.push(o)}))}},{key:"setChecked",value:function(t){if(this.elements.length<t)throw Error(Object(ui.a)(Hf||(e=["Radio button with index "," doesn't exist."],n||(n=e.slice(0)),Hf=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))),t));var e,n;Object(j.arrayEach)(this.elements,(function(element,e){element.setChecked(e===t)}))}},{key:"getActiveOperationId",value:function(){var t=this.elements.find((function(element){return element instanceof Uf&&element.isChecked()}));return t?t.getValue():Sf}},{key:"getState",value:function(){return this.getActiveOperationId()}},{key:"setState",value:function(t){this.reset(),t&&this.getActiveOperationId()!==t&&Object(j.arrayEach)(this.elements,(function(element){element.setChecked(element.getValue()===t)}))}},{key:"updateState",value:function(){var t=arguments.length>1?arguments[1]:void 0,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sf;e===Ef&&(e=jf),this.state.setValueAtIndex(t,e)}},{key:"reset",value:function(){this.setChecked(0)}},{key:"onRadioInputChange",value:function(t){this.setState(t.target.value)}}],n&&Vf(e.prototype,n),r&&Vf(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Ws),Xf=Kf;Object(Fe.getComparisonFunction)();function $f(t,e){var n=t;return""===n&&(n="(".concat(e,")")),n}var qf=new Set([1]).has(1),Zf=qf&&"function"==typeof Array.from;function Jf(t){var e=t;return qf&&(e=new Set(e)),function(t){return qf?e.has(t):!!~e.indexOf(t)}}function Qf(t){return null==t?"":t}function eh(t){var e=t;return e=(e=Zf?Array.from(new Set(e)):Object(j.arrayUnique)(e)).sort((function(a,b){return"number"==typeof a&&"number"==typeof b?a-b:a===b?0:a>b?1:-1}))}function nh(base,t,e,n){var r,o=[],l=base===t;return l||(r=Jf(t)),Object(j.arrayEach)(base,(function(t){var c=!1;(l||r(t))&&(c=!0);var f={checked:c,value:t,visualValue:$f(t,e)};n&&n(f),o.push(f)})),o}var rh=n(737);n(432);function oh(t){return oh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oh(t)}function ih(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ah(n.key),n)}}function ah(t){var e=function(input,t){if("object"!==oh(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==oh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===oh(e)?e:String(e)}function lh(){return lh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=fh(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},lh.apply(this,arguments)}function uh(t,p){return uh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},uh(t,p)}function sh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=fh(t);if(e){var o=fh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===oh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ch(t)}(this,n)}}function ch(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fh(t){return fh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fh(t)}var hh=new WeakMap,dh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uh(t,e)}(l,t);var e,n,r,o=sh(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n=o.call(this,t,Object(h.extend)(l.DEFAULTS,e)),hh.set(ch(n),{}),n}return e=l,r=[{key:"DEFAULTS",get:function(){return Object(h.clone)({href:"#",tagName:"a"})}}],(n=[{key:"build",value:function(){lh(fh(l.prototype),"build",this).call(this),hh.get(this).link=this._element.firstChild}},{key:"update",value:function(){this.isBuilt()&&(hh.get(this).link.textContent=this.translateIfPossible(this.options.textContent))}}])&&ih(e.prototype,n),r&&ih(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(zc);function ph(t){return ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ph(t)}function yh(t){return function(t){if(Array.isArray(t))return gh(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return gh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gh(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gh(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function vh(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bh(n.key),n)}}function bh(t){var e=function(input,t){if("object"!==ph(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==ph(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===ph(e)?e:String(e)}function mh(){return mh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Sh(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},mh.apply(this,arguments)}function wh(t,p){return wh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},wh(t,p)}function Oh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Sh(t);if(e){var o=Sh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===ph(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ch(t)}(this,n)}}function Ch(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sh(t){return Sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sh(t)}var kh=new WeakMap,jh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wh(t,e)}(l,t);var e,n,r,o=Oh(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n=o.call(this,t,Object(h.extend)(l.DEFAULTS,e)),kh.set(Ch(n),{}),n.searchInput=new tf(n.hot,{placeholder:Bi.FILTERS_BUTTONS_PLACEHOLDER_SEARCH,className:"htUIMultipleSelectSearch"}),n.selectAllUI=new dh(n.hot,{textContent:Bi.FILTERS_BUTTONS_SELECT_ALL,className:"htUISelectAll"}),n.clearAllUI=new dh(n.hot,{textContent:Bi.FILTERS_BUTTONS_CLEAR,className:"htUIClearAll"}),n.items=[],n.itemsBox=null,n.registerHooks(),n}return e=l,n=[{key:"registerHooks",value:function(){var t=this;this.searchInput.addLocalHook("keydown",(function(e){return t.onInputKeyDown(e)})),this.searchInput.addLocalHook("input",(function(e){return t.onInput(e)})),this.selectAllUI.addLocalHook("click",(function(e){return t.onSelectAllClick(e)})),this.clearAllUI.addLocalHook("click",(function(e){return t.onClearAllClick(e)}))}},{key:"setItems",value:function(t){this.items=t,this.itemsBox&&this.itemsBox.loadData(this.items)}},{key:"setLocale",value:function(t){this.locale=t}},{key:"getLocale",value:function(){return this.locale}},{key:"getItems",value:function(){return yh(this.items)}},{key:"getValue",value:function(){return t=this.items,e=[],Object(j.arrayEach)(t,(function(t){t.checked&&e.push(t.value)})),e;var t,e}},{key:"isSelectedAllValues",value:function(){return this.items.length===this.getValue().length}},{key:"build",value:function(){var t=this;mh(Sh(l.prototype),"build",this).call(this);var e=this.hot.rootDocument,n=e.createElement("div"),r=new zc(this.hot,{className:"htUISelectionControls",children:[this.selectAllUI,this.clearAllUI]});this._element.appendChild(this.searchInput.element),this._element.appendChild(r.element),this._element.appendChild(n);var o=function(n){t._element&&(t.itemsBox&&t.itemsBox.destroy(),Object(c.addClass)(n,"htUIMultipleSelectHot"),t.itemsBox=new t.hot.constructor(n,{data:t.items,columns:[{data:"checked",type:"checkbox",label:{property:"visualValue",position:"after"}}],beforeRenderer:function(t,e,col,n,r,o){t.title=o.instance.getDataAtRowProp(e,o.label.property)},maxCols:1,autoWrapCol:!0,height:110,colWidths:function(){return t.itemsBox.container.scrollWidth-Object(c.getScrollbarWidth)(e)},copyPaste:!1,disableVisualSelection:"area",fillHandle:!1,fragmentSelection:"cell",tabMoves:{row:1,col:0},layoutDirection:t.hot.isRtl()?"rtl":"ltr"}),t.itemsBox.init(),t.itemsBox.getShortcutManager().getContext("grid").addShortcut({keys:[["Escape"]],callback:function(e){t.runLocalHooks("keydown",e,t)},group:"multipleSelect.itemBox"}))};o(n),setTimeout((function(){return o(n)}),100)}},{key:"reset",value:function(){this.searchInput.reset(),this.selectAllUI.reset(),this.clearAllUI.reset()}},{key:"update",value:function(){var t,e,n;this.isBuilt()&&(this.itemsBox.loadData((t=this.items,e=this.options.value,n=Jf(e),Object(j.arrayMap)(t,(function(t){return t.checked=n(t.value),t})))),mh(Sh(l.prototype),"update",this).call(this))}},{key:"destroy",value:function(){this.itemsBox&&this.itemsBox.destroy(),this.searchInput.destroy(),this.clearAllUI.destroy(),this.selectAllUI.destroy(),this.searchInput=null,this.clearAllUI=null,this.selectAllUI=null,this.itemsBox=null,this.items=null,mh(Sh(l.prototype),"destroy",this).call(this)}},{key:"onInput",value:function(t){var e,n=this,r=t.target.value.toLocaleLowerCase(this.getLocale());e=""===r?yh(this.items):Object(j.arrayFilter)(this.items,(function(t){return"".concat(t.value).toLocaleLowerCase(n.getLocale()).indexOf(r)>=0})),this.itemsBox.loadData(e)}},{key:"onInputKeyDown",value:function(t){this.runLocalHooks("keydown",t,this),Object(Gr.partial)(P.isKey,t.keyCode)("ARROW_DOWN|TAB")&&!this.itemsBox.isListening()&&(Object(f.stopImmediatePropagation)(t),this.itemsBox.listen(),this.itemsBox.selectCell(0,0))}},{key:"onSelectAllClick",value:function(t){var e=[];t.preventDefault(),Object(j.arrayEach)(this.itemsBox.getSourceData(),(function(t,n){t.checked=!0,e.push(Object(rh.dataRowToChangesArray)(t,n)[0])})),this.itemsBox.setSourceDataAtCell(e)}},{key:"onClearAllClick",value:function(t){var e=[];t.preventDefault(),Object(j.arrayEach)(this.itemsBox.getSourceData(),(function(t,n){t.checked=!1,e.push(Object(rh.dataRowToChangesArray)(t,n)[0])})),this.itemsBox.setSourceDataAtCell(e)}}],r=[{key:"DEFAULTS",get:function(){return Object(h.clone)({className:"htUIMultipleSelect",value:[]})}}],n&&vh(e.prototype,n),r&&vh(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(zc),Rh=jh;function Eh(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return Ph(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ph(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ph(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var Mh="by_value";function _h(t){return _h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_h(t)}function Th(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return Ah(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ah(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ah(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Ih(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xh(n.key),n)}}function xh(t){var e=function(input,t){if("object"!==_h(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==_h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===_h(e)?e:String(e)}function Dh(){return Dh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Lh(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Dh.apply(this,arguments)}function Nh(t,p){return Nh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Nh(t,p)}function Hh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Lh(t);if(e){var o=Lh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===_h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Lh(t){return Lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lh(t)}Ks(Mh,(function(t,e){return(0,Eh(e,1)[0])(t.value)}),{name:"By value",inputsCount:0,inputValuesDecorator:function(t){return[Jf(Eh(t,1)[0])]},showOperators:!1});var Bh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nh(t,e)}(l,t);var e,n,r,o=Hh(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=o.call(this,t,{id:e.id,stateless:!1})).name=e.name,n.elements.push(new Rh(n.hot)),n.registerHooks(),n}return e=l,n=[{key:"registerHooks",value:function(){var t=this;this.getMultipleSelectElement().addLocalHook("keydown",(function(e){return t.onInputKeyDown(e)}))}},{key:"setState",value:function(t){if(this.reset(),t&&t.command.key===Mh){var select=this.getMultipleSelectElement();select.setItems(t.itemsSnapshot),select.setValue(t.args[0]),select.setLocale(t.locale)}}},{key:"getState",value:function(){var select=this.getMultipleSelectElement(),t=select.getItems();return{command:{key:select.isSelectedAllValues()||!t.length?Xs:Mh},args:[select.getValue()],itemsSnapshot:t}}},{key:"updateState",value:function(t){var e=this,n=function(n,r,o,l,c){var f=Th(Object(j.arrayFilter)(r,(function(t){return t.name===Mh})),1)[0],h={},d=e.hot.getTranslatedPhrase(Bi.FILTERS_VALUES_BLANK_CELLS);if(f){var y=eh(Object(j.arrayMap)(l(n,c),(function(t){return t.value})));o&&(f.args[0]=o);var v=[],m=nh(y,f.args[0],d,(function(t){t.checked&&v.push(t.value)})),w=t.editedConditionStack.column;h.locale=e.hot.getCellMeta(0,w).locale,h.args=[v],h.command=Gs(Mh),h.itemsSnapshot=m}else h.args=[],h.command=Gs(Xs);e.state.setValueAtIndex(n,h)};n(t.editedConditionStack.column,t.editedConditionStack.conditions,t.conditionArgsChange,t.filteredRowsFactory),t.dependentConditionStacks.length&&n(t.dependentConditionStacks[0].column,t.dependentConditionStacks[0].conditions,t.conditionArgsChange,t.filteredRowsFactory,t.editedConditionStack)}},{key:"getMultipleSelectElement",value:function(){return this.elements.filter((function(element){return element instanceof Rh}))[0]}},{key:"getMenuItemDescriptor",value:function(){var t=this;return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:function(){return t.isHidden()},renderer:function(e,n,r,col,o,l){Object(c.addClass)(n.parentNode,"htFiltersMenuValue");var label=t.hot.rootDocument.createElement("div");return Object(c.addClass)(label,"htFiltersMenuLabel"),label.textContent=l,n.appendChild(label),n.parentNode.hasAttribute("ghost-table")||Object(j.arrayEach)(t.elements,(function(t){return n.appendChild(t.element)})),n}}}},{key:"reset",value:function(){var t=this.hot.getTranslatedPhrase(Bi.FILTERS_VALUES_BLANK_CELLS),e=eh(this._getColumnVisibleValues()),n=nh(e,e,t);this.getMultipleSelectElement().setItems(n),Dh(Lh(l.prototype),"reset",this).call(this),this.getMultipleSelectElement().setValue(e);var r=this.hot.getPlugin("filters").getSelectedColumn();null!==r&&this.getMultipleSelectElement().setLocale(this.hot.getCellMeta(0,r.visualIndex).locale)}},{key:"onInputKeyDown",value:function(t){Object(P.isKey)(t.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),Object(f.stopImmediatePropagation)(t))}},{key:"_getColumnVisibleValues",value:function(){var t=this.hot.getPlugin("filters").getSelectedColumn();return null===t?[]:Object(j.arrayMap)(this.hot.getDataAtCol(t.visualIndex),(function(t){return Qf(t)}))}}],n&&Ih(e.prototype,n),r&&Ih(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Ws),Uh=Bh;function Fh(t){return Fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fh(t)}function Vh(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wh(n.key),n)}}function Wh(t){var e=function(input,t){if("object"!==Fh(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Fh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Fh(e)?e:String(e)}function zh(t,p){return zh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},zh(t,p)}function Yh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Gh(t);if(e){var o=Gh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Fh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Gh(t){return Gh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gh(t)}var Kh,Xh,$h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zh(t,e)}(l,t);var e,n,r,o=Yh(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=o.call(this,t,{id:e.id,stateless:!0})).name=e.name,n.elements.push(new tf(n.hot,{type:"button",value:Bi.FILTERS_BUTTONS_OK,className:"htUIButton htUIButtonOK",identifier:l.BUTTON_OK})),n.elements.push(new tf(n.hot,{type:"button",value:Bi.FILTERS_BUTTONS_CANCEL,className:"htUIButton htUIButtonCancel",identifier:l.BUTTON_CANCEL})),n.registerHooks(),n}return e=l,r=[{key:"BUTTON_OK",get:function(){return"ok"}},{key:"BUTTON_CANCEL",get:function(){return"cancel"}}],(n=[{key:"registerHooks",value:function(){var t=this;Object(j.arrayEach)(this.elements,(function(element){element.addLocalHook("click",(function(e,button){return t.onButtonClick(e,button)}))}))}},{key:"getMenuItemDescriptor",value:function(){var t=this;return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:function(){return t.isHidden()},renderer:function(e,n){return Object(c.addClass)(n.parentNode,"htFiltersMenuActionBar"),n.parentNode.hasAttribute("ghost-table")||Object(j.arrayEach)(t.elements,(function(t){return n.appendChild(t.element)})),n}}}},{key:"accept",value:function(){this.runLocalHooks("accept")}},{key:"cancel",value:function(){this.runLocalHooks("cancel")}},{key:"onButtonClick",value:function(t,button){button.options.identifier===l.BUTTON_OK?this.accept():this.cancel()}}])&&Vh(e.prototype,n),r&&Vh(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Ws);function qh(t){return qh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qh(t)}function Zh(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return Jh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jh(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jh(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Qh(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function ed(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nd(n.key),n)}}function nd(t){var e=function(input,t){if("object"!==qh(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==qh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===qh(e)?e:String(e)}var rd="ConditionCollection.filteringStates",od=function(){function t(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hot=e,this.isMapRegistrable=n,this.filteringStates=new Xr.a,!0===this.isMapRegistrable?this.hot.columnIndexMapper.registerMap(rd,this.filteringStates):this.filteringStates.init(this.hot.columnIndexMapper.getNumberOfIndexes())}var e,n,r;return e=t,n=[{key:"isEmpty",value:function(){return 0===this.getFilteredColumns().length}},{key:"isMatch",value:function(t,e){var n,r=this.filteringStates.getValueAtIndex(e),o=null!==(n=null==r?void 0:r.conditions)&&void 0!==n?n:[],l=null==r?void 0:r.operation;return this.isMatchInConditions(o,t,l)}},{key:"isMatchInConditions",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sf;return!t.length||function(t){if(!Of[t])throw Error('Operation with id "'.concat(t,'" does not exist.'));var e=Of[t].func;return function(t,n){return e(t,n)}}(n)(t,e)}},{key:"addCondition",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sf,r=arguments.length>3?arguments[3]:void 0,o=this.hot.getCellMeta(0,t).locale,l=Object(j.arrayMap)(e.args,(function(t){return"string"==typeof t?t.toLocaleLowerCase(o):t})),c=e.name||e.command.key;this.runLocalHooks("beforeAdd",t);var f=this.getOperation(t);if(f){if(f!==n)throw Error(Object(ui.a)(Kh||(Kh=Qh(["The column of index "," has been already applied with a `","` \n        filter operation. Use `removeConditions` to clear the current conditions and then add new ones. \n        Mind that you cannot mix different types of operations (for instance, if you use `conjunction`, \n        use it consequently for a particular column)."],["The column of index "," has been already applied with a \\`","\\`\\x20\n        filter operation. Use \\`removeConditions\\` to clear the current conditions and then add new ones.\\x20\n        Mind that you cannot mix different types of operations (for instance, if you use \\`conjunction\\`,\\x20\n        use it consequently for a particular column)."])),t,f))}else if(Object(R.isUndefined)(Of[n]))throw new Error(Object(ui.a)(Xh||(Xh=Qh(["Unexpected operation named `","`. Possible ones are \n        `disjunction` and `conjunction`."],["Unexpected operation named \\`","\\`. Possible ones are\\x20\n        \\`disjunction\\` and \\`conjunction\\`."])),n));var h=this.getConditions(t);0===h.length?this.filteringStates.setValueAtIndex(t,{operation:n,conditions:[{name:c,args:l,func:Ys(c,l)}]},r):h.push({name:c,args:l,func:Ys(c,l)}),this.runLocalHooks("afterAdd",t)}},{key:"getConditions",value:function(t){var e,n;return null!==(e=null===(n=this.filteringStates.getValueAtIndex(t))||void 0===n?void 0:n.conditions)&&void 0!==e?e:[]}},{key:"getOperation",value:function(t){var e;return null===(e=this.filteringStates.getValueAtIndex(t))||void 0===e?void 0:e.operation}},{key:"getFilteredColumns",value:function(){return this.filteringStates.getEntries().map((function(t){return Zh(t,1)[0]}))}},{key:"getColumnStackPosition",value:function(t){return this.getFilteredColumns().indexOf(t)}},{key:"exportAllConditions",value:function(){return Object(j.arrayReduce)(this.filteringStates.getEntries(),(function(t,e){var n=Zh(e,2),r=n[0],o=n[1],l=o.operation,c=o.conditions;return t.push({column:r,operation:l,conditions:Object(j.arrayMap)(c,(function(t){return{name:t.name,args:t.args}}))}),t}),[])}},{key:"importAllConditions",value:function(t){var e=this;this.clean(),Object(j.arrayEach)(t,(function(t){Object(j.arrayEach)(t.conditions,(function(n){return e.addCondition(t.column,n)}))}))}},{key:"removeConditions",value:function(t){this.runLocalHooks("beforeRemove",t),this.filteringStates.clearValue(t),this.runLocalHooks("afterRemove",t)}},{key:"clean",value:function(){this.runLocalHooks("beforeClean"),this.filteringStates.clear(),this.runLocalHooks("afterClean")}},{key:"hasConditions",value:function(t,e){var n=this.getConditions(t);return e?n.some((function(t){return t.name===e})):n.length>0}},{key:"destroy",value:function(){this.isMapRegistrable&&this.hot.columnIndexMapper.unregisterMap(rd),this.filteringStates=null,this.clearLocalHooks()}}],n&&ed(e.prototype,n),r&&ed(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object(h.mixin)(od,Ii.a);var id=od;function ad(t){return ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ad(t)}function ld(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ud(n.key),n)}}function ud(t){var e=function(input,t){if("object"!==ad(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==ad(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===ad(e)?e:String(e)}var sd=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return[]};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.conditionCollection=e,this.columnDataFactory=n}var e,n,r;return e=t,n=[{key:"filter",value:function(){var t=this,e=[];return Object(j.arrayEach)(this.conditionCollection.getFilteredColumns(),(function(n,r){var o=t.columnDataFactory(n);r&&(o=t._getIntersectData(o,e)),e=t.filterByColumn(n,o)})),e}},{key:"filterByColumn",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return Object(j.arrayEach)(n,(function(n){void 0!==n&&e.conditionCollection.isMatch(n,t)&&r.push(n)})),r}},{key:"_getIntersectData",value:function(data,t){var e=[];return Object(j.arrayEach)(t,(function(t){var n=t.meta.visualRow;void 0!==data[n]&&(e[n]=data[n])})),e}}],n&&ld(e.prototype,n),r&&ld(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),cd=sd;function fd(t){return fd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fd(t)}function hd(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pd(n.key),n)}}function pd(t){var e=function(input,t){if("object"!==fd(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==fd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===fd(e)?e:String(e)}var yd=function(){function t(e,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return[]};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hot=e,this.conditionCollection=n,this.columnDataFactory=o,this.changes=[],this.grouping=!1,this.latestEditedColumnPosition=-1,this.latestOrderStack=[],this.conditionCollection.addLocalHook("beforeRemove",(function(t){return r._onConditionBeforeModify(t)})),this.conditionCollection.addLocalHook("afterRemove",(function(t){return r.updateStatesAtColumn(t)})),this.conditionCollection.addLocalHook("afterAdd",(function(t){return r.updateStatesAtColumn(t)})),this.conditionCollection.addLocalHook("beforeClean",(function(){return r._onConditionBeforeClean()})),this.conditionCollection.addLocalHook("afterClean",(function(){return r._onConditionAfterClean()}))}var e,n,r;return e=t,n=[{key:"groupChanges",value:function(){this.grouping=!0}},{key:"flush",value:function(){var t=this;this.grouping=!1,Object(j.arrayEach)(this.changes,(function(e){t.updateStatesAtColumn(e)})),this.changes.length=0}},{key:"_onConditionBeforeModify",value:function(t){this.latestEditedColumnPosition=this.conditionCollection.getColumnStackPosition(t)}},{key:"updateStatesAtColumn",value:function(t,e){var n=this;if(this.grouping)-1===this.changes.indexOf(t)&&this.changes.push(t);else{var r=this.conditionCollection.exportAllConditions(),o=this.conditionCollection.getColumnStackPosition(t);-1===o&&(o=this.latestEditedColumnPosition);var l=r.slice(0,o),c=r.slice(o);c.length&&c[0].column===t&&c.shift();var f=Object(Gr.curry)((function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=new id(n.hot,!1),l=[].concat(t,r);o.importAllConditions(l);var c,f=n.columnDataFactory(e);c=o.isEmpty()?f:new cd(o,(function(t){return n.columnDataFactory(t)})).filter();var h=Jf(c=Object(j.arrayMap)(c,(function(t){return t.meta.visualRow})));return o.destroy(),Object(j.arrayFilter)(f,(function(t){return h(t.meta.visualRow)}))}))(l),h=[].concat(this.conditionCollection.getConditions(t));this.runLocalHooks("update",{editedConditionStack:{column:t,conditions:h},dependentConditionStacks:c,filteredRowsFactory:f,conditionArgsChange:e})}}},{key:"_onConditionBeforeClean",value:function(){this.latestOrderStack=this.conditionCollection.getFilteredColumns()}},{key:"_onConditionAfterClean",value:function(){var t=this;Object(j.arrayEach)(this.latestOrderStack,(function(e){t.updateStatesAtColumn(e)}))}},{key:"destroy",value:function(){var t=this;this.clearLocalHooks(),Object(h.objectEach)(this,(function(e,n){t[n]=null}))}}],n&&hd(e.prototype,n),r&&hd(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object(h.mixin)(yd,Ii.a);var gd,vd=yd,bd=n(845);function md(t){return md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},md(t)}function wd(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return Od(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Od(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Od(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Cd(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sd(n.key),n)}}function Sd(t){var e=function(input,t){if("object"!==md(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==md(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===md(e)?e:String(e)}function kd(){return kd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Pd(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},kd.apply(this,arguments)}function jd(t,p){return jd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},jd(t,p)}function Rd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Pd(t);if(e){var o=Pd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===md(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ed(t)}(this,n)}}function Ed(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pd(t){return Pd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pd(t)}var Md="filters",_d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jd(t,e)}(l,t);var e,n,r,o=Rd(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).eventManager=new $.a(Ed(e)),e.dropdownMenuPlugin=null,e.conditionCollection=null,e.conditionUpdateObserver=null,e.components=new Map([["filter_by_condition",null],["filter_operators",null],["filter_by_condition2",null],["filter_by_value",null],["filter_action_bar",null]]),e.lastSelectedColumn=null,e.filtersRowsMap=null,e.hot.addHook("afterGetColHeader",(function(col,t){return e.onAfterGetColHeader(col,t)})),e}return e=l,n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[Md]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){this.filtersRowsMap=this.hot.rowIndexMapper.registerMap(this.pluginName,new bd.a),this.dropdownMenuPlugin=this.hot.getPlugin("dropdownMenu");var e=this.hot.getSettings().dropdownMenu,n=e&&e.uiContainer||this.hot.rootDocument.body,r=function(component){return component.addLocalHook("accept",(function(){return t.onActionBarSubmit("accept")})),component.addLocalHook("cancel",(function(){return t.onActionBarSubmit("cancel")})),component.addLocalHook("change",(function(e){return t.onComponentChange(component,e)})),component};if(!this.components.get("filter_by_condition")){var o=new wf(this.hot,{id:"filter_by_condition",name:function(){return"".concat(t.hot.getTranslatedPhrase(Bi.FILTERS_DIVS_FILTER_BY_CONDITION),":")},addSeparator:!1,menuContainer:n});o.addLocalHook("afterClose",(function(){return t.onSelectUIClosed()})),this.components.set("filter_by_condition",r(o))}if(this.components.get("filter_operators")||this.components.set("filter_operators",new Xf(this.hot,{id:"filter_operators",name:"Operators"})),!this.components.get("filter_by_condition2")){var c=new wf(this.hot,{id:"filter_by_condition2",name:"",addSeparator:!0,menuContainer:n});c.addLocalHook("afterClose",(function(){return t.onSelectUIClosed()})),this.components.set("filter_by_condition2",r(c))}this.components.get("filter_by_value")||this.components.set("filter_by_value",r(new Uh(this.hot,{id:"filter_by_value",name:function(){return"".concat(t.hot.getTranslatedPhrase(Bi.FILTERS_DIVS_FILTER_BY_VALUE),":")}}))),this.components.get("filter_action_bar")||this.components.set("filter_action_bar",r(new $h(this.hot,{id:"filter_action_bar",name:"Action bar"}))),this.conditionCollection||(this.conditionCollection=new id(this.hot)),this.conditionUpdateObserver||(this.conditionUpdateObserver=new vd(this.hot,this.conditionCollection,(function(e){return t.getDataMapAtColumn(e)})),this.conditionUpdateObserver.addLocalHook("update",(function(e){return t.updateComponents(e)}))),this.components.forEach((function(component){return component.show()})),this.addHook("beforeDropdownMenuSetItems",(function(e){return t.onBeforeDropdownMenuSetItems(e)})),this.addHook("afterDropdownMenuDefaultOptions",(function(e){return t.onAfterDropdownMenuDefaultOptions(e)})),this.addHook("afterDropdownMenuShow",(function(){return t.onAfterDropdownMenuShow()})),this.addHook("afterDropdownMenuHide",(function(){return t.onAfterDropdownMenuHide()})),this.addHook("afterChange",(function(e){return t.onAfterChange(e)})),this.hot.getSettings().dropdownMenu&&this.dropdownMenuPlugin&&(this.dropdownMenuPlugin.disablePlugin(),this.dropdownMenuPlugin.enablePlugin()),kd(Pd(l.prototype),"enablePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){var t,e=this;this.enabled&&(null!==(t=this.dropdownMenuPlugin)&&void 0!==t&&t.enabled&&this.dropdownMenuPlugin.menu.clearLocalHooks(),this.components.forEach((function(component,t){component.destroy(),e.components.set(t,null)})),this.conditionCollection.destroy(),this.conditionCollection=null,this.hot.rowIndexMapper.unregisterMap(this.pluginName)),kd(Pd(l.prototype),"disablePlugin",this).call(this)}},{key:"addCondition",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Sf,o=this.hot.toPhysicalColumn(t);this.conditionCollection.addCondition(o,{command:{key:e},args:n},r)}},{key:"removeConditions",value:function(t){var e=this.hot.toPhysicalColumn(t);this.conditionCollection.removeConditions(e)}},{key:"clearConditions",value:function(t){if(void 0===t)this.conditionCollection.clean();else{var e=this.hot.toPhysicalColumn(t);this.conditionCollection.removeConditions(e)}}},{key:"filter",value:function(){var t=this,e=this._createDataFilter(),n=!this.conditionCollection.isEmpty(),r=[],o=this.conditionCollection.exportAllConditions();if(!1!==this.hot.runHooks("beforeFilter",o))if(n){var l=[];this.hot.batchExecution((function(){t.filtersRowsMap.clear();var n=Jf(r=Object(j.arrayMap)(e.filter(),(function(t){return t.meta.visualRow})));Object(ie.rangeEach)(t.hot.countSourceRows()-1,(function(t){n(t)||l.push(t)})),Object(j.arrayEach)(l,(function(e){t.filtersRowsMap.setValueAtIndex(e,!0)}))}),!0),r.length||this.hot.deselectCell()}else this.filtersRowsMap.clear();this.hot.runHooks("afterFilter",o),this.hot.view.adjustElementsSize(!0),this.hot.render(),this.clearColumnSelection()}},{key:"getSelectedColumn",value:function(){var t,e=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return e?{visualIndex:e.col,physicalIndex:this.hot.toPhysicalColumn(e.col)}:null}},{key:"clearColumnSelection",value:function(){var t=this.getSelectedColumn();null!==t&&this.hot.selectCell(0,t.visualIndex)}},{key:"getDataMapAtColumn",value:function(t){var e=this,n=this.hot.toVisualColumn(t),data=[];return Object(j.arrayEach)(this.hot.getSourceDataAtCol(n),(function(t,r){var o,l=e.hot.getCellMeta(r,n),c=l.row,col=l.col,f=l.visualCol,h=l.visualRow,d=l.type,y=l.instance,v=l.dateFormat,m=l.locale,w=null!==(o=e.hot.getDataAtCell(e.hot.toVisualRow(r),n))&&void 0!==o?o:t;data.push({meta:{row:c,col:col,visualCol:f,visualRow:h,type:d,instance:y,dateFormat:v,locale:m},value:Qf(w)})})),data}},{key:"onAfterChange",value:function(t){var e=this;t&&Object(j.arrayEach)(t,(function(t){var n=wd(t,2)[1],r=e.hot.propToCol(n);e.conditionCollection.hasConditions(r)&&e.updateValueComponentCondition(r)}))}},{key:"updateValueComponentCondition",value:function(t){var e=eh(this.hot.getDataAtCol(t));this.conditionUpdateObserver.updateStatesAtColumn(t,e)}},{key:"restoreComponents",value:function(t){var e,n=null===(e=this.getSelectedColumn())||void 0===e?void 0:e.physicalIndex;t.forEach((function(component){component.isHidden()||component.restoreState(n)})),this.updateDependentComponentsVisibility()}},{key:"onAfterDropdownMenuShow",value:function(){this.restoreComponents(Array.from(this.components.values()))}},{key:"onAfterDropdownMenuHide",value:function(){this.components.get("filter_by_condition").getSelectElement().closeOptions(),this.components.get("filter_by_condition2").getSelectElement().closeOptions()}},{key:"onBeforeDropdownMenuSetItems",value:function(){var t=this;this.dropdownMenuPlugin&&this.dropdownMenuPlugin.menu.addLocalHook("afterOpen",(function(){t.dropdownMenuPlugin.menu.hotMenu.updateSettings({hiddenRows:!0})}))}},{key:"onAfterDropdownMenuDefaultOptions",value:function(t){t.items.push({name:Ci}),this.components.forEach((function(component){t.items.push(component.getMenuItemDescriptor())}))}},{key:"getOperationBasedOnArguments",value:function(t,e,n,r){var o=t;return o===jf&&e.command.key!==Xs&&n.command.key!==Xs&&r.command.key!==Xs?o=Ef:r.command.key!==Xs&&(e.command.key!==Xs&&n.command.key!==Xs||(o=Sf)),o}},{key:"onActionBarSubmit",value:function(t){var e;if("accept"===t){var n,r=this.getSelectedColumn();if(null===r)return void(null===(n=this.dropdownMenuPlugin)||void 0===n||n.close());var o=r.physicalIndex,l=this.components.get("filter_by_condition").getState(),c=this.components.get("filter_by_condition2").getState(),f=this.components.get("filter_by_value").getState(),h=this.getOperationBasedOnArguments(this.components.get("filter_operators").getActiveOperationId(),l,c,f);this.conditionUpdateObserver.groupChanges();var d=this.conditionCollection.getColumnStackPosition(o);-1===d&&(d=void 0),this.conditionCollection.removeConditions(o),l.command.key!==Xs&&(this.conditionCollection.addCondition(o,l,h,d),c.command.key!==Xs&&this.conditionCollection.addCondition(o,c,h,d)),f.command.key!==Xs&&this.conditionCollection.addCondition(o,f,h,d),this.conditionUpdateObserver.flush(),this.components.forEach((function(component){return component.saveState(o)})),this.filtersRowsMap.clear(),this.filter()}null===(e=this.dropdownMenuPlugin)||void 0===e||e.close()}},{key:"onComponentChange",value:function(component,t){this.updateDependentComponentsVisibility(),component.constructor!==wf||t.inputsCount||this.setListeningDropdownMenu()}},{key:"onSelectUIClosed",value:function(){this.setListeningDropdownMenu()}},{key:"setListeningDropdownMenu",value:function(){this.dropdownMenuPlugin&&this.dropdownMenuPlugin.setListening()}},{key:"updateDependentComponentsVisibility",value:function(){var t=this.components.get("filter_by_condition").getState().command,e=[this.components.get("filter_by_condition2"),this.components.get("filter_operators")];t.showOperators?this.showComponents.apply(this,e):this.hideComponents.apply(this,e)}},{key:"onAfterGetColHeader",value:function(col,t){var e=this.hot.toPhysicalColumn(col);this.enabled&&this.conditionCollection.hasConditions(e)?Object(c.addClass)(t,"htFiltersActive"):Object(c.removeClass)(t,"htFiltersActive")}},{key:"_createDataFilter",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.conditionCollection;return new cd(e,(function(e){return t.getDataMapAtColumn(e)}))}},{key:"updateComponents",value:function(t){var e;if(null!==(e=this.dropdownMenuPlugin)&&void 0!==e&&e.enabled){var n,r,o=t.editedConditionStack,l=o.conditions,c=o.column,f=l.filter((function(t){return t.name===Mh})),h=l.filter((function(t){return t.name!==Mh}));if(f.length>=2||h.length>=3)Object(kr.b)(Object(ui.a)(gd||(n=["The filter conditions have been applied properly, but couldn’t be displayed visually. \n        The overall amount of conditions exceed the capability of the dropdown menu. \n        For more details see the documentation."],(r=["The filter conditions have been applied properly, but couldn’t be displayed visually.\\x20\n        The overall amount of conditions exceed the capability of the dropdown menu.\\x20\n        For more details see the documentation."])||(r=n.slice(0)),gd=Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(r)}})))));else{var d=this.conditionCollection.getOperation(c);this.components.get("filter_by_condition").updateState(h[0],c),this.components.get("filter_by_condition2").updateState(h[1],c),this.components.get("filter_operators").updateState(d,c),this.components.get("filter_by_value").updateState(t)}}}},{key:"getIndexesOfComponents",value:function(){var t=[];if(!this.dropdownMenuPlugin)return t;for(var menu=this.dropdownMenuPlugin.menu,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Object(j.arrayEach)(n,(function(component){Object(j.arrayEach)(menu.menuItems,(function(e,n){e.key===component.getMenuItemDescriptor().key&&t.push(n)}))})),t}},{key:"changeComponentsVisibility",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.dropdownMenuPlugin){for(var e=this.dropdownMenuPlugin.menu.hotMenu,n=e.getPlugin("hiddenRows"),r=arguments.length,o=new Array(r>1?r-1:0),l=1;l<r;l++)o[l-1]=arguments[l];var c=this.getIndexesOfComponents.apply(this,o);t?n.showRows(c):n.hideRows(c),e.render()}}},{key:"hideComponents",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.changeComponentsVisibility.apply(this,[!1].concat(e))}},{key:"showComponents",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.changeComponentsVisibility.apply(this,[!0].concat(e))}},{key:"destroy",value:function(){var t=this;this.enabled&&(this.components.forEach((function(component,e){null!==component&&(component.destroy(),t.components.set(e,null))})),this.conditionCollection.destroy(),this.conditionUpdateObserver.destroy(),this.hot.rowIndexMapper.unregisterMap(this.pluginName)),kd(Pd(l.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return Md}},{key:"PLUGIN_PRIORITY",get:function(){return 250}},{key:"PLUGIN_DEPS",get:function(){return["plugin:DropdownMenu","plugin:HiddenRows","cell-type:checkbox"]}}],n&&Cd(e.prototype,n),r&&Cd(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);n(782);function Td(t){return Td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Td(t)}function Ad(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Id(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Ad(Object(source),!0).forEach((function(e){xd(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Ad(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function xd(t,e,n){return(e=function(t){var e=function(input,t){if("object"!==Td(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Td(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Td(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Dd="internal-use-in-handsontable",Nd={licenseKey:Dd,useArrayArithmetic:!0,useColumnIndex:!1,useStats:!1,evaluateNullToZero:!0,precisionEpsilon:1e-13,precisionRounding:14,smartRounding:!0,leapYear1900:!0,nullDate:{year:1899,month:12,day:31},nullYear:30,dateFormats:["DD/MM/YYYY","DD/MM/YY"],timeFormats:["hh:mm","hh:mm:ss.sss"],matchWholeCell:!0,useRegularExpressions:!1,useWildcards:!0,functionArgSeparator:",",thousandSeparator:"",decimalSeparator:".",language:"enGB"};function Hd(t){var e,n;return{maxColumns:t.maxColumns,maxRows:t.maxRows,language:null===(e=t[hp])||void 0===e||null===(n=e.language)||void 0===n?void 0:n.langCode}}function Ld(t){return Object.keys(t).reduce((function(e,n){return"hyperformula"!==n&&(e[n]=t[n]),e}),{})}function Bd(t){return Bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bd(t)}function Ud(){var t="engine_relationship",e=Object(Ro.a)(hp);return e.hasItem(t)||e.register(t,new Map),e.getItem(t)}function Fd(){var t="shared_engine_usage",e=Object(Ro.a)(hp);return e.hasItem(t)||e.register(t,new Map),e.getItem(t)}function Vd(t){var e,n=t.getSettings(),r=n[hp],o=null==r?void 0:r.engine;if(!0===r)return null;if(Object(R.isUndefined)(o))return null;if("function"==typeof o.hyperformula||"function"==typeof o)return function(t,e,n){var r=e[hp],o=function(t){var e,n=t[hp],r=Ld(null!=n&&null!==(e=n.engine)&&void 0!==e&&e.hyperformula?n.engine:{}),o=Hd(t);return Id(Id(Id({},Nd),r),o)}(e),l=Ud(),c=Fd();(function(t,e){e&&e.forEach((function(e){var n=e.name,r=e.plugin,o=e.translations;try{t.registerFunction(n,r,o)}catch(t){Object(kr.b)(t.message)}}))})(t,r.functions),function(t,e){if(e){var n=e.langCode;try{t.registerLanguage(n,e)}catch(t){Object(kr.b)(t.message)}}}(t,r.language);var f=t.buildEmpty(o);return l.set(f,[n]),c.set(f,[n.guid]),function(t,e){e&&(t.suspendEvaluation(),e.forEach((function(e){var n=e.name,r=e.expression,o=e.scope,l=e.options;try{t.addNamedExpression(n,r,o,l)}catch(t){Object(kr.b)(t.message)}})),t.resumeEvaluation())}(f,r.namedExpressions),f.on("sheetAdded",(function(){f.rebuildAndRecalculate()})),f.on("sheetRemoved",(function(){f.rebuildAndRecalculate()})),f}(null!==(e=o.hyperformula)&&void 0!==e?e:o,n,t);if("object"===Bd(o)&&Object(R.isUndefined)(o.hyperformula)){var l=Ud(),c=Fd().get(o);return l.has(o)||l.set(o,[]),l.get(o).push(t),c&&c.push(t.guid),o.getConfig().licenseKey||o.updateConfig({licenseKey:Dd}),o}return null}function Wd(t){var e,n=Ud(),r=0===n.size?[]:Array.from(null!==(e=n.get(t))&&void 0!==e?e:[]);return new Map(r.map((function(t){return[t.getPlugin("formulas").sheetId,t]})))}function zd(t,e){if(t){var n=Ud(),r=n.get(t),o=Fd(),l=o.get(t);r&&r.includes(e)&&(r.splice(r.indexOf(e),1),0===r.length&&n.delete(t)),l&&l.includes(e.guid)&&(l.splice(l.indexOf(e.guid),1),0===l.length&&(o.delete(t),t.destroy()))}}function Yd(t){return"string"==typeof t&&"'"===t.charAt(0)&&"="===t.charAt(1)}function Gd(t){return function(t){if(Array.isArray(t))return Jd(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Zd(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kd(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Xd(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Kd(Object(source),!0).forEach((function(e){ap(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Kd(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function $d(t){return $d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$d(t)}function qd(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||Zd(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zd(t,e){if(t){if("string"==typeof t)return Jd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jd(t,e):void 0}}function Jd(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Qd(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lp(n.key),n)}}function tp(){return tp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=ip(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},tp.apply(this,arguments)}function ep(t,p){return ep=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},ep(t,p)}function np(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ip(t);if(e){var o=ip(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===$d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return op(t)}(this,n)}}function op(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ip(t){return ip=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ip(t)}function ap(t,e,n){return(e=lp(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lp(t){var e=function(input,t){if("object"!==$d(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==$d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===$d(e)?e:String(e)}function up(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function sp(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,fp(t,e,"set"),n),n}function cp(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,fp(t,e,"get"))}function fp(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var hp="formulas",dp="row_move";lt.a.getSingleton().register("afterNamedExpressionAdded"),lt.a.getSingleton().register("afterNamedExpressionRemoved"),lt.a.getSingleton().register("afterSheetAdded"),lt.a.getSingleton().register("afterSheetRemoved"),lt.a.getSingleton().register("afterSheetRenamed"),lt.a.getSingleton().register("afterFormulasValuesUpdate");var pp=function(source){return"UndoRedo.undo"===source||"UndoRedo.redo"===source||"auto"===source},yp=new WeakMap,gp=new WeakMap,vp=new WeakMap,bp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ep(t,e)}(l,t);var e,n,r,o=np(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return up(op(t=o.call.apply(o,[this].concat(n))),yp,{writable:!0,value:!1}),up(op(t),gp,{writable:!0,value:!1}),up(op(t),vp,{writable:!0,value:[["valuesUpdated",function(){var e;return(e=t).onEngineValuesUpdated.apply(e,arguments)}],["namedExpressionAdded",function(){var e;return(e=t).onEngineNamedExpressionsAdded.apply(e,arguments)}],["namedExpressionRemoved",function(){var e;return(e=t).onEngineNamedExpressionsRemoved.apply(e,arguments)}],["sheetAdded",function(){var e;return(e=t).onEngineSheetAdded.apply(e,arguments)}],["sheetRenamed",function(){var e;return(e=t).onEngineSheetRenamed.apply(e,arguments)}],["sheetRemoved",function(){var e;return(e=t).onEngineSheetRemoved.apply(e,arguments)}]]}),ap(op(t),"staticRegister",Object(Ro.a)("formulas")),ap(op(t),"engine",null),ap(op(t),"sheetName",null),t}return e=l,n=[{key:"sheetId",get:function(){return null===this.sheetName?null:this.engine.getSheetId(this.sheetName)}},{key:"isEnabled",value:function(){return!!this.hot.getSettings()[hp]}},{key:"enablePlugin",value:function(){var t,e=this;if(!this.enabled)if(this.engine=null!==(t=Vd(this.hot))&&void 0!==t?t:this.engine,this.engine){if(null!==this.sheetName&&!this.engine.doesSheetExist(this.sheetName)){var n=this.addSheet(this.sheetName,this.hot.getSourceDataArray());!1!==n&&(this.sheetName=n)}this.addHook("beforeLoadData",(function(){return e.onBeforeLoadData.apply(e,arguments)})),this.addHook("afterLoadData",(function(){return e.onAfterLoadData.apply(e,arguments)})),this.addHook("beforeUpdateData",(function(){return e.onBeforeLoadData.apply(e,arguments)})),this.addHook("afterUpdateData",(function(){return e.onAfterLoadData.apply(e,arguments)})),this.addHook("modifyData",(function(){return e.onModifyData.apply(e,arguments)})),this.addHook("modifySourceData",(function(){return e.onModifySourceData.apply(e,arguments)})),this.addHook("beforeValidate",(function(){return e.onBeforeValidate.apply(e,arguments)})),this.addHook("afterSetSourceDataAtCell",(function(){return e.onAfterSetSourceDataAtCell.apply(e,arguments)})),this.addHook("afterSetDataAtCell",(function(){return e.onAfterSetDataAtCell.apply(e,arguments)})),this.addHook("afterSetDataAtRowProp",(function(){return e.onAfterSetDataAtCell.apply(e,arguments)})),this.addHook("beforeCreateRow",(function(){return e.onBeforeCreateRow.apply(e,arguments)})),this.addHook("beforeCreateCol",(function(){return e.onBeforeCreateCol.apply(e,arguments)})),this.addHook("afterCreateRow",(function(){return e.onAfterCreateRow.apply(e,arguments)})),this.addHook("afterCreateCol",(function(){return e.onAfterCreateCol.apply(e,arguments)})),this.addHook("beforeRemoveRow",(function(){return e.onBeforeRemoveRow.apply(e,arguments)})),this.addHook("beforeRemoveCol",(function(){return e.onBeforeRemoveCol.apply(e,arguments)})),this.addHook("afterRemoveRow",(function(){return e.onAfterRemoveRow.apply(e,arguments)})),this.addHook("afterRemoveCol",(function(){return e.onAfterRemoveCol.apply(e,arguments)})),this.addHook("beforeUndo",(function(t){(null==t?void 0:t.actionType)!==dp&&e.engine.undo()})),this.addHook("beforeRedo",(function(t){(null==t?void 0:t.actionType)!==dp&&e.engine.redo()})),this.addHook("afterDetachChild",(function(){return e.onAfterDetachChild.apply(e,arguments)})),this.addHook("beforeAutofill",(function(){return e.onBeforeAutofill.apply(e,arguments)})),cp(this,vp).forEach((function(t){var n=qd(t,2),r=n[0],o=n[1];return e.engine.on(r,o)})),tp(ip(l.prototype),"enablePlugin",this).call(this)}else Object(kr.b)("Missing the required `engine` key in the Formulas settings. Please fill it with either an engine class or an engine instance.")}},{key:"disablePlugin",value:function(){var t=this;cp(this,vp).forEach((function(e){var n=qd(e,2),r=n[0],o=n[1];return t.engine.off(r,o)})),zd(this.engine,this.hot),this.engine=null,tp(ip(l.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(t){this.engine.updateConfig(function(t){var e,n=t[hp],r=Ld(null!=n&&null!==(e=n.engine)&&void 0!==e&&e.hyperformula?n.engine:{}),o=Hd(t);return Id(Id({},r),o)}(this.hot.getSettings()));var e=this.hot.getSettings()[hp];if(Object(R.isDefined)(e)&&Object(R.isDefined)(e.sheetName)&&e.sheetName!==this.sheetName&&this.switchSheet(e.sheetName),!t.data&&null===this.sheetName){var n=this.hot.getSettings()[hp].sheetName;n&&this.engine.doesSheetExist(n)?this.switchSheet(this.sheetName):this.sheetName=this.addSheet(null!=n?n:void 0,this.hot.getSourceDataArray())}tp(ip(l.prototype),"updatePlugin",this).call(this,t)}},{key:"destroy",value:function(){var t=this;cp(this,vp).forEach((function(e){var n,r=qd(e,2),o=r[0],l=r[1];return null===(n=t.engine)||void 0===n?void 0:n.off(o,l)})),sp(this,vp,null),zd(this.engine,this.hot),this.engine=null,tp(ip(l.prototype),"destroy",this).call(this)}},{key:"getPhysicalIndexPosition",value:function(t,e,n,r,o){return!o&&t>=n?r+(t-n):e}},{key:"toPhysicalRowPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPhysicalIndexPosition(t,this.hot.toPhysicalRow(t),this.hot.countRows(),this.hot.countSourceRows(),e)}},{key:"toPhysicalColumnPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPhysicalIndexPosition(t,this.hot.toPhysicalColumn(t),this.hot.countCols(),this.hot.countSourceCols(),e)}},{key:"addSheet",value:function(t,e){if(Object(R.isDefined)(e)&&!Object(rh.isArrayOfArrays)(e))return Object(kr.b)("The provided data should be an array of arrays."),!1;if(null!=t&&this.engine.doesSheetExist(t))return Object(kr.b)("Sheet with the provided name already exists."),!1;try{var n=this.engine.addSheet(null!=t?t:void 0);return e&&this.engine.setSheetContent(this.engine.getSheetId(n),e),n}catch(t){return Object(kr.b)(t.message),!1}}},{key:"switchSheet",value:function(t){if(this.engine.doesSheetExist(t)){this.sheetName=t;var e=this.engine.getSheetSerialized(this.sheetId);e.length>0&&this.hot.loadData(e,"".concat(Object(E.toUpperCaseFirst)(hp),".switchSheet"))}else Object(kr.a)("The sheet named `".concat(t,"` does not exist, switch aborted."))}},{key:"getCellType",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.sheetId,r=this.hot.toPhysicalRow(t),o=this.hot.toPhysicalColumn(e);return null!==r&&null!==o?this.engine.getCellType({sheet:n,row:r,col:o}):"EMPTY"}},{key:"isFormulaCellType",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.sheetId,r=this.hot.toPhysicalRow(t),o=this.hot.toPhysicalColumn(e);return null!==r&&null!==o&&this.engine.doesCellHaveFormula({sheet:n,row:r,col:o})}},{key:"renderDependentSheets",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Set;t.forEach((function(t){var e,n=null==t||null===(e=t.address)||void 0===e?void 0:e.sheet;void 0!==n&&(r.has(n)||r.add(n))})),Wd(this.engine).forEach((function(t,o){var l;(n||o!==e.sheetId)&&r.has(o)&&(t.render(),null===(l=t.view)||void 0===l||l.adjustElementsSize())}))}},{key:"validateDependentCells",value:function(t){var e=this,n=function(t){var e,n=null!==(e=null==t?void 0:t.address)&&void 0!==e?e:{},r=n.row,col=n.col,o=n.sheet;return Object(R.isDefined)(o)?"".concat(o,":").concat(r,"x").concat(col):""},r=new Set((arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((function(t){return n(t)})));t.forEach((function(t){var o,l,c=null!==(o=t.address)&&void 0!==o?o:{},f=c.row,col=c.col,h=Object(R.isDefined)(f)?e.hot.toVisualRow(f):null,d=Object(R.isDefined)(col)?e.hot.toVisualColumn(col):null;if(null!==h&&null!==d){var y=null==t||null===(l=t.address)||void 0===l?void 0:l.sheet,v=n(t);if(void 0!==y&&!r.has(v)){var m=Wd(e.engine).get(y);if(!m)return;m.validateCell(m.getDataAtCell(h,d),m.getCellMeta(h,d),(function(){}))}}}))}},{key:"syncChangeWithEngine",value:function(t,e,n){var address={row:this.toPhysicalRowPosition(t),col:this.toPhysicalColumnPosition(e),sheet:this.sheetId};if(this.engine.isItPossibleToSetCellContents(address))return this.engine.setCellContents(address,n);Object(kr.b)("Not possible to set cell data at ".concat(JSON.stringify(address)))}},{key:"onBeforeValidate",value:function(t,e,n){var r=this.hot.propToCol(n);if(this.isFormulaCellType(e,r)){var address={row:this.hot.toPhysicalRow(e),col:this.hot.toPhysicalColumn(r),sheet:this.sheetId},o=this.engine.getCellValue(address);return"object"===$d(o)&&null!==o?o.value:o}return t}},{key:"onBeforeAutofill",value:function(t,e,n){var r=this,o=function(t){return Xd(Xd({},t),{},{sheet:r.sheetId})},l={start:o(e.getTopStartCorner()),end:o(e.getBottomEndCorner())},c={start:o(n.getTopStartCorner()),end:o(n.getBottomEndCorner())};return!1!==this.engine.isItPossibleToSetCellContents(c)&&this.engine.getFillRangeData(l,c)}},{key:"onBeforeLoadData",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"").includes(Object(E.toUpperCaseFirst)(hp))||sp(this,gp,Object(R.isUndefined)(this.hot.getSettings().data))}},{key:"onAfterLoadData",value:function(t,e){var n,r;if(!(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"").includes(Object(E.toUpperCaseFirst)(hp)))if(this.sheetName=(n=this.engine,r=this.hot.getSettings()[hp].sheetName,!Object(R.isUndefined)(r)&&n.doesSheetExist(r)||(r=n.addSheet(r)),r),cp(this,gp))this.switchSheet(this.sheetName);else{var o=this.hot.getSourceDataArray();if(this.engine.isItPossibleToReplaceSheetContent(this.sheetId,o)){sp(this,yp,!0);var l=this.engine.setSheetContent(this.sheetId,this.hot.getSourceDataArray());this.renderDependentSheets(l),sp(this,yp,!1)}}}},{key:"onModifyData",value:function(t,e,n,r){if("get"===r&&!cp(this,yp)&&null!==this.sheetName&&this.engine.doesSheetExist(this.sheetName)){var o,l=this.hot.toVisualRow(t);if(!this.isFormulaCellType(l,e)&&"ARRAY"!==this.getCellType(l,e))return void(Yd(n.value)&&(n.value=Yd(o=n.value)?o.substr(1):o));var address={row:t,col:this.toPhysicalColumnPosition(e),sheet:this.sheetId},c=this.engine.getCellValue(address),f="object"===$d(c)&&null!==c?c.value:c;n.value=f}}},{key:"onModifySourceData",value:function(t,e,n,r){if("get"===r&&!cp(this,yp)&&null!==this.sheetName&&this.engine.doesSheetExist(this.sheetName)){var o=this.hot.toVisualRow(t),l=this.hot.propToCol(e);if(!this.isFormulaCellType(o,l)&&"ARRAY"!==this.getCellType(o,l))return;var c=this.engine.getSheetDimensions(this.engine.getSheetId(this.sheetName));if(0!==c.width||0!==c.height){var address={row:t,col:this.toPhysicalColumnPosition(l),sheet:this.sheetId};n.value=this.engine.getCellSerialized(address)}}}},{key:"onAfterSetDataAtCell",value:function(t,source){var e=this;if(!pp(source)){var n=[],r=[],o=this.engine.batch((function(){t.forEach((function(t){var o=qd(t,4),l=o[0],c=o[1],f=o[3],h=e.hot.propToCol(c),d=e.hot.toPhysicalRow(l),y=e.hot.toPhysicalColumn(h),address={row:d,col:y,sheet:e.sheetId};null!==d&&null!==y?e.syncChangeWithEngine(l,h,f):n.push([l,h,f]),r.push({address:address})}))}));n.length&&this.hot.addHookOnce("afterChange",(function(){var t=e.engine.batch((function(){n.forEach((function(t){var n=qd(t,3),r=n[0],o=n[1],l=n[2];e.syncChangeWithEngine(r,o,l)}))}));e.renderDependentSheets(t,!0)})),this.renderDependentSheets(o),this.validateDependentCells(o,r)}}},{key:"onAfterSetSourceDataAtCell",value:function(t,source){var e=this;if(!pp(source)){var n=[],r=[];t.forEach((function(t){var o=qd(t,4),l=o[0],c=o[1],f=o[3],h=e.hot.propToCol(c);if(Object(ie.isNumeric)(h)){var address={row:l,col:e.toPhysicalColumnPosition(h),sheet:e.sheetId};e.engine.isItPossibleToSetCellContents(address)?(r.push({address:address}),n.push.apply(n,Gd(e.engine.setCellContents(address,f)))):Object(kr.b)("Not possible to set source cell data at ".concat(JSON.stringify(address)))}})),this.renderDependentSheets(n),this.validateDependentCells(n,r)}}},{key:"onBeforeCreateRow",value:function(t,e){if(null===this.sheetId||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddRows(this.sheetId,[this.toPhysicalRowPosition(t),e]))return!1}},{key:"onBeforeCreateCol",value:function(col,t){if(null===this.sheetId||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddColumns(this.sheetId,[this.toPhysicalColumnPosition(col),t]))return!1}},{key:"onBeforeRemoveRow",value:function(t,e,n){var r=this;return!1!==n.every((function(t){return r.engine.isItPossibleToRemoveRows(r.sheetId,[t,1])}))&&void 0}},{key:"onBeforeRemoveCol",value:function(col,t,e){var n=this;return!1!==e.every((function(t){return n.engine.isItPossibleToRemoveColumns(n.sheetId,[t,1])}))&&void 0}},{key:"onAfterCreateRow",value:function(t,e,source){if(!pp(source)){var n=this.engine.addRows(this.sheetId,[this.toPhysicalRowPosition(t),e]);this.renderDependentSheets(n)}}},{key:"onAfterCreateCol",value:function(col,t,source){if(!pp(source)){var e=this.engine.addColumns(this.sheetId,[this.toPhysicalColumnPosition(col),t]);this.renderDependentSheets(e)}}},{key:"onAfterRemoveRow",value:function(t,e,n,source){var r=this;if(!pp(source)){var o=n.sort().reverse(),l=this.engine.batch((function(){o.forEach((function(t){r.engine.removeRows(r.sheetId,[t,1])}))}));this.renderDependentSheets(l)}}},{key:"onAfterRemoveCol",value:function(col,t,e,source){var n=this;if(!pp(source)){var r=e.sort().reverse(),o=this.engine.batch((function(){r.forEach((function(t){n.engine.removeColumns(n.sheetId,[t,1])}))}));this.renderDependentSheets(o)}}},{key:"onAfterDetachChild",value:function(t,element,e){var n,r=this;sp(this,yp,!0);var o=this.hot.getSourceDataArray(e,0,e+((null===(n=element.__children)||void 0===n?void 0:n.length)||0),this.hot.countSourceCols());sp(this,yp,!1),o.forEach((function(t,n){t.forEach((function(t,o){r.engine.setCellContents({col:o,row:e+n,sheet:r.sheetId},[[t]])}))}))}},{key:"onEngineValuesUpdated",value:function(t){this.hot.runHooks("afterFormulasValuesUpdate",t)}},{key:"onEngineNamedExpressionsAdded",value:function(t,e){this.hot.runHooks("afterNamedExpressionAdded",t,e)}},{key:"onEngineNamedExpressionsRemoved",value:function(t,e){this.hot.runHooks("afterNamedExpressionRemoved",t,e)}},{key:"onEngineSheetAdded",value:function(t){this.hot.runHooks("afterSheetAdded",t)}},{key:"onEngineSheetRenamed",value:function(t,e){this.hot.runHooks("afterSheetRenamed",t,e)}},{key:"onEngineSheetRemoved",value:function(t,e){this.hot.runHooks("afterSheetRemoved",t,e)}}],r=[{key:"PLUGIN_KEY",get:function(){return hp}},{key:"PLUGIN_PRIORITY",get:function(){return 260}}],n&&Qd(e.prototype,n),r&&Qd(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function mp(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return wp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wp(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wp(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Op(t){return function(t){if(Array.isArray(t))return Cp(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Cp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cp(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cp(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var Sp=n(843);function kp(t){return kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kp(t)}function jp(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rp(n.key),n)}}function Rp(t){var e=function(input,t){if("object"!==kp(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==kp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===kp(e)?e:String(e)}function Ep(){return Ep="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Tp(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Ep.apply(this,arguments)}function Pp(t,p){return Pp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Pp(t,p)}function Mp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Tp(t);if(e){var o=Tp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===kp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _p(t)}(this,n)}}function _p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tp(t){return Tp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Tp(t)}function Ap(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Ip(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Dp(t,e,"get"))}function xp(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Dp(t,e,"set"),n),n}function Dp(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}lt.a.getSingleton().register("beforeHideColumns"),lt.a.getSingleton().register("afterHideColumns"),lt.a.getSingleton().register("beforeUnhideColumns"),lt.a.getSingleton().register("afterUnhideColumns");var Np="hiddenColumns",Hp=new WeakMap,Lp=new WeakMap,Bp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pp(t,e)}(l,t);var e,n,r,o=Mp(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ap(_p(t=o.call.apply(o,[this].concat(n))),Hp,{writable:!0,value:{}}),Ap(_p(t),Lp,{writable:!0,value:null}),t}return e=l,n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[Np]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[Np];Object(h.isObject)(e)&&(xp(this,Hp,e),Object(R.isUndefined)(e.copyPasteEnabled)&&(e.copyPasteEnabled=!0)),xp(this,Lp,new Sp.a),Ip(this,Lp).addLocalHook("init",(function(){return t.onMapInit()})),this.hot.columnIndexMapper.registerMap(this.pluginName,Ip(this,Lp)),this.addHook("afterContextMenuDefaultOptions",(function(){return t.onAfterContextMenuDefaultOptions.apply(t,arguments)})),this.addHook("afterGetCellMeta",(function(e,col,n){return t.onAfterGetCellMeta(e,col,n)})),this.addHook("modifyColWidth",(function(e,col){return t.onModifyColWidth(e,col)})),this.addHook("afterGetColHeader",(function(){return t.onAfterGetColHeader.apply(t,arguments)})),this.addHook("modifyCopyableRange",(function(e){return t.onModifyCopyableRange(e)})),Ep(Tp(l.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),Ep(Tp(l.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),xp(this,Hp,{}),Ep(Tp(l.prototype),"disablePlugin",this).call(this),this.resetCellsMeta()}},{key:"showColumns",value:function(t){var e=this,n=this.getHiddenColumns(),r=this.isValidConfig(t),o=n,l=Ip(this,Lp).getValues().slice(),c=t.length>0;if(r&&c){var f=t.map((function(t){return e.hot.toPhysicalColumn(t)}));Object(j.arrayEach)(f,(function(t){l[t]=!1})),o=Object(j.arrayReduce)(l,(function(t,n,r){return n&&t.push(e.hot.toVisualColumn(r)),t}),[])}!1!==this.hot.runHooks("beforeUnhideColumns",n,o,r&&c)&&(r&&c&&Ip(this,Lp).setValues(l),this.hot.view.adjustElementsSize(),this.hot.runHooks("afterUnhideColumns",n,o,r&&c,r&&o.length<n.length))}},{key:"showColumn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.showColumns(e)}},{key:"hideColumns",value:function(t){var e=this,n=this.getHiddenColumns(),r=this.isValidConfig(t),o=n;r&&(o=Array.from(new Set(n.concat(t)))),!1!==this.hot.runHooks("beforeHideColumns",n,o,r)&&(r&&this.hot.batchExecution((function(){Object(j.arrayEach)(t,(function(t){Ip(e,Lp).setValueAtIndex(e.hot.toPhysicalColumn(t),!0)}))}),!0),this.hot.runHooks("afterHideColumns",n,o,r,r&&o.length>n.length))}},{key:"hideColumn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.hideColumns(e)}},{key:"getHiddenColumns",value:function(){var t=this;return Object(j.arrayMap)(Ip(this,Lp).getHiddenIndexes(),(function(e){return t.hot.toVisualColumn(e)}))}},{key:"isHidden",value:function(t){return Ip(this,Lp).getValueAtIndex(this.hot.toPhysicalColumn(t))||!1}},{key:"isValidConfig",value:function(t){var e=this.hot.countCols();return!!(Array.isArray(t)&&t.length>0)&&t.every((function(t){return Number.isInteger(t)&&t>=0&&t<e}))}},{key:"resetCellsMeta",value:function(){Object(j.arrayEach)(this.hot.getCellsMeta(),(function(meta){meta&&(meta.skipColumnOnPaste=!1)}))}},{key:"onModifyColWidth",value:function(t,e){return this.isHidden(e)?0:Ip(this,Hp).indicators&&(this.isHidden(e+1)||this.isHidden(e-1))&&"number"==typeof t&&this.hot.hasColHeaders()?t+15:void 0}},{key:"onAfterGetCellMeta",value:function(t,e,n){if(!1===Ip(this,Hp).copyPasteEnabled&&this.isHidden(e)&&(n.skipColumnOnPaste=!0),this.isHidden(e-1))n.className=n.className||"",-1===n.className.indexOf("afterHiddenColumn")&&(n.className+=" afterHiddenColumn");else if(n.className){var r=n.className.split(" ");if(r.length>0){var o=r.indexOf("afterHiddenColumn");o>-1&&r.splice(o,1),n.className=r.join(" ")}}}},{key:"onModifyCopyableRange",value:function(t){var e=this;if(Ip(this,Hp).copyPasteEnabled)return t;var n=[],r=function(t,e,r,o){n.push({startRow:t,endRow:e,startCol:r,endCol:o})};return Object(j.arrayEach)(t,(function(t){var n=!0,o=0;Object(ie.rangeEach)(t.startCol,t.endCol,(function(l){e.isHidden(l)?(n||r(t.startRow,t.endRow,o,l-1),n=!0):(n&&(o=l),l===t.endCol&&r(t.startRow,t.endRow,o,l),n=!1)}))})),n}},{key:"onAfterGetColHeader",value:function(t,e){if(Ip(this,Hp).indicators&&!(t<0)){var n=[];t>=1&&this.isHidden(t-1)&&n.push("afterHiddenColumn"),t<this.hot.countCols()-1&&this.isHidden(t+1)&&n.push("beforeHiddenColumn"),Object(c.addClass)(e,n)}}},{key:"onAfterContextMenuDefaultOptions",value:function(t){var e;t.items.push({name:Ci},(e=this,{key:"hidden_columns_hide",name:function(){var t=this.getSelectedLast(),e=0;if(Array.isArray(t)){var n=mp(t,4);n[1]-n[3]!=0&&(e=1)}return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_HIDE_COLUMN,e)},callback:function(){for(var t=this.getSelectedRangeLast(),n=t.from,r=t.to,o=Math.max(Math.min(n.col,r.col),0),l=Math.max(n.col,r.col),c=[],f=o;f<=l;f+=1)c.push(f);e.hideColumns(c);var h=c[c.length-1],d=this.columnIndexMapper.getNearestNotHiddenIndex(h,1,!0);Number.isInteger(d)&&d>=0?this.selectColumns(d):this.deselectCell(),this.render(),this.view.adjustElementsSize(!0)},disabled:!1,hidden:function(){return!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())}}),function(t){var e=[];return{key:"hidden_columns_show",name:function(){var t=e.length>1?1:0;return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_SHOW_COLUMN,t)},callback:function(){var n,r;if(0!==e.length){var o=e[0],l=e[e.length-1];o=null!==(n=this.columnIndexMapper.getNearestNotHiddenIndex(o-1,-1))&&void 0!==n?n:0,l=null!==(r=this.columnIndexMapper.getNearestNotHiddenIndex(l+1,1))&&void 0!==r?r:this.countCols()-1,t.showColumns(e),this.render(),this.view.adjustElementsSize(!0),l-o+1===this.countCols()||this.selectColumns(o,l)}},disabled:!1,hidden:function(){var n=this,r=Object(j.arrayMap)(t.getHiddenColumns(),(function(t){return n.toPhysicalColumn(t)}));if(!this.selection.isSelectedByColumnHeader()&&!this.selection.isSelectedByCorner()||r.length<1)return!0;e.length=0;var o=this.getSelectedRangeLast(),l=o.getTopStartCorner().col,c=o.getBottomEndCorner().col,f=this.columnIndexMapper,h=f.getRenderableFromVisualIndex(l),d=f.getRenderableFromVisualIndex(c),y=f.getNotTrimmedIndexes(),v=[];if(l!==c){if(c-l+1>d-h+1){var m=y.slice(l,c+1);v.push.apply(v,Op(m.filter((function(t){return r.includes(t)}))))}}else if(0===h&&h<l)v.push.apply(v,Op(y.slice(0,l)));else if(null===h)v.push.apply(v,Op(y.slice(0,this.countCols())));else{var w=this.countCols()-1;d===f.getRenderableFromVisualIndex(f.getNearestNotHiddenIndex(w,-1))&&w>c&&v.push.apply(v,Op(y.slice(c+1)))}return Object(j.arrayEach)(v,(function(t){e.push(n.toVisualColumn(t))})),0===e.length}}}(this))}},{key:"onMapInit",value:function(){Array.isArray(Ip(this,Hp).columns)&&this.hideColumns(Ip(this,Hp).columns)}},{key:"destroy",value:function(){xp(this,Hp,null),xp(this,Lp,null),Ep(Tp(l.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return Np}},{key:"PLUGIN_PRIORITY",get:function(){return 310}}],n&&jp(e.prototype,n),r&&jp(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function Up(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return Fp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fp(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fp(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Vp(t){return function(t){if(Array.isArray(t))return Wp(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Wp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wp(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wp(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function zp(t){return zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zp(t)}function Yp(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gp(n.key),n)}}function Gp(t){var e=function(input,t){if("object"!==zp(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==zp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===zp(e)?e:String(e)}function Kp(){return Kp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Zp(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Kp.apply(this,arguments)}function Xp(t,p){return Xp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Xp(t,p)}function $p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Zp(t);if(e){var o=Zp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===zp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qp(t)}(this,n)}}function qp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zp(t){return Zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zp(t)}function Jp(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Qp(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,ey(t,e,"get"))}function ty(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,ey(t,e,"set"),n),n}function ey(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}lt.a.getSingleton().register("beforeHideRows"),lt.a.getSingleton().register("afterHideRows"),lt.a.getSingleton().register("beforeUnhideRows"),lt.a.getSingleton().register("afterUnhideRows");var ny="hiddenRows",ry=new WeakMap,oy=new WeakMap,iy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xp(t,e)}(l,t);var e,n,r,o=$p(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Jp(qp(t=o.call.apply(o,[this].concat(n))),ry,{writable:!0,value:{}}),Jp(qp(t),oy,{writable:!0,value:null}),t}return e=l,n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[ny]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[ny];Object(h.isObject)(e)&&(ty(this,ry,e),Object(R.isUndefined)(e.copyPasteEnabled)&&(e.copyPasteEnabled=!0)),ty(this,oy,new Sp.a),Qp(this,oy).addLocalHook("init",(function(){return t.onMapInit()})),this.hot.rowIndexMapper.registerMap(this.pluginName,Qp(this,oy)),this.addHook("afterContextMenuDefaultOptions",(function(){return t.onAfterContextMenuDefaultOptions.apply(t,arguments)})),this.addHook("afterGetCellMeta",(function(e,col,n){return t.onAfterGetCellMeta(e,col,n)})),this.addHook("modifyRowHeight",(function(e,n){return t.onModifyRowHeight(e,n)})),this.addHook("afterGetRowHeader",(function(){return t.onAfterGetRowHeader.apply(t,arguments)})),this.addHook("modifyCopyableRange",(function(e){return t.onModifyCopyableRange(e)})),Kp(Zp(l.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),Kp(Zp(l.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.hot.rowIndexMapper.unregisterMap(this.pluginName),ty(this,ry,{}),Kp(Zp(l.prototype),"disablePlugin",this).call(this),this.resetCellsMeta()}},{key:"showRows",value:function(t){var e=this,n=this.getHiddenRows(),r=this.isValidConfig(t),o=n,l=Qp(this,oy).getValues().slice(),c=t.length>0;if(r&&c){var f=t.map((function(t){return e.hot.toPhysicalRow(t)}));Object(j.arrayEach)(f,(function(t){l[t]=!1})),o=Object(j.arrayReduce)(l,(function(t,n,r){return n&&t.push(e.hot.toVisualRow(r)),t}),[])}!1!==this.hot.runHooks("beforeUnhideRows",n,o,r&&c)&&(r&&c&&Qp(this,oy).setValues(l),this.hot.runHooks("afterUnhideRows",n,o,r&&c,r&&o.length<n.length))}},{key:"showRow",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.showRows(e)}},{key:"hideRows",value:function(t){var e=this,n=this.getHiddenRows(),r=this.isValidConfig(t),o=n;r&&(o=Array.from(new Set(n.concat(t)))),!1!==this.hot.runHooks("beforeHideRows",n,o,r)&&(r&&this.hot.batchExecution((function(){Object(j.arrayEach)(t,(function(t){Qp(e,oy).setValueAtIndex(e.hot.toPhysicalRow(t),!0)}))}),!0),this.hot.runHooks("afterHideRows",n,o,r,r&&o.length>n.length))}},{key:"hideRow",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.hideRows(e)}},{key:"getHiddenRows",value:function(){var t=this;return Object(j.arrayMap)(Qp(this,oy).getHiddenIndexes(),(function(e){return t.hot.toVisualRow(e)}))}},{key:"isHidden",value:function(t){return Qp(this,oy).getValueAtIndex(this.hot.toPhysicalRow(t))||!1}},{key:"isValidConfig",value:function(t){var e=this.hot.countRows();return!!(Array.isArray(t)&&t.length>0)&&t.every((function(t){return Number.isInteger(t)&&t>=0&&t<e}))}},{key:"resetCellsMeta",value:function(){Object(j.arrayEach)(this.hot.getCellsMeta(),(function(meta){meta&&(meta.skipRowOnPaste=!1)}))}},{key:"onModifyRowHeight",value:function(t,e){return this.isHidden(e)?0:t}},{key:"onAfterGetCellMeta",value:function(t,e,n){if(!1===Qp(this,ry).copyPasteEnabled&&this.isHidden(t)&&(n.skipRowOnPaste=!0),this.isHidden(t-1))n.className=n.className||"",-1===n.className.indexOf("afterHiddenRow")&&(n.className+=" afterHiddenRow");else if(n.className){var r=n.className.split(" ");if(r.length>0){var o=r.indexOf("afterHiddenRow");o>-1&&r.splice(o,1),n.className=r.join(" ")}}}},{key:"onModifyCopyableRange",value:function(t){var e=this;if(Qp(this,ry).copyPasteEnabled)return t;var n=[],r=function(t,e,r,o){n.push({startRow:t,endRow:e,startCol:r,endCol:o})};return Object(j.arrayEach)(t,(function(t){var n=!0,o=0;Object(ie.rangeEach)(t.startRow,t.endRow,(function(l){e.isHidden(l)?(n||r(o,l-1,t.startCol,t.endCol),n=!0):(n&&(o=l),l===t.endRow&&r(o,l,t.startCol,t.endCol),n=!1)}))})),n}},{key:"onAfterGetRowHeader",value:function(t,e){if(Qp(this,ry).indicators&&!(t<0)){var n=[];t>=1&&this.isHidden(t-1)&&n.push("afterHiddenRow"),t<this.hot.countRows()-1&&this.isHidden(t+1)&&n.push("beforeHiddenRow"),Object(c.addClass)(e,n)}}},{key:"onAfterContextMenuDefaultOptions",value:function(t){var e;t.items.push({name:Ci},(e=this,{key:"hidden_rows_hide",name:function(){var t=this.getSelectedLast(),e=0;if(Array.isArray(t)){var n=Up(t,3);n[0]-n[2]!=0&&(e=1)}return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_HIDE_ROW,e)},callback:function(){for(var t=this.getSelectedRangeLast(),n=t.from,r=t.to,o=Math.max(Math.min(n.row,r.row),0),l=Math.max(n.row,r.row),c=[],f=o;f<=l;f+=1)c.push(f);e.hideRows(c);var h=c[c.length-1],d=this.rowIndexMapper.getNearestNotHiddenIndex(h,1,!0);Number.isInteger(d)&&d>=0?this.selectRows(d):this.deselectCell(),this.render(),this.view.adjustElementsSize(!0)},disabled:!1,hidden:function(){return!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())}}),function(t){var e=[];return{key:"hidden_rows_show",name:function(){var t=e.length>1?1:0;return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_SHOW_ROW,t)},callback:function(){var n,r;if(0!==e.length){var o=e[0],l=e[e.length-1];o=null!==(n=this.rowIndexMapper.getNearestNotHiddenIndex(o-1,-1))&&void 0!==n?n:0,l=null!==(r=this.rowIndexMapper.getNearestNotHiddenIndex(l+1,1))&&void 0!==r?r:this.countRows()-1,t.showRows(e),this.render(),this.view.adjustElementsSize(!0),l-o+1===this.countRows()||this.selectRows(o,l)}},disabled:!1,hidden:function(){var n=this,r=Object(j.arrayMap)(t.getHiddenRows(),(function(t){return n.toPhysicalRow(t)}));if(!this.selection.isSelectedByRowHeader()&&!this.selection.isSelectedByCorner()||r.length<1)return!0;e.length=0;var o=this.getSelectedRangeLast(),l=o.getTopStartCorner().row,c=o.getBottomEndCorner().row,f=this.rowIndexMapper,h=f.getRenderableFromVisualIndex(l),d=f.getRenderableFromVisualIndex(c),y=f.getNotTrimmedIndexes(),v=[];if(l!==c){if(c-l+1>d-h+1){var m=y.slice(l,c+1);v.push.apply(v,Vp(m.filter((function(t){return r.includes(t)}))))}}else if(0===h&&h<l)v.push.apply(v,Vp(y.slice(0,l)));else if(null===h)v.push.apply(v,Vp(y.slice(0,this.countRows())));else{var w=this.countRows()-1;d===f.getRenderableFromVisualIndex(f.getNearestNotHiddenIndex(w,-1))&&w>c&&v.push.apply(v,Vp(y.slice(c+1)))}return Object(j.arrayEach)(v,(function(t){e.push(n.toVisualRow(t))})),0===e.length}}}(this))}},{key:"onMapInit",value:function(){Array.isArray(Qp(this,ry).rows)&&this.hideRows(Qp(this,ry).rows)}},{key:"destroy",value:function(){ty(this,ry,null),ty(this,oy,null),Kp(Zp(l.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return ny}},{key:"PLUGIN_PRIORITY",get:function(){return 320}}],n&&Yp(e.prototype,n),r&&Yp(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function ay(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return ly(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ly(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ly(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function uy(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return sy(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sy(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sy(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function cy(t){return cy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cy(t)}function fy(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hy(n.key),n)}}function hy(t){var e=function(input,t){if("object"!==cy(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==cy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===cy(e)?e:String(e)}function dy(){return dy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=vy(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},dy.apply(this,arguments)}function py(t,p){return py=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},py(t,p)}function yy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=vy(t);if(e){var o=vy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===cy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gy(t)}(this,n)}}function gy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vy(t){return vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vy(t)}lt.a.getSingleton().register("beforeColumnFreeze"),lt.a.getSingleton().register("afterColumnFreeze"),lt.a.getSingleton().register("beforeColumnUnfreeze"),lt.a.getSingleton().register("afterColumnUnfreeze");var by="manualColumnFreeze",my=new WeakMap,wy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&py(t,e)}(l,t);var e,n,r,o=yy(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),e=o.call(this,t),my.set(gy(e),{afterFirstUse:!1}),e}return e=l,r=[{key:"PLUGIN_KEY",get:function(){return by}},{key:"PLUGIN_PRIORITY",get:function(){return 110}}],(n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[by]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("afterContextMenuDefaultOptions",(function(e){return t.addContextMenuEntry(e)})),this.addHook("beforeColumnMove",(function(e,n){return t.onBeforeColumnMove(e,n)})),dy(vy(l.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){my.get(this).afterFirstUse=!1,dy(vy(l.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),dy(vy(l.prototype),"updatePlugin",this).call(this)}},{key:"freezeColumn",value:function(t){var e=my.get(this),n=this.hot.getSettings(),r=n.fixedColumnsStart<this.hot.countCols()&&t>n.fixedColumnsStart-1;e.afterFirstUse||(e.afterFirstUse=!0),!1!==this.hot.runHooks("beforeColumnFreeze",t,r)&&(r&&(this.hot.columnIndexMapper.moveIndexes(t,n.fixedColumnsStart),n._fixedColumnsStart+=1),this.hot.runHooks("afterColumnFreeze",t,r))}},{key:"unfreezeColumn",value:function(t){var e=my.get(this),n=this.hot.getSettings(),r=n.fixedColumnsStart>0&&t<=n.fixedColumnsStart-1;e.afterFirstUse||(e.afterFirstUse=!0),!1!==this.hot.runHooks("beforeColumnUnfreeze",t,r)&&(r&&(n._fixedColumnsStart-=1,this.hot.columnIndexMapper.moveIndexes(t,n.fixedColumnsStart)),this.hot.runHooks("afterColumnUnfreeze",t,r))}},{key:"addContextMenuEntry",value:function(t){var e;t.items.push({name:"---------"},(e=this,{key:"freeze_column",name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_FREEZE_COLUMN)},callback:function(t,n){var r=ay(n,1)[0].start.col;e.freezeColumn(r),this.render(),this.view.adjustElementsSize(!0)},hidden:function(){var t=this.getSelectedRange(),e=!1;return(void 0===t||t.length>1||t[0].from.col!==t[0].to.col||t[0].from.col<=this.getSettings().fixedColumnsStart-1)&&(e=!0),e}}),function(t){return{key:"unfreeze_column",name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_UNFREEZE_COLUMN)},callback:function(e,n){var r=uy(n,1)[0].start.col;t.unfreezeColumn(r),this.render(),this.view.adjustElementsSize(!0)},hidden:function(){var t=this.getSelectedRange(),e=!1;return(void 0===t||t.length>1||t[0].from.col!==t[0].to.col||t[0].from.col>=this.getSettings().fixedColumnsStart)&&(e=!0),e}}}(this))}},{key:"onBeforeColumnMove",value:function(t,e){if(my.get(this).afterFirstUse){var n=this.hot.getSettings().fixedColumnsStart;if(e<n)return!1;if(t.some((function(t){return t<n})))return!1}}}])&&fy(e.prototype,n),r&&fy(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function Oy(t){return Oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oy(t)}function Cy(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sy(n.key),n)}}function Sy(t){var e=function(input,t){if("object"!==Oy(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Oy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Oy(e)?e:String(e)}var ky=0,jy="px",Ry=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hot=e,this._element=null,this.state=ky,this.inlineProperty=e.isRtl()?"right":"left"}var e,n,r;return e=t,(n=[{key:"appendTo",value:function(t){t.appendChild(this._element),this.state=2}},{key:"build",value:function(){this.state===ky&&(this._element=this.hot.rootDocument.createElement("div"),this.state=1)}},{key:"destroy",value:function(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=ky}},{key:"isAppended",value:function(){return 2===this.state}},{key:"isBuilt",value:function(){return this.state>=1}},{key:"setPosition",value:function(t,e){Object(ie.isNumeric)(t)&&(this._element.style.top=t+jy),Object(ie.isNumeric)(e)&&(this._element.style[this.inlineProperty]=e+jy)}},{key:"getPosition",value:function(){var style=this._element.style;return{top:style.top?parseInt(style.top,10):0,start:style[this.inlineProperty]?parseInt(style[this.inlineProperty],10):0}}},{key:"setSize",value:function(t,e){Object(ie.isNumeric)(t)&&(this._element.style.width=t+jy),Object(ie.isNumeric)(e)&&(this._element.style.height=e+jy)}},{key:"getSize",value:function(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}},{key:"setOffset",value:function(t,e){Object(ie.isNumeric)(t)&&(this._element.style.marginTop=t+jy),Object(ie.isNumeric)(e)&&(this._element.style["margin".concat(Object(E.toUpperCaseFirst)(this.inlineProperty))]=e+jy)}},{key:"getOffset",value:function(){var style=this._element.style,t="margin".concat(Object(E.toUpperCaseFirst)(this.inlineProperty));return{top:style.marginTop?parseInt(style.marginTop,10):0,start:style[t]?parseInt(style[t],10):0}}}])&&Cy(e.prototype,n),r&&Cy(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ey(t){return Ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ey(t)}function Py(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,My(n.key),n)}}function My(t){var e=function(input,t){if("object"!==Ey(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Ey(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Ey(e)?e:String(e)}function _y(){return _y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Iy(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},_y.apply(this,arguments)}function Ty(t,p){return Ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Ty(t,p)}function Ay(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Iy(t);if(e){var o=Iy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Ey(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Iy(t){return Iy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Iy(t)}var xy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ty(t,e)}(l,t);var e,n,r,o=Ay(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),o.apply(this,arguments)}return e=l,(n=[{key:"build",value:function(){_y(Iy(l.prototype),"build",this).call(this),Object(c.addClass)(this._element,"ht__manualColumnMove--backlight")}}])&&Py(e.prototype,n),r&&Py(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Ry),Dy=xy;function Ny(t){return Ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ny(t)}function Hy(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ly(n.key),n)}}function Ly(t){var e=function(input,t){if("object"!==Ny(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Ny(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Ny(e)?e:String(e)}function By(){return By="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Vy(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},By.apply(this,arguments)}function Uy(t,p){return Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Uy(t,p)}function Fy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Vy(t);if(e){var o=Vy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Ny(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Vy(t){return Vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vy(t)}var Wy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uy(t,e)}(l,t);var e,n,r,o=Fy(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),o.apply(this,arguments)}return e=l,(n=[{key:"build",value:function(){By(Vy(l.prototype),"build",this).call(this),Object(c.addClass)(this._element,"ht__manualColumnMove--guideline")}}])&&Hy(e.prototype,n),r&&Hy(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Ry),zy=Wy;function Yy(t){return Yy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yy(t)}function Gy(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ky(n.key),n)}}function Ky(t){var e=function(input,t){if("object"!==Yy(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Yy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Yy(e)?e:String(e)}function Xy(){return Xy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Jy(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Xy.apply(this,arguments)}function $y(t,p){return $y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},$y(t,p)}function qy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jy(t);if(e){var o=Jy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Yy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Zy(t)}(this,n)}}function Zy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jy(t){return Jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jy(t)}lt.a.getSingleton().register("beforeColumnMove"),lt.a.getSingleton().register("afterColumnMove");var Qy="manualColumnMove",tg=new WeakMap,eg="ht__manualColumnMove",ng="show-ui",rg="on-moving--columns",og="after-selection--columns",ig=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$y(t,e)}(l,t);var e,n,r,o=qy(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),e=o.call(this,t),tg.set(Zy(e),{columnsToMove:[],countCols:0,fixedColumns:0,pressed:void 0,target:{eventPageX:void 0,coords:void 0,TD:void 0,col:void 0},cachedDropIndex:void 0}),e.eventManager=new $.a(Zy(e)),e.backlight=new Dy(t),e.guideline=new zy(t),e}return e=l,n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[Qy]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("beforeOnCellMouseDown",(function(){return t.onBeforeOnCellMouseDown.apply(t,arguments)})),this.addHook("beforeOnCellMouseOver",(function(){return t.onBeforeOnCellMouseOver.apply(t,arguments)})),this.addHook("afterScrollVertically",(function(){return t.onAfterScrollVertically()})),this.addHook("afterLoadData",(function(){return t.onAfterLoadData.apply(t,arguments)})),this.buildPluginUI(),this.registerEvents(),Object(c.addClass)(this.hot.rootElement,eg),Xy(Jy(l.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),Xy(Jy(l.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){Object(c.removeClass)(this.hot.rootElement,eg),this.unregisterEvents(),this.backlight.destroy(),this.guideline.destroy(),Xy(Jy(l.prototype),"disablePlugin",this).call(this)}},{key:"moveColumn",value:function(t,e){return this.moveColumns([t],e)}},{key:"moveColumns",value:function(t,e){var n=tg.get(this),r=n.cachedDropIndex,o=this.isMovePossible(t,e),l=this.hot.runHooks("beforeColumnMove",t,e,r,o);if(n.cachedDropIndex=void 0,!1!==l){o&&this.hot.columnIndexMapper.moveIndexes(t,e);var c=o&&this.isColumnOrderChanged(t,e);return this.hot.runHooks("afterColumnMove",t,e,r,o,c),c}}},{key:"dragColumn",value:function(t,e){return this.dragColumns([t],e)}},{key:"dragColumns",value:function(t,e){var n=this.countFinalIndex(t,e);return tg.get(this).cachedDropIndex=e,this.moveColumns(t,n)}},{key:"isMovePossible",value:function(t,e){var n=this.hot.columnIndexMapper.getNotTrimmedIndexesLength(),r=t.length+e>n,o=e<0,l=t.some((function(t){return t<0})),c=t.some((function(t){return t>=n}));return!(r||o||l||c)}},{key:"isColumnOrderChanged",value:function(t,e){return t.some((function(t,n){return t-n!==e}))}},{key:"countFinalIndex",value:function(t,e){var n=Object(j.arrayReduce)(t,(function(t,n){return n<e&&(t+=1),t}),0);return e-n}},{key:"getColumnsWidth",value:function(t,e){for(var n=this.hot.columnIndexMapper,r=0,o=t;o<=e;o+=1){var l=n.getRenderableFromVisualIndex(o);o<0?r+=this.hot.view._wt.wtViewport.getRowHeaderWidth()||0:null!==l&&(r+=this.hot.view._wt.wtTable.getStretchedColumnWidth(l)||0)}return r}},{key:"moveBySettingsOrLoad",value:function(){var t=this.hot.getSettings()[Qy];if(Array.isArray(t))this.moveColumns(t,0);else if(void 0!==t){var e=this.persistentStateLoad();e.length&&this.moveColumns(e,0)}}},{key:"isFixedColumnsStart",value:function(t){return t<this.hot.getSettings().fixedColumnsStart}},{key:"persistentStateSave",value:function(){this.hot.runHooks("persistentStateSave","manualColumnMove",this.hot.columnIndexMapper.getIndexesSequence())}},{key:"persistentStateLoad",value:function(){var t={};return this.hot.runHooks("persistentStateLoad","manualColumnMove",t),t.value?t.value:[]}},{key:"prepareColumnsToMoving",value:function(t,e){var n=[];return Object(ie.rangeEach)(t,e,(function(i){n.push(i)})),n}},{key:"refreshPositions",value:function(){var t=tg.get(this),e=this.hot.view.getFirstFullyVisibleColumn();this.isFixedColumnsStart(t.hoveredColumn)&&e>0&&this.hot.scrollViewportTo(void 0,this.hot.columnIndexMapper.getNearestNotHiddenIndex(e-1,-1));var n=this.hot.view._wt.wtTable,r=this.hot.view._wt.wtOverlays.scrollableElement,o="number"==typeof r.scrollX?r.scrollX:r.scrollLeft,l=this.hot.view.THEAD.offsetLeft+this.getColumnsWidth(0,t.hoveredColumn-1),f=n.hider.offsetWidth,h=n.TBODY.offsetLeft,d=this.backlight.getOffset().start,y=this.backlight.getSize().width,v=0,m=0;if(this.hot.isRtl()){var w=this.hot.rootWindow,O=Object(c.outerWidth)(this.hot.rootElement),C=w.innerWidth-t.rootElementOffset-O;m=w.innerWidth-t.target.eventPageX-C-(void 0===r.scrollX?o:0)}else m=t.target.eventPageX-(t.rootElementOffset-(void 0===r.scrollX?o:0));if(t.hasRowHeaders&&(v=this.hot.view._wt.wtOverlays.inlineStartOverlay.clone.wtTable.getColumnHeader(-1).offsetWidth),this.isFixedColumnsStart(t.hoveredColumn)&&(l+=o),l+=v,t.hoveredColumn<0)t.fixedColumnsStart>0?t.target.col=0:t.target.col=e>0?e-1:e;else if(t.target.TD.offsetWidth/2+l<=m){var S=t.hoveredColumn>=t.countCols?t.countCols-1:t.hoveredColumn;t.target.col=S+1,l+=t.target.TD.offsetWidth}else t.target.col=t.hoveredColumn;var k=m,j=l;m+y+d>=f?k=f-y-d:m+d<h+v&&(k=h+v+Math.abs(d)),l>=f-1?j=f-1:0===j?j=1:void 0!==r.scrollX&&t.hoveredColumn<t.fixedColumnsStart&&(j-=t.rootElementOffset<=r.scrollX?t.rootElementOffset:0),this.backlight.setPosition(null,k),this.guideline.setPosition(null,j)}},{key:"registerEvents",value:function(){var t=this,e=this.hot.rootDocument.documentElement;this.eventManager.addEventListener(e,"mousemove",(function(e){return t.onMouseMove(e)})),this.eventManager.addEventListener(e,"mouseup",(function(){return t.onMouseUp()}))}},{key:"unregisterEvents",value:function(){this.eventManager.clear()}},{key:"onBeforeOnCellMouseDown",value:function(t,e,n,r){var o=this.hot.view._wt.wtTable,l=this.hot.selection.isSelectedByColumnHeader(),f=this.hot.getSelectedRangeLast(),h=tg.get(this),d=Object(c.hasClass)(t.target,"sortAction");if(!f||!l||h.pressed||0!==t.button||d)return h.pressed=!1,h.columnsToMove.length=0,void Object(c.removeClass)(this.hot.rootElement,[rg,ng]);var y=this.guideline.isBuilt()&&!this.guideline.isAppended(),v=this.backlight.isBuilt()&&!this.backlight.isAppended();y&&v&&(this.guideline.appendTo(o.hider),this.backlight.appendTo(o.hider));var m=f.from,w=f.to,O=Math.min(m.col,w.col),C=Math.max(m.col,w.col);if(e.row<0&&e.col>=O&&e.col<=C){r.column=!0,h.pressed=!0,h.target.eventPageX=t.pageX,h.target.eventOffsetX=t.offsetX,h.hoveredColumn=e.col,h.target.TD=n,h.target.col=e.col,h.columnsToMove=this.prepareColumnsToMoving(O,C),h.hasRowHeaders=!!this.hot.getSettings().rowHeaders,h.countCols=this.hot.countCols(),h.fixedColumnsStart=this.hot.getSettings().fixedColumnsStart,h.rootElementOffset=Object(c.offset)(this.hot.rootElement).left;var S=h.hasRowHeaders?-1:0,k=o.holder.scrollTop+o.getColumnHeaderHeight(0)+1,j=e.col<h.fixedColumnsStart,R=Math.abs(this.hot.view._wt.wtOverlays.inlineStartOverlay.getScrollPosition()),E=Math.abs(t.offsetX-(this.hot.isRtl()?t.target.offsetWidth:0)),P=this.getColumnsWidth(O,e.col-1)+E,M=this.getColumnsWidth(S,O-1)+(j?R:0)+P;this.backlight.setPosition(k,M),this.backlight.setSize(this.getColumnsWidth(O,C),o.hider.offsetHeight-k),this.backlight.setOffset(null,-P),Object(c.addClass)(this.hot.rootElement,rg)}else Object(c.removeClass)(this.hot.rootElement,og),h.pressed=!1,h.columnsToMove.length=0}},{key:"onMouseMove",value:function(t){var e=tg.get(this);if(e.pressed){if(t.target===this.backlight.element){var n=this.backlight.getSize().width;this.backlight.setSize(0),setTimeout((function(){this.backlight.setPosition(n)}))}e.target.eventPageX=t.pageX,this.refreshPositions()}}},{key:"onBeforeOnCellMouseOver",value:function(t,e,n,r){var o=this.hot.getSelectedRangeLast(),l=tg.get(this);o&&l.pressed&&(l.columnsToMove.indexOf(e.col)>-1?Object(c.removeClass)(this.hot.rootElement,ng):Object(c.addClass)(this.hot.rootElement,ng),r.row=!0,r.column=!0,r.cell=!0,l.hoveredColumn=e.col,l.target.TD=n)}},{key:"onMouseUp",value:function(){var t=tg.get(this),e=t.target.col,n=t.columnsToMove.length;if(t.hoveredColumn=void 0,t.pressed=!1,t.backlightWidth=0,Object(c.removeClass)(this.hot.rootElement,[rg,ng,og]),this.hot.selection.isSelectedByColumnHeader()&&Object(c.addClass)(this.hot.rootElement,og),!(n<1||void 0===e)){var r=t.columnsToMove[0],o=this.hot.toPhysicalColumn(r),l=this.dragColumns(t.columnsToMove,e);if(t.columnsToMove.length=0,!0===l){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize(!0);var f=this.hot.toVisualColumn(o),h=f+n-1;this.hot.selectColumns(f,h)}}}},{key:"onAfterScrollVertically",value:function(){var t=this.hot.view._wt.wtTable,e=t.getColumnHeaderHeight(0)+1+t.holder.scrollTop;this.backlight.setPosition(e),this.backlight.setSize(null,t.hider.offsetHeight-e)}},{key:"buildPluginUI",value:function(){this.backlight.build(),this.guideline.build()}},{key:"onAfterLoadData",value:function(){this.moveBySettingsOrLoad()}},{key:"destroy",value:function(){this.backlight.destroy(),this.guideline.destroy(),Xy(Jy(l.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return Qy}},{key:"PLUGIN_PRIORITY",get:function(){return 120}}],n&&Gy(e.prototype,n),r&&Gy(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function ag(t){return ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ag(t)}function lg(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ug(n.key),n)}}function ug(t){var e=function(input,t){if("object"!==ag(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==ag(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===ag(e)?e:String(e)}function sg(){return sg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=dg(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},sg.apply(this,arguments)}function cg(t,p){return cg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},cg(t,p)}function fg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=dg(t);if(e){var o=dg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===ag(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return hg(t)}(this,n)}}function hg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dg(t){return dg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dg(t)}var pg="manualColumnResize",yg="manualColumnWidths",gg=new WeakMap,vg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cg(t,e)}(l,t);var e,n,r,o=fg(l);function l(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var n=(e=o.call(this,t)).hot.rootDocument;return e.currentTH=null,e.currentCol=null,e.selectedCols=[],e.currentWidth=null,e.newSize=null,e.startY=null,e.startWidth=null,e.startOffset=null,e.handle=n.createElement("DIV"),e.guide=n.createElement("DIV"),e.eventManager=new $.a(hg(e)),e.pressed=null,e.dblclick=0,e.autoresizeTimeout=null,e.columnWidthsMap=void 0,gg.set(hg(e),{config:void 0}),Object(c.addClass)(e.handle,"manualColumnResizer"),Object(c.addClass)(e.guide,"manualColumnResizerGuide"),e}return e=l,r=[{key:"PLUGIN_KEY",get:function(){return pg}},{key:"PLUGIN_PRIORITY",get:function(){return 130}}],(n=[{key:"inlineDir",get:function(){return this.hot.isRtl()?"right":"left"}},{key:"isEnabled",value:function(){return this.hot.getSettings()[pg]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.columnWidthsMap=new tn.a,this.columnWidthsMap.addLocalHook("init",(function(){return t.onMapInit()})),this.hot.columnIndexMapper.registerMap(this.pluginName,this.columnWidthsMap),this.addHook("modifyColWidth",(function(e,col){return t.onModifyColWidth(e,col)})),this.addHook("beforeStretchingColumnWidth",(function(e,n){return t.onBeforeStretchingColumnWidth(e,n)})),this.addHook("beforeColumnResize",(function(e,n,r){return t.onBeforeColumnResize(e,n,r)})),this.bindEvents(),sg(dg(l.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),sg(dg(l.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){gg.get(this).config=this.columnWidthsMap.getValues(),this.hot.columnIndexMapper.unregisterMap(this.pluginName),sg(dg(l.prototype),"disablePlugin",this).call(this)}},{key:"saveManualColumnWidths",value:function(){this.hot.runHooks("persistentStateSave",yg,this.columnWidthsMap.getValues())}},{key:"loadManualColumnWidths",value:function(){var t={};return this.hot.runHooks("persistentStateLoad",yg,t),t.value}},{key:"setManualSize",value:function(t,e){var n=Math.max(e,20),r=this.hot.toPhysicalColumn(t);return this.columnWidthsMap.setValueAtIndex(r,n),n}},{key:"clearManualSize",value:function(t){var e=this.hot.toPhysicalColumn(t);this.columnWidthsMap.setValueAtIndex(e,null)}},{key:"onMapInit",value:function(){var t=this,e=gg.get(this),n=this.hot.getSettings()[pg],r=this.loadManualColumnWidths();void 0!==r?this.hot.batchExecution((function(){r.forEach((function(e,n){t.columnWidthsMap.setValueAtIndex(n,e)}))}),!0):Array.isArray(n)?(this.hot.batchExecution((function(){n.forEach((function(e,n){t.columnWidthsMap.setValueAtIndex(n,e)}))}),!0),e.config=n):!0===n&&Array.isArray(e.config)&&this.hot.batchExecution((function(){e.config.forEach((function(e,n){t.columnWidthsMap.setValueAtIndex(n,e)}))}),!0)}},{key:"setupHandlePosition",value:function(t){var e=this;if(t.parentNode){this.currentTH=t;var n=this.hot.view._wt,r=n.wtTable.getCoords(this.currentTH),col=r.col;if(!(col<0)){var o,l=Object(c.outerHeight)(this.currentTH),f=this.currentTH.getBoundingClientRect();col<n.getSetting("fixedColumnsStart")&&(o=n.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(this.currentTH,r.row,r.col)),o||(o=n.wtOverlays.topOverlay.getRelativeCellPosition(this.currentTH,r.row,r.col)),this.currentCol=this.hot.columnIndexMapper.getVisualFromRenderableIndex(col),this.selectedCols=[];var h=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByColumnHeader();if(this.hot.selection.isSelected()&&h){var d=this.hot.getSelectedRange();Object(j.arrayEach)(d,(function(t){var n=t.getTopStartCorner().col,r=t.getBottomEndCorner().col;Object(ie.rangeEach)(n,r,(function(t){e.selectedCols.includes(t)||e.selectedCols.push(t)}))}))}this.selectedCols.includes(this.currentCol)||(this.selectedCols=[this.currentCol]),this.startOffset=o.start-6,this.startWidth=parseInt(f.width,10),this.handle.style.top="".concat(o.top,"px"),this.handle.style[this.inlineDir]="".concat(this.startOffset+this.startWidth,"px"),this.handle.style.height="".concat(l,"px"),this.hot.rootElement.appendChild(this.handle)}}}},{key:"refreshHandlePosition",value:function(){this.handle.style[this.inlineDir]="".concat(this.startOffset+this.currentWidth,"px")}},{key:"setupGuidePosition",value:function(){var t=parseInt(Object(c.outerHeight)(this.handle),10),e=parseInt(this.handle.style.top,10)+t,n=parseInt(this.hot.view.maximumVisibleElementHeight(0),10);Object(c.addClass)(this.handle,"active"),Object(c.addClass)(this.guide,"active"),this.guide.style.top="".concat(e,"px"),this.refreshGuidePosition(),this.guide.style.height="".concat(n-t,"px"),this.hot.rootElement.appendChild(this.guide)}},{key:"refreshGuidePosition",value:function(){this.guide.style[this.inlineDir]=this.handle.style[this.inlineDir]}},{key:"hideHandleAndGuide",value:function(){Object(c.removeClass)(this.handle,"active"),Object(c.removeClass)(this.guide,"active")}},{key:"checkIfColumnHeader",value:function(element){return!!Object(c.closest)(element,["THEAD"],this.hot.rootElement)}},{key:"getClosestTHParent",value:function(element){return"TABLE"!==element.tagName?"TH"===element.tagName?element:this.getClosestTHParent(element.parentNode):null}},{key:"onMouseOver",value:function(t){if(!Object(c.isDetached)(t.target)&&this.checkIfColumnHeader(t.target)){var th=this.getClosestTHParent(t.target);if(!th)return;var e=th.getAttribute("colspan");!th||null!==e&&"1"!==e||this.pressed||this.setupHandlePosition(th)}}},{key:"afterMouseDownTimeout",value:function(){var t=this,e=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.adjustElementsSize(!0)},n=function(n,r){var o=t.hot.runHooks("beforeColumnResize",t.newSize,n,!0);void 0!==o&&(t.newSize=o),"all"===t.hot.getSettings().stretchH?t.clearManualSize(n):t.setManualSize(n,t.newSize),t.saveManualColumnWidths(),t.hot.runHooks("afterColumnResize",t.newSize,n,!0),r&&e()};this.dblclick>=2&&(this.selectedCols.length>1?(Object(j.arrayEach)(this.selectedCols,(function(t){n(t)})),e()):Object(j.arrayEach)(this.selectedCols,(function(t){n(t,!0)}))),this.dblclick=0,this.autoresizeTimeout=null}},{key:"onMouseDown",value:function(t){var e=this;Object(c.hasClass)(t.target,"manualColumnResizer")&&(this.setupHandlePosition(this.currentTH),this.setupGuidePosition(),this.pressed=!0,null===this.autoresizeTimeout&&(this.autoresizeTimeout=setTimeout((function(){return e.afterMouseDownTimeout()}),500),this.hot._registerTimeout(this.autoresizeTimeout)),this.dblclick+=1,this.startX=t.pageX,this.newSize=this.startWidth)}},{key:"onMouseMove",value:function(t){var e=this;if(this.pressed){var n=(t.pageX-this.startX)*this.hot.getDirectionFactor();this.currentWidth=this.startWidth+n,Object(j.arrayEach)(this.selectedCols,(function(t){e.newSize=e.setManualSize(t,e.currentWidth)})),this.refreshHandlePosition(),this.refreshGuidePosition()}}},{key:"onMouseUp",value:function(){var t=this,e=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.adjustElementsSize(!0)},n=function(n,r){t.hot.runHooks("beforeColumnResize",t.newSize,n,!1),r&&e(),t.saveManualColumnWidths(),t.hot.runHooks("afterColumnResize",t.newSize,n,!1)};this.pressed&&(this.hideHandleAndGuide(),this.pressed=!1,this.newSize!==this.startWidth&&(this.selectedCols.length>1?(Object(j.arrayEach)(this.selectedCols,(function(t){n(t)})),e()):Object(j.arrayEach)(this.selectedCols,(function(t){n(t,!0)}))),this.setupHandlePosition(this.currentTH))}},{key:"bindEvents",value:function(){var t=this,e=this.hot,n=e.rootWindow,r=e.rootElement;this.eventManager.addEventListener(r,"mouseover",(function(e){return t.onMouseOver(e)})),this.eventManager.addEventListener(r,"mousedown",(function(e){return t.onMouseDown(e)})),this.eventManager.addEventListener(n,"mousemove",(function(e){return t.onMouseMove(e)})),this.eventManager.addEventListener(n,"mouseup",(function(){return t.onMouseUp()}))}},{key:"onModifyColWidth",value:function(t,e){var n=t;if(this.enabled){var r=this.hot.toPhysicalColumn(e),o=this.columnWidthsMap.getValueAtIndex(r);this.hot.getSettings()[pg]&&o&&(n=o)}return n}},{key:"onBeforeStretchingColumnWidth",value:function(t,e){var n=this.columnWidthsMap.getValueAtIndex(e);return null===n&&(n=t),n}},{key:"onBeforeColumnResize",value:function(){this.hot.view._wt.wtViewport.resetHasOversizedColumnHeadersMarked()}},{key:"destroy",value:function(){sg(dg(l.prototype),"destroy",this).call(this)}}])&&lg(e.prototype,n),r&&lg(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function bg(t){return bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(t)}function mg(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wg(n.key),n)}}function wg(t){var e=function(input,t){if("object"!==bg(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==bg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===bg(e)?e:String(e)}var Og=0,Cg="px",Sg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hot=e,this._element=null,this.state=Og}var e,n,r;return e=t,(n=[{key:"appendTo",value:function(t){t.appendChild(this._element),this.state=2}},{key:"build",value:function(){this.state===Og&&(this._element=this.hot.rootDocument.createElement("div"),this.state=1)}},{key:"destroy",value:function(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=Og}},{key:"isAppended",value:function(){return 2===this.state}},{key:"isBuilt",value:function(){return this.state>=1}},{key:"setPosition",value:function(t,e){void 0!==t&&(this._element.style.top=t+Cg),void 0!==e&&(this._element.style.left=e+Cg)}},{key:"getPosition",value:function(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}}},{key:"setSize",value:function(t,e){t&&(this._element.style.width=t+Cg),e&&(this._element.style.height=e+Cg)}},{key:"getSize",value:function(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}},{key:"setOffset",value:function(t,e){t&&(this._element.style.marginTop=t+Cg),e&&(this._element.style.marginLeft=e+Cg)}},{key:"getOffset",value:function(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}}])&&mg(e.prototype,n),r&&mg(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function kg(t){return kg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kg(t)}function jg(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rg(n.key),n)}}function Rg(t){var e=function(input,t){if("object"!==kg(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==kg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===kg(e)?e:String(e)}function Eg(){return Eg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=_g(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Eg.apply(this,arguments)}function Pg(t,p){return Pg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Pg(t,p)}function Mg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_g(t);if(e){var o=_g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===kg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function _g(t){return _g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_g(t)}var Tg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pg(t,e)}(l,t);var e,n,r,o=Mg(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),o.apply(this,arguments)}return e=l,(n=[{key:"build",value:function(){Eg(_g(l.prototype),"build",this).call(this),Object(c.addClass)(this._element,"ht__manualRowMove--backlight")}}])&&jg(e.prototype,n),r&&jg(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Sg),Ag=Tg;function Ig(t){return Ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ig(t)}function xg(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dg(n.key),n)}}function Dg(t){var e=function(input,t){if("object"!==Ig(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Ig(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Ig(e)?e:String(e)}function Ng(){return Ng="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Bg(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Ng.apply(this,arguments)}function Hg(t,p){return Hg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Hg(t,p)}function Lg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Bg(t);if(e){var o=Bg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Ig(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Bg(t){return Bg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bg(t)}var Ug=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hg(t,e)}(l,t);var e,n,r,o=Lg(l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),o.apply(this,arguments)}return e=l,(n=[{key:"build",value:function(){Ng(Bg(l.prototype),"build",this).call(this),Object(c.addClass)(this._element,"ht__manualRowMove--guideline")}}])&&xg(e.prototype,n),r&&xg(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Sg),Fg=Ug;function Vg(t){return Vg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vg(t)}function Wg(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zg(n.key),n)}}function zg(t){var e=function(input,t){if("object"!==Vg(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Vg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Vg(e)?e:String(e)}function Yg(){return Yg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=$g(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Yg.apply(this,arguments)}function Gg(t,p){return Gg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Gg(t,p)}function Kg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$g(t);if(e){var o=$g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Vg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Xg(t)}(this,n)}}function Xg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $g(t){return $g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$g(t)}lt.a.getSingleton().register("beforeRowMove"),lt.a.getSingleton().register("afterRowMove");var qg="manualRowMove",Zg=new WeakMap,Jg="ht__manualRowMove",Qg="show-ui",tv="on-moving--rows",ev="after-selection--rows",nv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gg(t,e)}(l,t);var e,n,r,o=Kg(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),e=o.call(this,t),Zg.set(Xg(e),{rowsToMove:[],pressed:void 0,target:{eventPageY:void 0,coords:void 0,TD:void 0,row:void 0},cachedDropIndex:void 0}),e.eventManager=new $.a(Xg(e)),e.backlight=new Ag(t),e.guideline=new Fg(t),e}return e=l,n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[qg]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("beforeOnCellMouseDown",(function(){return t.onBeforeOnCellMouseDown.apply(t,arguments)})),this.addHook("beforeOnCellMouseOver",(function(){return t.onBeforeOnCellMouseOver.apply(t,arguments)})),this.addHook("afterScrollHorizontally",(function(){return t.onAfterScrollHorizontally()})),this.addHook("afterLoadData",(function(){return t.onAfterLoadData.apply(t,arguments)})),this.buildPluginUI(),this.registerEvents(),Object(c.addClass)(this.hot.rootElement,Jg),Yg($g(l.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),Yg($g(l.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){Object(c.removeClass)(this.hot.rootElement,Jg),this.unregisterEvents(),this.backlight.destroy(),this.guideline.destroy(),Yg($g(l.prototype),"disablePlugin",this).call(this)}},{key:"moveRow",value:function(t,e){return this.moveRows([t],e)}},{key:"moveRows",value:function(t,e){var n=Zg.get(this),r=n.cachedDropIndex,o=this.isMovePossible(t,e),l=this.hot.runHooks("beforeRowMove",t,e,r,o);if(n.cachedDropIndex=void 0,!1!==l){o&&this.hot.rowIndexMapper.moveIndexes(t,e);var c=o&&this.isRowOrderChanged(t,e);return this.hot.runHooks("afterRowMove",t,e,r,o,c),c}}},{key:"dragRow",value:function(t,e){return this.dragRows([t],e)}},{key:"dragRows",value:function(t,e){var n=this.countFinalIndex(t,e);return Zg.get(this).cachedDropIndex=e,this.moveRows(t,n)}},{key:"isMovePossible",value:function(t,e){var n=this.hot.rowIndexMapper.getNotTrimmedIndexesLength(),r=t.length+e>n,o=e<0,l=t.some((function(t){return t<0})),c=t.some((function(t){return t>=n}));return!(r||o||l||c)}},{key:"isRowOrderChanged",value:function(t,e){return t.some((function(t,n){return t-n!==e}))}},{key:"countFinalIndex",value:function(t,e){var n=Object(j.arrayReduce)(t,(function(t,n){return n<e&&(t+=1),t}),0);return e-n}},{key:"getRowsHeight",value:function(t,e){for(var n=this.hot.rowIndexMapper,r=0,o=t;o<=e;o++){var l=n.getRenderableFromVisualIndex(o);null!==l&&(r+=this.hot.view._wt.wtTable.getRowHeight(l)||23)}return r}},{key:"moveBySettingsOrLoad",value:function(){var t=this.hot.getSettings()[qg];if(Array.isArray(t))this.moveRows(t,0);else if(void 0!==t){var e=this.persistentStateLoad();e.length&&this.moveRows(e,0)}}},{key:"isFixedRowTop",value:function(t){return t<this.hot.getSettings().fixedRowsTop}},{key:"isFixedRowBottom",value:function(t){return t>this.hot.countRows()-1-this.hot.getSettings().fixedRowsBottom}},{key:"persistentStateSave",value:function(){this.hot.runHooks("persistentStateSave","manualRowMove",this.hot.rowIndexMapper.getIndexesSequence())}},{key:"persistentStateLoad",value:function(){var t={};return this.hot.runHooks("persistentStateLoad","manualRowMove",t),t.value?t.value:[]}},{key:"prepareRowsToMoving",value:function(){var t=this.hot.getSelectedRangeLast(),e=[];if(!t)return e;var n=t.from,r=t.to,o=Math.min(n.row,r.row),l=Math.max(n.row,r.row);return Object(ie.rangeEach)(o,l,(function(i){e.push(i)})),e}},{key:"refreshPositions",value:function(){var t=Zg.get(this),e=t.target.coords,n=this.hot.view.getFirstFullyVisibleRow(),r=this.hot.view.getLastFullyVisibleRow(),o=this.hot.countRows();this.isFixedRowTop(e.row)&&n>0&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(n-1,-1)),this.isFixedRowBottom(e.row)&&r<o&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(r+1,1),void 0,!0);var l=this.hot.view._wt.wtTable,f=t.target.TD,h=Object(c.offset)(this.hot.rootElement),d=this.hot.view.THEAD.offsetHeight+this.getRowsHeight(0,e.row-1),y=t.target.eventPageY-h.top+l.holder.scrollTop,v=l.hider.offsetHeight,m=l.TBODY.offsetTop,w=this.backlight.getOffset().top,O=this.backlight.getSize().height;this.isFixedRowTop(e.row)&&(d+=l.holder.scrollTop),e.row<0?t.target.row=n>0?n-1:n:f.offsetHeight/2+d<=y?(t.target.row=e.row+1,d+=0===e.row?f.offsetHeight-1:f.offsetHeight):t.target.row=e.row;var C=y,S=d;y+O+w>=v?C=v-O-w:y+w<m&&(C=m+Math.abs(w)),d>=v-1&&(S=v-1),this.backlight.setPosition(C),this.guideline.setPosition(S)}},{key:"registerEvents",value:function(){var t=this,e=this.hot.rootDocument.documentElement;this.eventManager.addEventListener(e,"mousemove",(function(e){return t.onMouseMove(e)})),this.eventManager.addEventListener(e,"mouseup",(function(){return t.onMouseUp()}))}},{key:"unregisterEvents",value:function(){this.eventManager.clear()}},{key:"onBeforeOnCellMouseDown",value:function(t,e,n,r){var o=this.hot.view._wt,l=o.wtTable,f=o.wtViewport,h=this.hot.selection.isSelectedByRowHeader(),d=this.hot.getSelectedRangeLast(),y=Zg.get(this);if(!d||!h||y.pressed||0!==t.button)return y.pressed=!1,y.rowsToMove.length=0,void Object(c.removeClass)(this.hot.rootElement,[tv,Qg]);var v=this.guideline.isBuilt()&&!this.guideline.isAppended(),m=this.backlight.isBuilt()&&!this.backlight.isAppended();v&&m&&(this.guideline.appendTo(l.hider),this.backlight.appendTo(l.hider));var w=d.from,O=d.to,C=Math.min(w.row,O.row),S=Math.max(w.row,O.row);if(e.col<0&&e.row>=C&&e.row<=S){r.row=!0,y.pressed=!0,y.target.eventPageY=t.pageY,y.target.coords=e,y.target.TD=n,y.rowsToMove=this.prepareRowsToMoving();var k=l.holder.scrollLeft+f.getRowHeaderWidth();this.backlight.setPosition(null,k),this.backlight.setSize(l.hider.offsetWidth-k,this.getRowsHeight(C,S)),this.backlight.setOffset(-1*(this.getRowsHeight(C,e.row-1)+t.offsetY),null),Object(c.addClass)(this.hot.rootElement,tv),this.refreshPositions()}else Object(c.removeClass)(this.hot.rootElement,ev),y.pressed=!1,y.rowsToMove.length=0}},{key:"onMouseMove",value:function(t){var e=Zg.get(this);if(e.pressed){if(t.target===this.backlight.element){var n=this.backlight.getSize().height;this.backlight.setSize(null,0),setTimeout((function(){this.backlight.setPosition(null,n)}))}e.target.eventPageY=t.pageY,this.refreshPositions()}}},{key:"onBeforeOnCellMouseOver",value:function(t,e,n,r){var o=this.hot.getSelectedRangeLast(),l=Zg.get(this);o&&l.pressed&&(l.rowsToMove.indexOf(e.row)>-1?Object(c.removeClass)(this.hot.rootElement,Qg):Object(c.addClass)(this.hot.rootElement,Qg),r.row=!0,r.column=!0,r.cell=!0,l.target.coords=e,l.target.TD=n)}},{key:"onMouseUp",value:function(){var t=Zg.get(this),e=t.target.row,n=t.rowsToMove.length;if(t.pressed=!1,t.backlightHeight=0,Object(c.removeClass)(this.hot.rootElement,[tv,Qg,ev]),this.hot.selection.isSelectedByRowHeader()&&Object(c.addClass)(this.hot.rootElement,ev),!(n<1||void 0===e)){var r=t.rowsToMove[0],o=this.hot.toPhysicalRow(r),l=this.dragRows(t.rowsToMove,e);if(t.rowsToMove.length=0,!0===l){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize(!0);var f=this.hot.toVisualRow(o),h=f+n-1;this.hot.selectRows(f,h)}}}},{key:"onAfterScrollHorizontally",value:function(){var t=this.hot.view._wt.wtTable,e=this.hot.view._wt.wtViewport.getRowHeaderWidth()+t.holder.scrollLeft;this.backlight.setPosition(null,e),this.backlight.setSize(t.hider.offsetWidth-e)}},{key:"buildPluginUI",value:function(){this.backlight.build(),this.guideline.build()}},{key:"onAfterLoadData",value:function(){this.moveBySettingsOrLoad()}},{key:"destroy",value:function(){this.backlight.destroy(),this.guideline.destroy(),Yg($g(l.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return qg}},{key:"PLUGIN_PRIORITY",get:function(){return 140}}],n&&Wg(e.prototype,n),r&&Wg(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be),rv=n(1050);function ov(t){return ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ov(t)}function iv(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,av(n.key),n)}}function av(t){var e=function(input,t){if("object"!==ov(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==ov(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===ov(e)?e:String(e)}function lv(){return lv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=fv(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},lv.apply(this,arguments)}function uv(t,p){return uv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},uv(t,p)}function sv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=fv(t);if(e){var o=fv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===ov(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cv(t)}(this,n)}}function cv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fv(t){return fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fv(t)}var hv,dv,pv,yv,gv="manualRowResize",vv="manualRowHeights",bv=new WeakMap,mv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uv(t,e)}(l,t);var e,n,r,o=sv(l);function l(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var n=(e=o.call(this,t)).hot.rootDocument;return e.currentTH=null,e.currentRow=null,e.selectedRows=[],e.currentHeight=null,e.newSize=null,e.startY=null,e.startHeight=null,e.startOffset=null,e.handle=n.createElement("DIV"),e.guide=n.createElement("DIV"),e.eventManager=new $.a(cv(e)),e.pressed=null,e.dblclick=0,e.autoresizeTimeout=null,e.rowHeightsMap=void 0,bv.set(cv(e),{config:void 0}),Object(c.addClass)(e.handle,"manualRowResizer"),Object(c.addClass)(e.guide,"manualRowResizerGuide"),e}return e=l,r=[{key:"PLUGIN_KEY",get:function(){return gv}},{key:"PLUGIN_PRIORITY",get:function(){return 30}}],(n=[{key:"inlineDir",get:function(){return this.hot.isRtl()?"right":"left"}},{key:"isEnabled",value:function(){return this.hot.getSettings()[gv]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.rowHeightsMap=new tn.a,this.rowHeightsMap.addLocalHook("init",(function(){return t.onMapInit()})),this.hot.rowIndexMapper.registerMap(this.pluginName,this.rowHeightsMap),this.addHook("modifyRowHeight",(function(e,n){return t.onModifyRowHeight(e,n)})),this.bindEvents(),lv(fv(l.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),lv(fv(l.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){bv.get(this).config=this.rowHeightsMap.getValues(),this.hot.rowIndexMapper.unregisterMap(this.pluginName),lv(fv(l.prototype),"disablePlugin",this).call(this)}},{key:"saveManualRowHeights",value:function(){this.hot.runHooks("persistentStateSave",vv,this.rowHeightsMap.getValues())}},{key:"loadManualRowHeights",value:function(){var t={};return this.hot.runHooks("persistentStateLoad",vv,t),t.value}},{key:"setManualSize",value:function(t,e){var n=this.hot.toPhysicalRow(t),r=Math.max(e,rv.a.DEFAULT_HEIGHT);return this.rowHeightsMap.setValueAtIndex(n,r),r}},{key:"setupHandlePosition",value:function(t){var e=this;this.currentTH=t;var view=this.hot.view,n=view._wt,r=n.wtTable.getCoords(this.currentTH),o=r.row;if(!(o<0)){var l,f=Object(c.outerWidth)(this.currentTH),h=this.currentTH.getBoundingClientRect(),d=o<n.getSetting("fixedRowsTop"),y=o>=view.countNotHiddenRowIndexes(0,1)-n.getSetting("fixedRowsBottom");d?l=n.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(this.currentTH,r.row,r.col):y&&(l=n.wtOverlays.bottomInlineStartCornerOverlay.getRelativeCellPosition(this.currentTH,r.row,r.col)),l||(l=n.wtOverlays.inlineStartOverlay.getRelativeCellPosition(this.currentTH,r.row,r.col)),this.currentRow=this.hot.rowIndexMapper.getVisualFromRenderableIndex(o),this.selectedRows=[];var v=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByRowHeader();if(this.hot.selection.isSelected()&&v){var m=this.hot.getSelectedRange();Object(j.arrayEach)(m,(function(t){var n=t.getTopStartCorner().row,r=t.getBottomStartCorner().row;Object(ie.rangeEach)(n,r,(function(t){e.selectedRows.includes(t)||e.selectedRows.push(t)}))}))}this.selectedRows.includes(this.currentRow)||(this.selectedRows=[this.currentRow]),this.startOffset=l.top-6,this.startHeight=parseInt(h.height,10),this.handle.style.top="".concat(this.startOffset+this.startHeight,"px"),this.handle.style[this.inlineDir]="".concat(l.start,"px"),this.handle.style.width="".concat(f,"px"),this.hot.rootElement.appendChild(this.handle)}}},{key:"refreshHandlePosition",value:function(){this.handle.style.top="".concat(this.startOffset+this.currentHeight,"px")}},{key:"setupGuidePosition",value:function(){var t=parseInt(Object(c.outerWidth)(this.handle),10),e=parseInt(this.handle.style[this.inlineDir],10)+t,n=parseInt(this.hot.view.maximumVisibleElementWidth(0),10);Object(c.addClass)(this.handle,"active"),Object(c.addClass)(this.guide,"active"),this.guide.style.top=this.handle.style.top,this.guide.style[this.inlineDir]="".concat(e,"px"),this.guide.style.width="".concat(n-t,"px"),this.hot.rootElement.appendChild(this.guide)}},{key:"refreshGuidePosition",value:function(){this.guide.style.top=this.handle.style.top}},{key:"hideHandleAndGuide",value:function(){Object(c.removeClass)(this.handle,"active"),Object(c.removeClass)(this.guide,"active")}},{key:"checkIfRowHeader",value:function(element){var t,e;return Object(c.closest)(element,["TH"],this.hot.rootElement)&&"TBODY"===(null===(t=element.parentNode)||void 0===t||null===(e=t.parentNode)||void 0===e?void 0:e.tagName)}},{key:"getClosestTHParent",value:function(element){return"TABLE"!==element.tagName?"TH"===element.tagName?element:this.getClosestTHParent(element.parentNode):null}},{key:"getActualRowHeight",value:function(t){var e=this.hot.view._wt.wtTable.getRowHeight(t);return void 0!==e&&this.newSize<e?e:this.newSize}},{key:"onMouseOver",value:function(t){if(!Object(c.isDetached)(t.target)&&this.checkIfRowHeader(t.target)){var th=this.getClosestTHParent(t.target);th&&(this.pressed||this.setupHandlePosition(th))}}},{key:"afterMouseDownTimeout",value:function(){var t=this,e=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.adjustElementsSize(!0)},n=function(n,r){var o=t.hot.runHooks("beforeRowResize",t.getActualRowHeight(n),n,!0);void 0!==o&&(t.newSize=o),t.setManualSize(n,t.newSize),t.hot.runHooks("afterRowResize",t.getActualRowHeight(n),n,!0),r&&e()};this.dblclick>=2&&(this.selectedRows.length>1?(Object(j.arrayEach)(this.selectedRows,(function(t){n(t)})),e()):Object(j.arrayEach)(this.selectedRows,(function(t){n(t,!0)}))),this.dblclick=0,this.autoresizeTimeout=null}},{key:"onMouseDown",value:function(t){var e=this;Object(c.hasClass)(t.target,"manualRowResizer")&&(this.setupHandlePosition(this.currentTH),this.setupGuidePosition(),this.pressed=!0,null===this.autoresizeTimeout&&(this.autoresizeTimeout=setTimeout((function(){return e.afterMouseDownTimeout()}),500),this.hot._registerTimeout(this.autoresizeTimeout)),this.dblclick+=1,this.startY=t.pageY,this.newSize=this.startHeight)}},{key:"onMouseMove",value:function(t){var e=this;this.pressed&&(this.currentHeight=this.startHeight+(t.pageY-this.startY),Object(j.arrayEach)(this.selectedRows,(function(t){e.newSize=e.setManualSize(t,e.currentHeight)})),this.refreshHandlePosition(),this.refreshGuidePosition())}},{key:"onMouseUp",value:function(){var t=this,e=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.adjustElementsSize(!0)},n=function(n,r){t.hot.runHooks("beforeRowResize",t.getActualRowHeight(n),n,!1),r&&e(),t.saveManualRowHeights(),t.hot.runHooks("afterRowResize",t.getActualRowHeight(n),n,!1)};this.pressed&&(this.hideHandleAndGuide(),this.pressed=!1,this.newSize!==this.startHeight&&(this.selectedRows.length>1?(Object(j.arrayEach)(this.selectedRows,(function(t){n(t)})),e()):Object(j.arrayEach)(this.selectedRows,(function(t){n(t,!0)}))),this.setupHandlePosition(this.currentTH))}},{key:"bindEvents",value:function(){var t=this,e=this.hot,n=e.rootElement,r=e.rootWindow;this.eventManager.addEventListener(n,"mouseover",(function(e){return t.onMouseOver(e)})),this.eventManager.addEventListener(n,"mousedown",(function(e){return t.onMouseDown(e)})),this.eventManager.addEventListener(r,"mousemove",(function(e){return t.onMouseMove(e)})),this.eventManager.addEventListener(r,"mouseup",(function(){return t.onMouseUp()}))}},{key:"onModifyRowHeight",value:function(t,e){var n=t;if(this.enabled){var r=this.hot.toPhysicalRow(e),o=this.rowHeightsMap.getValueAtIndex(r);this.hot.getSettings()[gv]&&o&&(n=o)}return n}},{key:"onMapInit",value:function(){var t=this,e=bv.get(this),n=this.hot.getSettings()[gv],r=this.loadManualRowHeights();this.hot.batchExecution((function(){void 0!==r?r.forEach((function(e,n){t.rowHeightsMap.setValueAtIndex(n,e)})):Array.isArray(n)?(n.forEach((function(e,n){t.rowHeightsMap.setValueAtIndex(n,e)})),e.config=n):!0===n&&Array.isArray(e.config)&&e.config.forEach((function(e,n){t.rowHeightsMap.setValueAtIndex(n,e)}))}),!0)}},{key:"destroy",value:function(){lv(fv(l.prototype),"destroy",this).call(this)}}])&&iv(e.prototype,n),r&&iv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function wv(t){return wv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wv(t)}function Ov(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function Cv(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sv(n.key),n)}}function Sv(t){var e=function(input,t){if("object"!==wv(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==wv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===wv(e)?e:String(e)}var kv,jv=function(){function t(e,n,r,o,l,c){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.row=e,this.col=n,this.rowspan=r,this.colspan=o,this.removed=!1,this.cellCoordsFactory=l,this.cellRangeFactory=c}var e,n,r;return e=t,r=[{key:"NEGATIVE_VALUES_WARNING",value:function(t){return Object(ui.a)(hv||(hv=Ov(["The merged cell declared with {row: ",", col: ",", \n      rowspan: ",", colspan: ","} contains negative values, which is \n      not supported. It will not be added to the collection."],["The merged cell declared with {row: ",", col: ",",\\x20\n      rowspan: ",", colspan: ","} contains negative values, which is\\x20\n      not supported. It will not be added to the collection."])),t.row,t.col,t.rowspan,t.colspan)}},{key:"IS_OUT_OF_BOUNDS_WARNING",value:function(t){return Object(ui.a)(dv||(dv=Ov(["The merged cell declared at [",", ","] is positioned \n      (or positioned partially) outside of the table range. It was not added to the table, please fix your setup."],["The merged cell declared at [",", ","] is positioned\\x20\n      (or positioned partially) outside of the table range. It was not added to the table, please fix your setup."])),t.row,t.col)}},{key:"IS_SINGLE_CELL",value:function(t){return Object(ui.a)(pv||(pv=Ov(["The merged cell declared at [",", ",'] has both "rowspan" \n      and "colspan" declared as "1", which makes it a single cell. It cannot be added to the collection.'],["The merged cell declared at [",", ",'] has both "rowspan"\\x20\n      and "colspan" declared as "1", which makes it a single cell. It cannot be added to the collection.'])),t.row,t.col)}},{key:"ZERO_SPAN_WARNING",value:function(t){return Object(ui.a)(yv||(yv=Ov(["The merged cell declared at [",", ",'] has "rowspan" \n      or "colspan" declared as "0", which is not supported. It cannot be added to the collection.'],["The merged cell declared at [",", ",'] has "rowspan"\\x20\n      or "colspan" declared as "0", which is not supported. It cannot be added to the collection.'])),t.row,t.col)}},{key:"containsNegativeValues",value:function(t){return t.row<0||t.col<0||t.rowspan<0||t.colspan<0}},{key:"isSingleCell",value:function(t){return 1===t.colspan&&1===t.rowspan}},{key:"containsZeroSpan",value:function(t){return 0===t.colspan||0===t.rowspan}},{key:"isOutOfBounds",value:function(t,e,n){return t.row<0||t.col<0||t.row>=e||t.row+t.rowspan-1>=e||t.col>=n||t.col+t.colspan-1>=n}}],(n=[{key:"normalize",value:function(t){var e=t.countRows(),n=t.countCols();this.row<0?this.row=0:this.row>e-1&&(this.row=e-1),this.col<0?this.col=0:this.col>n-1&&(this.col=n-1),this.row+this.rowspan>e-1&&(this.rowspan=e-this.row),this.col+this.colspan>n-1&&(this.colspan=n-this.col)}},{key:"includes",value:function(t,e){return this.row<=t&&this.col<=e&&this.row+this.rowspan-1>=t&&this.col+this.colspan-1>=e}},{key:"includesHorizontally",value:function(t){return this.col<=t&&this.col+this.colspan-1>=t}},{key:"includesVertically",value:function(t){return this.row<=t&&this.row+this.rowspan-1>=t}},{key:"shift",value:function(t,e){var n=t[0]||t[1],r=e+Math.abs(t[0]||t[1])-1,span=t[0]?"colspan":"rowspan",o=t[0]?"col":"row",l=Math.min(e,r),c=Math.max(e,r),f=this[o],h=this[o]+this[span]-1;if(f>=e&&(this[o]+=n),n>0)e<=h&&e>f&&(this[span]+=n);else if(n<0){if(l<=f&&c>=h)return this.removed=!0,!1;if(f>=l&&f<=c){var d=c-f+1,y=Math.abs(n)-d;this[o]-=y+n,this[span]-=d}else if(f<=l&&h>=c)this[span]+=n;else if(f<=l&&h>=l&&h<c){var v=h-l+1;this[span]-=v}}return!0}},{key:"isFarther",value:function(t,e){return!t||("down"===e?t.row+t.rowspan-1<this.row+this.rowspan-1:"up"===e?t.row>this.row:"right"===e?t.col+t.colspan-1<this.col+this.colspan-1:"left"===e?t.col>this.col:null)}},{key:"getLastRow",value:function(){return this.row+this.rowspan-1}},{key:"getLastColumn",value:function(){return this.col+this.colspan-1}},{key:"getRange",value:function(){return this.cellRangeFactory(this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.getLastRow(),this.getLastColumn()))}}])&&Cv(e.prototype,n),r&&Cv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Rv(t,e,n,col){e?e.row===n&&e.col===col?(t.setAttribute("rowspan",e.rowspan.toString()),t.setAttribute("colspan",e.colspan.toString())):(t.removeAttribute("rowspan"),t.removeAttribute("colspan"),t.style.display="none"):(t.removeAttribute("rowspan"),t.removeAttribute("colspan"),t.style.display="")}function Ev(t){return Ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ev(t)}function Pv(t){return function(t){if(Array.isArray(t))return Mv(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Mv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mv(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mv(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function _v(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tv(n.key),n)}}function Tv(t){var e=function(input,t){if("object"!==Ev(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Ev(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Ev(e)?e:String(e)}var Av=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.plugin=e,this.mergedCells=[],this.hot=e.hot}var e,n,r;return e=t,n=[{key:"get",value:function(t,e){var n=this.mergedCells,r=!1;return Object(j.arrayEach)(n,(function(n){return!(n.row<=t&&n.row+n.rowspan-1>=t&&n.col<=e&&n.col+n.colspan-1>=e&&(r=n,1))})),r}},{key:"getByRange",value:function(t){var e=this.mergedCells,n=!1;return Object(j.arrayEach)(e,(function(e){return!(e.row<=t.from.row&&e.row+e.rowspan-1>=t.to.row&&e.col<=t.from.col&&e.col+e.colspan-1>=t.to.col)||(n=e)})),n}},{key:"getWithinRange",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.mergedCells,o=[],l=t;if(!l.includesRange){var c=this.hot._createCellCoords(l.from.row,l.from.col),f=this.hot._createCellCoords(l.to.row,l.to.col);l=this.hot._createCellRange(c,c,f)}return Object(j.arrayEach)(r,(function(t){var r=e.hot._createCellCoords(t.row,t.col),c=e.hot._createCellCoords(t.row+t.rowspan-1,t.col+t.colspan-1),f=e.hot._createCellRange(r,r,c);n?l.overlaps(f)&&o.push(t):l.includesRange(f)&&o.push(t)})),!!o.length&&o}},{key:"add",value:function(e){var n=this.mergedCells,r=e.row,o=e.col,l=e.rowspan,c=e.colspan,f=new jv(r,o,l,c,this.hot._createCellCoords,this.hot._createCellRange),h=this.get(r,o),d=this.isOverlapping(f);return h||d?(Object(kr.b)(t.IS_OVERLAPPING_WARNING(f)),!1):(this.hot&&f.normalize(this.hot),n.push(f),f)}},{key:"remove",value:function(t,e){var n=this.mergedCells,r=this.get(t,e),o=r?this.mergedCells.indexOf(r):-1;return!(!r||-1===o)&&(n.splice(o,1),r)}},{key:"clear",value:function(){var t=this,e=this.mergedCells,n=[],r=[];Object(j.arrayEach)(e,(function(e){var r=t.hot.getCell(e.row,e.col);r&&n.push([r,t.get(e.row,e.col),e.row,e.col])})),this.mergedCells.length=0,Object(j.arrayEach)(n,(function(e,i){Object(ie.rangeEach)(0,e.rowspan-1,(function(n){Object(ie.rangeEach)(0,e.colspan-1,(function(o){if(0!==o||0!==n){var l=t.hot.getCell(e.row+n,e.col+o);l&&r.push([l,null,null,null])}}))})),n[i][1]=null})),Object(j.arrayEach)(n,(function(t){Rv.apply(void 0,Pv(t))})),Object(j.arrayEach)(r,(function(t){Rv.apply(void 0,Pv(t))}))}},{key:"isOverlapping",value:function(t){var e=this,n=this.hot._createCellRange(this.hot._createCellCoords(0,0),this.hot._createCellCoords(t.row,t.col),this.hot._createCellCoords(t.row+t.rowspan-1,t.col+t.colspan-1)),r=!1;return Object(j.arrayEach)(this.mergedCells,(function(col){return!e.hot._createCellRange(e.hot._createCellCoords(0,0),e.hot._createCellCoords(col.row,col.col),e.hot._createCellCoords(col.row+col.rowspan-1,col.col+col.colspan-1)).overlaps(n)||(r=!0,!1)})),r}},{key:"isFirstRenderableMergedCell",value:function(t,e){var n=this.get(t,e);return n&&this.hot.rowIndexMapper.getNearestNotHiddenIndex(n.row,1)===t&&this.hot.columnIndexMapper.getNearestNotHiddenIndex(n.col,1)===e}},{key:"getFirstRenderableCoords",value:function(t,e){var n=this.get(t,e);if(!n||this.isFirstRenderableMergedCell(t,e))return this.hot._createCellCoords(t,e);var r=this.hot.rowIndexMapper.getNearestNotHiddenIndex(n.row,1),o=this.hot.columnIndexMapper.getNearestNotHiddenIndex(n.col,1);return this.hot._createCellCoords(r,o)}},{key:"shiftCollections",value:function(t,e,n){var r=this,o=[0,0];switch(t){case"right":o[0]+=n;break;case"left":o[0]-=n;break;case"down":o[1]+=n;break;case"up":o[1]-=n}Object(j.arrayEach)(this.mergedCells,(function(t){t.shift(o,e)})),Object(ie.rangeEachReverse)(this.mergedCells.length-1,0,(function(i){var t=r.mergedCells[i];t&&t.removed&&r.mergedCells.splice(r.mergedCells.indexOf(t),1)}))}}],r=[{key:"IS_OVERLAPPING_WARNING",value:function(t){return Object(ui.a)(kv||(e=["The merged cell declared at [",", ","], overlaps \n      with the other declared merged cell. The overlapping merged cell was not added to the table, please \n      fix your setup."],(n=["The merged cell declared at [",", ","], overlaps\\x20\n      with the other declared merged cell. The overlapping merged cell was not added to the table, please\\x20\n      fix your setup."])||(n=e.slice(0)),kv=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))),t.row,t.col);var e,n}}],n&&_v(e.prototype,n),r&&_v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Iv=Av;function xv(t){return xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xv(t)}function Dv(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return Nv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nv(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nv(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Hv(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lv(n.key),n)}}function Lv(t){var e=function(input,t){if("object"!==xv(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==xv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===xv(e)?e:String(e)}var Bv=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.plugin=e,this.mergedCellsCollection=this.plugin.mergedCellsCollection,this.currentFillData=null}var e,n,r;return e=t,(n=[{key:"correctSelectionAreaSize",value:function(t){if(t[0]===t[2]&&t[1]===t[3]){var e=this.mergedCellsCollection.get(t[0],t[1]);e&&(t[2]=t[0]+e.rowspan-1,t[3]=t[1]+e.colspan-1)}}},{key:"getDirection",value:function(t,e){return e[0]===t[0]&&e[1]===t[1]&&e[3]===t[3]?"down":e[2]===t[2]&&e[1]===t[1]&&e[3]===t[3]?"up":e[1]===t[1]&&e[2]===t[2]?"right":"left"}},{key:"snapDragArea",value:function(t,e,n,r){var o=e.slice(0),l=this.getAutofillSize(t,e,n),c=Dv(t,4),f=c[0],h=c[1],d=c[2],y=c[3],v=["up","down"].indexOf(n)>-1?d-f+1:y-h+1,m=l-Math.floor(l/v)*v,w=this.getFarthestCollection(t,e,n,r);if(w)if("down"===n){var O=w.row+w.rowspan-f-m;o[2]+O>=this.plugin.hot.countRows()?o[2]-=m:o[2]+=m?O:0}else if("right"===n){var C=w.col+w.colspan-h-m;o[3]+C>=this.plugin.hot.countCols()?o[3]-=m:o[3]+=m?C:0}else if("up"===n){var S=d-m-w.row+1;o[0]+S<0?o[0]+=m:o[0]-=m?S:0}else if("left"===n){var k=y-m-w.col+1;o[1]+k<0?o[1]+=m:o[1]-=m?k:0}return this.updateCurrentFillCache({baseArea:t,dragDirection:n,foundMergedCells:r,fillSize:l,dragArea:o,cycleLength:v}),o}},{key:"updateCurrentFillCache",value:function(t){this.currentFillData||(this.currentFillData={}),Object(h.extend)(this.currentFillData,t)}},{key:"getAutofillSize",value:function(t,e,n){var r=Dv(t,4),o=r[0],l=r[1],c=r[2],f=r[3],h=Dv(e,4),d=h[0],y=h[1],v=h[2],m=h[3];switch(n){case"up":return o-d;case"down":return v-c;case"left":return l-y;case"right":return m-f;default:return null}}},{key:"getDragArea",value:function(t,e,n){var r=Dv(t,4),o=r[0],l=r[1],c=r[2],f=r[3],h=Dv(e,4),d=h[0],y=h[1],v=h[2],m=h[3];switch(n){case"up":return[d,y,o-1,f];case"down":return[c+1,l,v,f];case"left":return[d,y,c,l-1];case"right":return[o,f+1,v,m];default:return null}}},{key:"getFarthestCollection",value:function(t,e,n,r){var o=Dv(t,4),l=o[0],c=o[1],f=o[2],h=o[3],d=["up","down"].indexOf(n)>-1,y=d?f:h,v=d?l:c,m=this.getAutofillSize(t,e,n),w=d?f-l+1:h-c+1,O=m-Math.floor(m/w)*w,C=null,S=null,k=null;switch(n){case"up":C="includesVertically",k=y-O+1;break;case"left":C="includesHorizontally",k=y-O+1;break;case"down":C="includesVertically",k=v+O-1;break;case"right":C="includesHorizontally",k=v+O-1}return Object(j.arrayEach)(r,(function(t){t[C](k)&&t.isFarther(S,n)&&(S=t)})),S}},{key:"recreateAfterDataPopulation",value:function(t){if(this.currentFillData){var e=this.getRangeFromChanges(t),n=this.currentFillData.foundMergedCells,r=this.currentFillData.dragDirection,o=function(t,n){switch(r){case"up":return t.row-n>=e.from.row;case"down":return t.row+t.rowspan-1+n<=e.to.row;case"left":return t.col-n>=e.from.column;case"right":return t.col+t.colspan-1+n<=e.to.column;default:return null}},l=0,c=null,f=1;do{for(var h=0;h<n.length;h+=1){if(o(c=n[h],l=f*this.currentFillData.cycleLength))switch(r){case"up":this.plugin.mergedCellsCollection.add({row:c.row-l,rowspan:c.rowspan,col:c.col,colspan:c.colspan});break;case"down":this.plugin.mergedCellsCollection.add({row:c.row+l,rowspan:c.rowspan,col:c.col,colspan:c.colspan});break;case"left":this.plugin.mergedCellsCollection.add({row:c.row,rowspan:c.rowspan,col:c.col-l,colspan:c.colspan});break;case"right":this.plugin.mergedCellsCollection.add({row:c.row,rowspan:c.rowspan,col:c.col+l,colspan:c.colspan})}h===n.length-1&&(f+=1)}}while(o(c,l));this.currentFillData=null,this.plugin.hot.render(),n.length>0&&this.plugin.ifChromeForceRepaint()}}},{key:"getRangeFromChanges",value:function(t){var e=this,n={min:null,max:null},r={min:null,max:null};return Object(j.arrayEach)(t,(function(t){var o=t[0],l=e.plugin.hot.propToCol(t[1]);(null===n.min||o<n.min)&&(n.min=o),(null===n.max||o>n.max)&&(n.max=o),(null===r.min||l<r.min)&&(r.min=l),(null===r.max||l>r.max)&&(r.max=l)})),{from:{row:n.min,column:r.min},to:{row:n.max,column:r.max}}}},{key:"dragAreaOverlapsCollections",value:function(t,e,n){var r=Dv(this.getDragArea(t,e,n),4),o=r[0],l=r[1],c=r[2],f=r[3],h=this.plugin.hot._createCellCoords(o,l),d=this.plugin.hot._createCellCoords(c,f),y=this.plugin.hot._createCellRange(h,h,d);return!!this.mergedCellsCollection.getWithinRange(y,!0)}}])&&Hv(e.prototype,n),r&&Hv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Uv(t){return Uv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uv(t)}function Fv(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vv(n.key),n)}}function Vv(t){var e=function(input,t){if("object"!==Uv(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Uv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Uv(e)?e:String(e)}var Wv=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.plugin=e,this.hot=e.hot,this.fullySelectedMergedCellClassName="fullySelectedMergedCell"}var e,n,r;return e=t,(n=[{key:"snapDelta",value:function(t,e,n){var r=e.to,o=r.row+t.row,l=r.col+t.col;t.row?this.jumpOverMergedCell(t,n,o):t.col&&this.jumpOverMergedCell(t,n,l)}},{key:"jumpOverMergedCell",value:function(t,e,n){var r=t.row||t.col,o=null,l=null,c=null;t.row?(o=e.includesVertically(n),l=e.row,c=e.getLastRow()):t.col&&(o=e.includesHorizontally(n),l=e.col,c=e.getLastColumn()),0!==r&&(r>0?o&&n!==l&&(r+=c-n+1):o&&n!==c&&(r-=n-l+1),t.row?t.row=r:t.col&&(t.col=r))}},{key:"getUpdatedSelectionRange",value:function(t,e){return this.hot._createCellRange(t.highlight,t.from,this.hot._createCellCoords(t.to.row+e.row,t.to.col+e.col))}},{key:"getSelectedMergedCellClassName",value:function(t,e,n,r){var o=Math.min(n[0],n[2]),l=Math.min(n[1],n[3]),c=Math.max(n[0],n[2]),f=Math.max(n[1],n[3]);if(void 0!==r&&this.plugin.mergedCellsCollection.isFirstRenderableMergedCell(t,e)){var h=this.plugin.mergedCellsCollection.get(t,e);if(h){var d=h.getLastRow(),y=h.getLastColumn();return o<=h.row&&l<=h.col&&c>=d&&f>=y?"".concat(this.fullySelectedMergedCellClassName,"-").concat(r):this.plugin.selectionCalculations.isMergeCellFullySelected(h,this.plugin.hot.getSelectedRange())?"".concat(this.fullySelectedMergedCellClassName,"-multiple"):void 0}}}},{key:"isMergeCellFullySelected",value:function(t,e){var n=[];if(!e||!t)return!1;for(var r=0;r<t.rowspan;r+=1)for(var o=0;o<t.colspan;o+=1)n.push(this.hot._createCellCoords(t.row+r,t.col+o));for(var i=0;i<n.length;i+=1){for(var l=[],s=0;s<e.length;s+=1)l[s]=e[s].includes(n[i]);if(!l.includes(!0))return!1}return!0}},{key:"getSelectedMergedCellClassNameToRemove",value:function(){for(var t=[],i=0;i<=7;i+=1)t.push("".concat(this.fullySelectedMergedCellClassName,"-").concat(i));return t.push("".concat(this.fullySelectedMergedCellClassName,"-multiple")),t}}])&&Fv(e.prototype,n),r&&Fv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zv(t){return zv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zv(t)}function Yv(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||Kv(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gv(t){return function(t){if(Array.isArray(t))return Xv(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Kv(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kv(t,e){if(t){if("string"==typeof t)return Xv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xv(t,e):void 0}}function Xv(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function $v(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qv(n.key),n)}}function qv(t){var e=function(input,t){if("object"!==zv(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==zv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===zv(e)?e:String(e)}function Zv(){return Zv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=eb(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},Zv.apply(this,arguments)}function Jv(t,p){return Jv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Jv(t,p)}function Qv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eb(t);if(e){var o=eb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===zv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return tb(t)}(this,n)}}function tb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eb(t){return eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eb(t)}lt.a.getSingleton().register("beforeMergeCells"),lt.a.getSingleton().register("afterMergeCells"),lt.a.getSingleton().register("beforeUnmergeCells"),lt.a.getSingleton().register("afterUnmergeCells");var nb,rb="mergeCells",ob=new WeakMap,ib=rb,ab=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jv(t,e)}(l,t);var e,n,r,o=Qv(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),e=o.call(this,t),ob.set(tb(e),{lastDesiredCoords:null}),e.mergedCellsCollection=null,e.autofillCalculations=null,e.selectionCalculations=null,e}return e=l,n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[rb]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.mergedCellsCollection=new Iv(this),this.autofillCalculations=new Bv(this),this.selectionCalculations=new Wv(this),this.addHook("afterInit",(function(){return t.onAfterInit.apply(t,arguments)})),this.addHook("modifyTransformStart",(function(){return t.onModifyTransformStart.apply(t,arguments)})),this.addHook("afterModifyTransformStart",(function(){return t.onAfterModifyTransformStart.apply(t,arguments)})),this.addHook("modifyTransformEnd",(function(){return t.onModifyTransformEnd.apply(t,arguments)})),this.addHook("modifyGetCellCoords",(function(){return t.onModifyGetCellCoords.apply(t,arguments)})),this.addHook("beforeSetRangeStart",(function(){return t.onBeforeSetRangeStart.apply(t,arguments)})),this.addHook("beforeSetRangeStartOnly",(function(){return t.onBeforeSetRangeStart.apply(t,arguments)})),this.addHook("beforeSetRangeEnd",(function(){return t.onBeforeSetRangeEnd.apply(t,arguments)})),this.addHook("afterIsMultipleSelection",(function(){return t.onAfterIsMultipleSelection.apply(t,arguments)})),this.addHook("afterRenderer",(function(){return t.onAfterRenderer.apply(t,arguments)})),this.addHook("afterContextMenuDefaultOptions",(function(){return t.addMergeActionsToContextMenu.apply(t,arguments)})),this.addHook("afterGetCellMeta",(function(){return t.onAfterGetCellMeta.apply(t,arguments)})),this.addHook("afterViewportRowCalculatorOverride",(function(){return t.onAfterViewportRowCalculatorOverride.apply(t,arguments)})),this.addHook("afterViewportColumnCalculatorOverride",(function(){return t.onAfterViewportColumnCalculatorOverride.apply(t,arguments)})),this.addHook("modifyAutofillRange",(function(){return t.onModifyAutofillRange.apply(t,arguments)})),this.addHook("afterCreateCol",(function(){return t.onAfterCreateCol.apply(t,arguments)})),this.addHook("afterRemoveCol",(function(){return t.onAfterRemoveCol.apply(t,arguments)})),this.addHook("afterCreateRow",(function(){return t.onAfterCreateRow.apply(t,arguments)})),this.addHook("afterRemoveRow",(function(){return t.onAfterRemoveRow.apply(t,arguments)})),this.addHook("afterChange",(function(){return t.onAfterChange.apply(t,arguments)})),this.addHook("beforeDrawBorders",(function(){return t.onBeforeDrawAreaBorders.apply(t,arguments)})),this.addHook("afterDrawSelection",(function(){return t.onAfterDrawSelection.apply(t,arguments)})),this.addHook("beforeRemoveCellClassNames",(function(){return t.onBeforeRemoveCellClassNames.apply(t,arguments)})),this.addHook("beforeUndoStackChange",(function(t,source){if("MergeCells"===source)return!1})),this.registerShortcuts(),Zv(eb(l.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.clearCollections(),this.unregisterShortcuts(),this.hot.render(),Zv(eb(l.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){var t=this.hot.getSettings()[rb];this.disablePlugin(),this.enablePlugin(),this.generateFromSettings(t),Zv(eb(l.prototype),"updatePlugin",this).call(this)}},{key:"ifChromeForceRepaint",value:function(){var t=this;if(Object(La.isChrome)()){var e=[],n=[];this.mergedCellsCollection.mergedCells.forEach((function(t){for(var e=t.row,r=t.rowspan,o=e+1;o<e+r;o++)n.push(o)})),(n=Gv(new Set(n))).forEach((function(n){var r=t.hot.rowIndexMapper.getRenderableFromVisualIndex(n);t.hot.view._wt.wtOverlays.getOverlays(!0).map((function(t){return"master"===(null==t?void 0:t.name)?t:t.clone.wtTable})).forEach((function(t){var n=t.getRow(r);n&&(n.style.background=Object(c.getStyle)(n,"backgroundColor").replace(")",", 0.99)"),e.push(n))}))})),this.hot._registerTimeout((function(){e.forEach((function(t){t.style.background=Object(c.getStyle)(t,"backgroundColor").replace(", 0.99)",")")}))}),1)}}},{key:"validateSetting",value:function(t){var e=!0;return!!t&&(jv.containsNegativeValues(t)?(Object(kr.b)(jv.NEGATIVE_VALUES_WARNING(t)),e=!1):jv.isOutOfBounds(t,this.hot.countRows(),this.hot.countCols())?(Object(kr.b)(jv.IS_OUT_OF_BOUNDS_WARNING(t)),e=!1):jv.isSingleCell(t)?(Object(kr.b)(jv.IS_SINGLE_CELL(t)),e=!1):jv.containsZeroSpan(t)&&(Object(kr.b)(jv.ZERO_SPAN_WARNING(t)),e=!1),e)}},{key:"generateFromSettings",value:function(t){var e=this;if(Array.isArray(t)){var n=[];if(Object(j.arrayEach)(t,(function(t){if(e.validateSetting(t)){var r=e.hot._createCellCoords(t.row,t.col),o=e.hot._createCellCoords(t.row+t.rowspan-1,t.col+t.colspan-1),l=e.hot._createCellRange(r,r,o);e.mergeRange(l,!0,!0),Object(ie.rangeEach)(t.row,t.row+t.rowspan-1,(function(e){Object(ie.rangeEach)(t.col,t.col+t.colspan-1,(function(r){0==(e===t.row&&r===t.col)&&n.push([e,r,null])}))}))}})),0===n.length)return;this.hot.setDataAtCell(n)}}},{key:"clearCollections",value:function(){this.mergedCellsCollection.clear()}},{key:"canMergeRange",value:function(t){return!!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])||this.validateSetting(t)}},{key:"toggleMergeOnSelection",value:function(){var t=this.hot.getSelectedRangeLast();if(t){t.setDirection(this.hot.isRtl()?"NE-SW":"NW-SE");var e=t.from,n=t.to;this.toggleMerge(t),this.hot.selectCell(e.row,e.col,n.row,n.col,!1)}}},{key:"mergeSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hot.getSelectedRangeLast();if(t){t.setDirection(this.hot.isRtl()?"NE-SW":"NW-SE");var e=t.from,n=t.to;this.unmergeRange(t,!0),this.mergeRange(t),this.hot.selectCell(e.row,e.col,n.row,n.col,!1)}}},{key:"unmergeSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hot.getSelectedRangeLast();if(t){var e=t.from,n=t.to;this.unmergeRange(t,!0),this.hot.selectCell(e.row,e.col,n.row,n.col,!1)}}},{key:"mergeRange",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t.getTopStartCorner(),l=t.getBottomEndCorner(),c={row:o.row,col:o.col,rowspan:l.row-o.row+1,colspan:l.col-o.col+1},f=[],h=null;return!!this.canMergeRange(c,n)&&(this.hot.runHooks("beforeMergeCells",t,n),Object(ie.rangeEach)(0,c.rowspan-1,(function(i){Object(ie.rangeEach)(0,c.colspan-1,(function(t){var n=null;f[i]||(f[i]=[]),0===i&&0===t?n=e.hot.getSourceDataAtCell(e.hot.toPhysicalRow(c.row),e.hot.toPhysicalColumn(c.col)):e.hot.setCellMeta(c.row+i,c.col+t,"hidden",!0),f[i][t]=n}))})),this.hot.setCellMeta(c.row,c.col,"spanned",!0),!this.mergedCellsCollection.add(c)||(r?h=[c.row,c.col,f]:this.hot.populateFromArray(c.row,c.col,f,void 0,void 0,this.pluginName),n||this.ifChromeForceRepaint(),this.hot.runHooks("afterMergeCells",t,c,n),h))}},{key:"unmergeRange",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.mergedCellsCollection.getWithinRange(t);r&&(this.hot.runHooks("beforeUnmergeCells",t,n),Object(j.arrayEach)(r,(function(t){e.mergedCellsCollection.remove(t.row,t.col),Object(ie.rangeEach)(0,t.rowspan-1,(function(i){Object(ie.rangeEach)(0,t.colspan-1,(function(n){e.hot.removeCellMeta(t.row+i,t.col+n,"hidden")}))})),e.hot.removeCellMeta(t.row,t.col,"spanned")})),this.hot.runHooks("afterUnmergeCells",t,n),this.hot.render())}},{key:"toggleMerge",value:function(t){var e=this.mergedCellsCollection.get(t.from.row,t.from.col);e.row===t.from.row&&e.col===t.from.col&&e.row+e.rowspan-1===t.to.row&&e.col+e.colspan-1===t.to.col?this.unmergeRange(t):this.mergeSelection(t)}},{key:"merge",value:function(t,e,n,r){var o=this.hot._createCellCoords(t,e),l=this.hot._createCellCoords(n,r);this.mergeRange(this.hot._createCellRange(o,o,l))}},{key:"unmerge",value:function(t,e,n,r){var o=this.hot._createCellCoords(t,e),l=this.hot._createCellCoords(n,r);this.unmergeRange(this.hot._createCellRange(o,o,l))}},{key:"onAfterInit",value:function(){this.generateFromSettings(this.hot.getSettings()[rb]),this.hot.render()}},{key:"registerShortcuts",value:function(){var t=this;this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Control","m"]],callback:function(){t.toggleMerge(t.hot.getSelectedRangeLast()),t.hot.render()},runOnlyIf:function(t){return!t.altKey},group:ib})}},{key:"unregisterShortcuts",value:function(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(ib)}},{key:"onAfterIsMultipleSelection",value:function(t){if(t)for(var e=this.mergedCellsCollection.mergedCells,n=this.hot.getSelectedRangeLast(),r=0;r<e.length;r+=1)if(n.from.row===e[r].row&&n.from.col===e[r].col&&n.to.row===e[r].row+e[r].rowspan-1&&n.to.col===e[r].col+e[r].colspan-1)return!1;return t}},{key:"onModifyTransformStart",value:function(t){var e,n=ob.get(this),r=this.hot.getSelectedRangeLast(),o={row:t.row,col:t.col},l=this.hot._createCellCoords(r.highlight.row,r.highlight.col),c=this.mergedCellsCollection.get(l.row,l.col);if(n.lastDesiredCoords||(n.lastDesiredCoords=this.hot._createCellCoords(null,null)),c){var f=this.hot._createCellCoords(c.row,c.col),h=this.hot._createCellCoords(c.row+c.rowspan-1,c.col+c.colspan-1);this.hot._createCellRange(f,f,h).includes(n.lastDesiredCoords)||(n.lastDesiredCoords=this.hot._createCellCoords(null,null)),o.row=n.lastDesiredCoords.row?n.lastDesiredCoords.row-l.row:o.row,o.col=n.lastDesiredCoords.col?n.lastDesiredCoords.col-l.col:o.col,t.row>0?o.row=c.row+c.rowspan-1-l.row+t.row:t.row<0&&(o.row=l.row-c.row+t.row),t.col>0?o.col=c.col+c.colspan-1-l.col+t.col:t.col<0&&(o.col=l.col-c.col+t.col)}e=this.hot._createCellCoords(r.highlight.row+o.row,r.highlight.col+o.col);var d=this.mergedCellsCollection.get(e.row,e.col);if(d){var y=this.mergedCellsCollection.getFirstRenderableCoords(d.row,d.col);n.lastDesiredCoords=e,o={row:y.row-l.row,col:y.col-l.col}}0!==o.row&&(t.row=o.row),0!==o.col&&(t.col=o.col)}},{key:"onModifyTransformEnd",value:function(t){var e=this,n=this.hot.getSelectedRangeLast(),r=Object(h.clone)(t),o=this.selectionCalculations.getUpdatedSelectionRange(n,t),l=Object(h.clone)(r),c=this.mergedCellsCollection.getWithinRange(o,!0);do{l=Object(h.clone)(r),this.selectionCalculations.getUpdatedSelectionRange(n,r),Object(j.arrayEach)(c,(function(t){e.selectionCalculations.snapDelta(r,n,t)}))}while(r.row!==l.row||r.col!==l.col);t.row=r.row,t.col=r.col}},{key:"onModifyGetCellCoords",value:function(t,e){if(!(t<0||e<0)){var n=this.mergedCellsCollection.get(t,e);if(n){var r=n.row,o=n.col,l=n.colspan;return[r,o,r+n.rowspan-1,o+l-1]}}}},{key:"addMergeActionsToContextMenu",value:function(t){var e;t.items.push({name:"---------"},(e=this,{key:"mergeCells",name:function(){var t=this.getSelectedLast();if(t){var n=e.mergedCellsCollection.get(t[0],t[1]);if(n.row===t[0]&&n.col===t[1]&&n.row+n.rowspan-1===t[2]&&n.col+n.colspan-1===t[3])return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_UNMERGE_CELLS)}return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_MERGE_CELLS)},callback:function(){e.toggleMergeOnSelection()},disabled:function(){var t=this.getSelectedLast();return!t||jv.isSingleCell({row:t[0],col:t[1],rowspan:t[2]-t[0]+1,colspan:t[3]-t[1]+1})||this.selection.isSelectedByCorner()},hidden:!1}))}},{key:"onAfterRenderer",value:function(t,e,col){var n=this.mergedCellsCollection.get(e,col),r=Object(h.isObject)(n)?Object(h.clone)(n):void 0;if(Object(h.isObject)(r)){var o=this.hot,l=o.rowIndexMapper,c=o.columnIndexMapper,f=r.row,d=r.col,y=r.colspan,v=r.rowspan,m=Yv(this.translateMergedCellToRenderable(f,v,d,y),2),w=m[0],O=m[1],C=w-l.getRenderableFromVisualIndex(e)+1,S=O-c.getRenderableFromVisualIndex(col)+1;r.row=l.getNearestNotHiddenIndex(r.row,1),r.col=c.getNearestNotHiddenIndex(r.col,1),r.rowspan=Math.min(r.rowspan,C),r.colspan=Math.min(r.colspan,S)}Rv(t,r,e,col)}},{key:"onBeforeSetRangeStart",value:function(t){if(this.mergedCellsCollection.isFirstRenderableMergedCell(t.row,t.col)){var e=this.mergedCellsCollection.get(t.row,t.col),n=[e.row,e.col];t.row=n[0],t.col=n[1]}}},{key:"onBeforeSetRangeEnd",value:function(t){var e=this.hot.getSelectedRangeLast();e.highlight=this.hot._createCellCoords(e.highlight.row,e.highlight.col),e.to=t;var n=!1;if(!this.hot.selection.isSelectedByColumnHeader()&&!this.hot.selection.isSelectedByRowHeader())do{n=!1;for(var i=0;i<this.mergedCellsCollection.mergedCells.length;i+=1){var r=this.mergedCellsCollection.mergedCells[i].getRange();e.expandByRange(r)&&(t.row=e.to.row,t.col=e.to.col,n=!0)}}while(n)}},{key:"onAfterGetCellMeta",value:function(t,col,e){var n=this.mergedCellsCollection.get(t,col);n&&(n.row!==t||n.col!==col?e.copyable=!1:(e.rowspan=n.rowspan,e.colspan=n.colspan))}},{key:"onAfterViewportRowCalculatorOverride",value:function(t){var e=this.hot.countCols();this.modifyViewportRowStart(t,e),this.modifyViewportRowEnd(t,e)}},{key:"modifyViewportRowStart",value:function(t,e){for(var n=this.hot.rowIndexMapper,r=n.getVisualFromRenderableIndex(t.startRow),o=0;o<e;o+=1){var l=this.mergedCellsCollection.get(r,o);if(Object(h.isObject)(l)){var c=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(l.row,1));if(c<t.startRow)return t.startRow=c,void this.modifyViewportRowStart(t,e)}}}},{key:"modifyViewportRowEnd",value:function(t,e){for(var n=this.hot.rowIndexMapper,r=n.getVisualFromRenderableIndex(t.endRow),o=0;o<e;o+=1){var l=this.mergedCellsCollection.get(r,o);if(Object(h.isObject)(l)){var c=l.row+l.rowspan-1,f=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(c,-1));if(f>t.endRow)return t.endRow=f,void this.modifyViewportRowEnd(t,e)}}}},{key:"onAfterViewportColumnCalculatorOverride",value:function(t){var e=this.hot.countRows();this.modifyViewportColumnStart(t,e),this.modifyViewportColumnEnd(t,e)}},{key:"modifyViewportColumnStart",value:function(t,e){for(var n=this.hot.columnIndexMapper,r=n.getVisualFromRenderableIndex(t.startColumn),o=0;o<e;o+=1){var l=this.mergedCellsCollection.get(o,r);if(Object(h.isObject)(l)){var c=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(l.col,1));if(c<t.startColumn)return t.startColumn=c,void this.modifyViewportColumnStart(t,e)}}}},{key:"modifyViewportColumnEnd",value:function(t,e){for(var n=this.hot.columnIndexMapper,r=n.getVisualFromRenderableIndex(t.endColumn),o=0;o<e;o+=1){var l=this.mergedCellsCollection.get(o,r);if(Object(h.isObject)(l)){var c=l.col+l.colspan-1,f=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(c,-1));if(f>t.endColumn)return t.endColumn=f,void this.modifyViewportColumnEnd(t,e)}}}},{key:"translateMergedCellToRenderable",value:function(t,e,n,r){var o,l,c=this.hot,f=c.rowIndexMapper,h=c.columnIndexMapper;return o=0===e?f.getNearestNotHiddenIndex(t,1):f.getNearestNotHiddenIndex(t+e-1,-1),l=0===r?h.getNearestNotHiddenIndex(n,1):h.getNearestNotHiddenIndex(n+r-1,-1),[t>=0?f.getRenderableFromVisualIndex(o):t,n>=0?h.getRenderableFromVisualIndex(l):n]}},{key:"onModifyAutofillRange",value:function(t,select){this.autofillCalculations.correctSelectionAreaSize(select);var e=this.autofillCalculations.getDirection(select,t),n=t;if(this.autofillCalculations.dragAreaOverlapsCollections(select,n,e))return n=select;var r=this.mergedCellsCollection.getWithinRange({from:{row:select[0],col:select[1]},to:{row:select[2],col:select[3]}});return r?n=this.autofillCalculations.snapDragArea(select,n,e,r):n}},{key:"onAfterCreateCol",value:function(t,e){this.mergedCellsCollection.shiftCollections("right",t,e)}},{key:"onAfterRemoveCol",value:function(t,e){this.mergedCellsCollection.shiftCollections("left",t,e)}},{key:"onAfterCreateRow",value:function(t,e,source){"auto"!==source&&this.mergedCellsCollection.shiftCollections("down",t,e)}},{key:"onAfterRemoveRow",value:function(t,e){this.mergedCellsCollection.shiftCollections("up",t,e)}},{key:"onAfterChange",value:function(t,source){"Autofill.fill"===source&&this.autofillCalculations.recreateAfterDataPopulation(t)}},{key:"onBeforeDrawAreaBorders",value:function(t,e){if(e&&"area"===e){var n=this.hot.getSelectedRangeLast(),r=this.mergedCellsCollection.getWithinRange(n);Object(j.arrayEach)(r,(function(e){n.getBottomEndCorner().row===e.getLastRow()&&n.getBottomEndCorner().col===e.getLastColumn()&&(t[2]=e.row,t[3]=e.col)}))}}},{key:"onAfterModifyTransformStart",value:function(t,e,n){if(this.enabled){var r=this.mergedCellsCollection.get(t.row,t.col);if(r){var o=e>0,l=e<0,c=n<0,f=n>0,h=r.row+r.rowspan-1==this.hot.countRows()-1,d=0===r.row,y=r.col+r.colspan-1==this.hot.countCols()-1,v=0===r.col;(o&&h||l&&d||f&&y||c&&v)&&(t.row=r.row,t.col=r.col)}}}},{key:"onAfterDrawSelection",value:function(t,e,n,r){if(n)return this.selectionCalculations.getSelectedMergedCellClassName(t,e,n,r)}},{key:"onBeforeRemoveCellClassNames",value:function(){return this.selectionCalculations.getSelectedMergedCellClassNameToRemove()}}],r=[{key:"PLUGIN_KEY",get:function(){return rb}},{key:"PLUGIN_PRIORITY",get:function(){return 150}}],n&&$v(e.prototype,n),r&&$v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function lb(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ub(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ub(t,e)}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ub(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function sb(){var t,e;Object(kr.b)(Object(ui.a)(nb||(t=["Plugins `columnSorting` and `multiColumnSorting` should not be enabled simultaneously. \n    Only `multiColumnSorting` will work."],(e=["Plugins \\`columnSorting\\` and \\`multiColumnSorting\\` should not be enabled simultaneously. \n    Only \\`multiColumnSorting\\` will work."])||(e=t.slice(0)),nb=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}})))))}var cb="sort";function fb(t,e,n){var r=[];return!1===n||t.isColumnSorted(e)&&t.getNumberOfSortedColumns()>1&&r.push("".concat(cb,"-").concat(t.getIndexOfColumnInSortQueue(e)+1)),r}function hb(t){return hb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hb(t)}function db(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pb(n.key),n)}}function pb(t){var e=function(input,t){if("object"!==hb(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==hb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===hb(e)?e:String(e)}function yb(){return yb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=bb(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},yb.apply(this,arguments)}function gb(t,p){return gb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},gb(t,p)}function vb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=bb(t);if(e){var o=bb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===hb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function bb(t){return bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bb(t)}var mb="multiColumnSorting",wb="columnSorting";Ao(mb,(function(t,e){return function(n,r){var o=lb(n).slice(1),l=lb(r).slice(1);return function n(r){var c=t[r],f=e[r],h=o[r],d=l[r],y=f.multiColumnSorting,v=(y.compareFunctionFactory?y.compareFunctionFactory:xo(f.type))(c,f,y)(h,d);if(v===Oo){var m=r+1;if(void 0!==e[m])return n(m)}return v}(0)}}));var Ob=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gb(t,e)}(l,t);var e,n,r,o=vb(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).pluginKey=mb,e}return e=l,n=[{key:"isEnabled",value:function(){return yb(bb(l.prototype),"isEnabled",this).call(this)}},{key:"enablePlugin",value:function(){!this.enabled&&this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[wb]&&sb(),yb(bb(l.prototype),"enablePlugin",this).call(this)}},{key:"disablePlugin",value:function(){yb(bb(l.prototype),"disablePlugin",this).call(this)}},{key:"sort",value:function(t){yb(bb(l.prototype),"sort",this).call(this,t)}},{key:"clearSort",value:function(){yb(bb(l.prototype),"clearSort",this).call(this)}},{key:"isSorted",value:function(){return yb(bb(l.prototype),"isSorted",this).call(this)}},{key:"getSortConfig",value:function(t){return yb(bb(l.prototype),"getSortConfig",this).call(this,t)}},{key:"setSortConfig",value:function(t){yb(bb(l.prototype),"setSortConfig",this).call(this,t)}},{key:"getNormalizedSortConfigs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)?t:[t]}},{key:"updateHeaderClasses",value:function(t){for(var e,n,r,o=arguments.length,f=new Array(o>1?o-1:0),h=1;h<o;h++)f[h-1]=arguments[h];(e=yb(bb(l.prototype),"updateHeaderClasses",this)).call.apply(e,[this,t].concat(f)),Object(c.removeClass)(t,(n=t.className.split(" "),r=new RegExp("^".concat(cb,"-[0-9]{1,2}$")),n.filter((function(t){return r.test(t)})))),!1!==this.enabled&&Object(c.addClass)(t,fb.apply(void 0,f))}},{key:"onUpdateSettings",value:function(t){this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[wb]&&sb(),yb(bb(l.prototype),"onUpdateSettings",this).call(this,t)}},{key:"onAfterOnCellMouseDown",value:function(t,e){!1!==yo(e.row,e.col,t)&&this.wasClickableHeaderClicked(t,e.col)&&(this.hot.getShortcutManager().isCtrlPressed()?(this.hot.deselectCell(),this.hot.selectColumns(e.col),this.sort(this.getNextSortConfig(e.col,"append"))):this.sort(this.getColumnNextConfig(e.col)))}}],r=[{key:"PLUGIN_KEY",get:function(){return mb}},{key:"PLUGIN_PRIORITY",get:function(){return 170}}],n&&db(e.prototype,n),r&&db(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(ei);function Cb(t){return Cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cb(t)}function Sb(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kb(n.key),n)}}function kb(t){var e=function(input,t){if("object"!==Cb(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Cb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Cb(e)?e:String(e)}function jb(){return jb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=Pb(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},jb.apply(this,arguments)}function Rb(t,p){return Rb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Rb(t,p)}function Eb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Pb(t);if(e){var o=Pb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Cb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Pb(t){return Pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pb(t)}var Mb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rb(t,e)}(l,t);var e,n,r,o=Eb(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).dragged=[],e.eventManager=null,e.lastSetCell=null,e}return e=l,r=[{key:"PLUGIN_KEY",get:function(){return"multipleSelectionHandles"}},{key:"PLUGIN_PRIORITY",get:function(){return 160}}],(n=[{key:"isEnabled",value:function(){return Object(La.isMobileBrowser)()}},{key:"enablePlugin",value:function(){this.enabled||(this.eventManager||(this.eventManager=new $.a(this)),this.registerListeners(),jb(Pb(l.prototype),"enablePlugin",this).call(this))}},{key:"registerListeners",value:function(){var t=this,e=this,n=this.hot.rootElement;function r(t){if(1===e.dragged.length)return e.dragged.splice(0,e.dragged.length),!0;var n=e.dragged.indexOf(t);if(-1===n)return!1;0===n?e.dragged=e.dragged.slice(0,1):1===n&&(e.dragged=e.dragged.slice(-1))}this.eventManager.addEventListener(n,"touchstart",(function(t){var n;return Object(c.hasClass)(t.target,"topSelectionHandle-HitArea")?(n=e.hot.getSelectedRangeLast(),e.dragged.push("top"),e.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},t.preventDefault(),!1):Object(c.hasClass)(t.target,"bottomSelectionHandle-HitArea")?(n=e.hot.getSelectedRangeLast(),e.dragged.push("bottom"),e.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},t.preventDefault(),!1):void 0})),this.eventManager.addEventListener(n,"touchend",(function(t){return Object(c.hasClass)(t.target,"topSelectionHandle-HitArea")?(r.call(e,"top"),e.touchStartRange=void 0,t.preventDefault(),!1):Object(c.hasClass)(t.target,"bottomSelectionHandle-HitArea")?(r.call(e,"bottom"),e.touchStartRange=void 0,t.preventDefault(),!1):void 0})),this.eventManager.addEventListener(n,"touchmove",(function(n){var r,o,l,c,f,h,d=t.hot.rootDocument;if(0!==e.dragged.length){var y=d.elementFromPoint(n.touches[0].clientX,n.touches[0].clientY);y&&y!==e.lastSetCell&&("TD"!==y.nodeName&&"TH"!==y.nodeName||(-1===(r=e.hot.getCoords(y)).col&&(r.col=0),l=(o=e.hot.getSelectedRangeLast()).getWidth(),c=o.getHeight(),f=o.getDirection(),1===l&&1===c&&e.hot.selection.setRangeEnd(r),null!==(h=e.getCurrentRangeCoords(o,r,e.touchStartRange.direction,f,e.dragged[0])).start&&e.hot.selection.setRangeStart(h.start),e.hot.selection.setRangeEnd(h.end),e.lastSetCell=y),n.preventDefault())}}))}},{key:"getCurrentRangeCoords",value:function(t,e,n,r,o){var l=t.getTopStartCorner(),c=t.getBottomEndCorner(),f=t.getBottomStartCorner(),h=t.getTopEndCorner(),d={start:null,end:null};switch(n){case"NE-SW":switch(r){case"NE-SW":case"NW-SE":d="top"===o?{start:this.hot._createCellCoords(e.row,t.highlight.col),end:this.hot._createCellCoords(f.row,e.col)}:{start:this.hot._createCellCoords(t.highlight.row,e.col),end:this.hot._createCellCoords(e.row,l.col)};break;case"SE-NW":"bottom"===o&&(d={start:this.hot._createCellCoords(c.row,e.col),end:this.hot._createCellCoords(e.row,l.col)})}break;case"NW-SE":switch(r){case"NE-SW":"top"===o?d={start:e,end:f}:d.end=e;break;case"NW-SE":"top"===o?d={start:e,end:c}:d.end=e;break;case"SE-NW":"top"===o?d={start:e,end:l}:d.end=e;break;case"SW-NE":"top"===o?d={start:e,end:h}:d.end=e}break;case"SW-NE":switch(r){case"NW-SE":d="bottom"===o?{start:this.hot._createCellCoords(e.row,l.col),end:this.hot._createCellCoords(f.row,e.col)}:{start:this.hot._createCellCoords(l.row,e.col),end:this.hot._createCellCoords(e.row,c.col)};break;case"SW-NE":d="top"===o?{start:this.hot._createCellCoords(t.highlight.row,e.col),end:this.hot._createCellCoords(e.row,c.col)}:{start:this.hot._createCellCoords(e.row,l.col),end:this.hot._createCellCoords(l.row,e.col)};break;case"SE-NW":"bottom"===o?d={start:this.hot._createCellCoords(e.row,h.col),end:this.hot._createCellCoords(l.row,e.col)}:"top"===o&&(d={start:f,end:e})}break;case"SE-NW":switch(r){case"NW-SE":case"NE-SW":case"SW-NE":"top"===o&&(d.end=e);break;case"SE-NW":"top"===o?d.end=e:d={start:e,end:l}}}return d}},{key:"isDragged",value:function(){return this.dragged.length>0}}])&&Sb(e.prototype,n),r&&Sb(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be),_b=n(728);function Tb(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.label,label=void 0===e?"":e,n=t.colspan,r=void 0===n?1:n,o=t.origColspan,l=void 0===o?1:o,c=t.collapsible,f=void 0!==c&&c,h=t.crossHiddenColumns,d=void 0===h?[]:h,y=t.isCollapsed,v=void 0!==y&&y,m=t.isHidden,w=void 0!==m&&m,O=t.isRoot,C=void 0!==O&&O,S=t.isPlaceholder;return{label:label,colspan:r,origColspan:l,collapsible:f,isCollapsed:v,crossHiddenColumns:d,isHidden:w,isRoot:C,isPlaceholder:void 0!==S&&S}}function Ab(t){return function(t){if(Array.isArray(t))return Ib(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Ib(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ib(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ib(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function xb(t){return xb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xb(t)}var Db=["row","col"];function Nb(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Hb(t,e,n){return(e=Ub(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lb(source,t){if(null==source)return{};var e,i,n=function(source,t){if(null==source)return{};var e,i,n={},r=Object.keys(source);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||(n[e]=source[e]);return n}(source,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(source);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(source,e)&&(n[e]=source[e])}return n}function Bb(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ub(n.key),n)}}function Ub(t){var e=function(input,t){if("object"!==xb(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==xb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===xb(e)?e:String(e)}function Fb(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Vb(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,zb(t,e,"get"))}function Wb(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,zb(t,e,"set"),n),n}function zb(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Yb=["label","collapsible"],Gb=new WeakMap,Kb=new WeakMap,Xb=new WeakMap,$b=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Fb(this,Gb,{writable:!0,value:[]}),Fb(this,Kb,{writable:!0,value:0}),Fb(this,Xb,{writable:!0,value:1/0})}var e,n,r;return e=t,n=[{key:"setColumnsLimit",value:function(t){Wb(this,Xb,t)}},{key:"setData",value:function(){Wb(this,Gb,function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=[];if(0===e)return n;Object(j.arrayEach)(t,(function(t){var r=[],o=0;n.push(r),Object(j.arrayEach)(t,(function(t){var n=Tb();if(Object(h.isObject)(t)){var label=t.label,l=t.colspan;n.label=Object(R.stringify)(label),"number"==typeof l&&l>1&&(n.colspan=l,n.origColspan=l)}else n.label=Object(R.stringify)(t);var c=!1;if((o+=n.origColspan)>=e&&(n.colspan=n.origColspan-(o-e),n.origColspan=n.colspan,c=!0),r.push(n),n.colspan>1)for(var i=0;i<n.colspan-1;i++)r.push({label:"",isPlaceholder:!0});return!c}))}));var r=Math.max.apply(Math,Ab(Object(j.arrayMap)(n,(function(t){return t.length}))));return Object(j.arrayEach)(n,(function(t){if(t.length<r){var e=Object(j.arrayMap)(new Array(r-t.length),(function(){return Tb()}));t.splice.apply(t,[t.length,0].concat(Ab(e)))}})),n}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],Vb(this,Xb))),Wb(this,Kb,Vb(this,Gb).length)}},{key:"getData",value:function(){return Vb(this,Gb)}},{key:"mergeWith",value:function(t){var e=this;Object(j.arrayEach)(t,(function(t){var n=t.row,col=t.col,r=Lb(t,Db),o=e.getHeaderSettings(n,col);null!==o&&Object(h.extend)(o,r,Yb)}))}},{key:"map",value:function(t){Object(j.arrayEach)(Vb(this,Gb),(function(header){Object(j.arrayEach)(header,(function(e){var n=t(function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Nb(Object(source),!0).forEach((function(e){Hb(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Nb(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},e));Object(h.isObject)(n)&&Object(h.extend)(e,n,Yb)}))}))}},{key:"getHeaderSettings",value:function(t,e){var n;if(t>=Vb(this,Kb)||t<0)return null;var r=Vb(this,Gb)[t];return e>=r.length?null:null!==(n=r[e])&&void 0!==n?n:null}},{key:"getHeadersSettings",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=[];if(t>=Vb(this,Kb)||t<0)return r;for(var o=Vb(this,Gb)[t],l=0,i=e;i<o.length;i++){var c=o[i];if(c.isPlaceholder)throw new Error("The first column settings cannot overlap the other header layers");if(l+=c.colspan,r.push(c),c.colspan>1&&(i+=c.colspan-1),l===n)break;if(l>n)throw new Error("The last column settings cannot overlap the other header layers")}return r}},{key:"getLayersCount",value:function(){return Vb(this,Kb)}},{key:"getColumnsCount",value:function(){return Vb(this,Kb)>0?Vb(this,Gb)[0].length:0}},{key:"clear",value:function(){Wb(this,Gb,[]),Wb(this,Kb,0)}}],n&&Bb(e.prototype,n),r&&Bb(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qb(t){return qb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qb(t)}function Zb(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Jb(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Zb(Object(source),!0).forEach((function(e){tm(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Zb(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function Qb(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nm(n.key),n)}}function tm(t,e,n){return(e=nm(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nm(t){var e=function(input,t){if("object"!==qb(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==qb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===qb(e)?e:String(e)}function rm(t){return function(t){if(Array.isArray(t))return om(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return om(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return om(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function om(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var im="BF",am=new Map([["DF-pre-order",function t(e,n){for(var r=e.call(n,this),i=0;i<this.childs.length;i++){if(!1===r)return!1;r=t.call(this.childs[i],e,n)}return r}],["DF-post-order",function t(e,n){for(var i=0;i<this.childs.length;i++){if(!1===t.call(this.childs[i],e,n))return!1}return e.call(n,this)}],["BF",function(t,e){var n=[this];!function r(){if(0!==n.length){var o=n.shift();n.push.apply(n,rm(o.childs)),!1!==t.call(e,o)&&r()}}()}]]),lm=function(){function t(data){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),tm(this,"data",{}),tm(this,"parent",null),tm(this,"childs",[]),this.data=data}var e,n,r;return e=t,n=[{key:"addChild",value:function(t){t.parent=this,this.childs.push(t)}},{key:"cloneTree",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,n=new t(Jb({},e.data)),i=0;i<e.childs.length;i++)n.addChild(this.cloneTree(e.childs[i]));return n}},{key:"replaceTreeWith",value:function(t){this.data=Jb({},t.data),this.childs=[];for(var i=0;i<t.childs.length;i++)this.addChild(t.childs[i])}},{key:"walkDown",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:im;if(!am.has(e))throw new Error('Traversal strategy "'.concat(e,'" does not exist'));am.get(e).call(this,t,this)}},{key:"walkUp",value:function(t){var e=this;!function n(r){!1!==t.call(e,r)&&null!==r.parent&&n(r.parent)}(this)}}],n&&Qb(e.prototype,n),r&&Qb(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function um(t){return um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},um(t)}function sm(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function cm(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?sm(Object(source),!0).forEach((function(e){fm(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):sm(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function fm(t,e,n){return(e=ym(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hm(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||function(t,e){if(!t)return;if("string"==typeof t)return dm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dm(t,e)}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dm(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function pm(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ym(n.key),n)}}function ym(t){var e=function(input,t){if("object"!==um(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==um(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===um(e)?e:String(e)}function gm(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function vm(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,mm(t,e,"get"))}function bm(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,mm(t,e,"set"),n),n}function mm(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var wm,Om,Cm=new WeakMap,Sm=new WeakMap,km=new WeakMap,jm=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),gm(this,Cm,{writable:!0,value:new Map}),gm(this,Sm,{writable:!0,value:new Map}),gm(this,km,{writable:!0,value:null}),bm(this,km,e)}var e,n,r;return e=t,n=[{key:"getRoots",value:function(){return Array.from(vm(this,Cm).values())}},{key:"getRootByColumn",value:function(t){var e;return vm(this,Sm).has(t)&&(e=vm(this,Cm).get(vm(this,Sm).get(t))),e}},{key:"getNode",value:function(t,e){var n=this.getRootByColumn(e);if(n){var r,o=e-vm(this,Sm).get(e),l=0;return n.walkDown((function(n){var c=n.data,f=c.origColspan,h=c.headerLevel;if(t===h){if(o>=l&&o<=l+f-1)return(r=n).data.isRoot=e===r.data.columnIndex,!1;l+=f}})),r}}},{key:"rebuildTreeIndex",value:function(){var t=this,e=0;vm(this,Sm).clear(),Object(j.arrayEach)(vm(this,Cm),(function(n){for(var r=hm(n,2)[1].data.colspan,i=e;i<e+r;i++)vm(t,Sm).set(i,e);e+=r}))}},{key:"buildTree",value:function(){this.clear();for(var t=vm(this,km).getColumnsCount(),e=0;e<t;){var n=vm(this,km).getHeaderSettings(0,e),r=new lm;vm(this,Cm).set(e,r),this.buildLeaves(r,e,0,n.origColspan),e+=n.origColspan}this.rebuildTreeIndex()}},{key:"buildLeaves",value:function(t,e,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=vm(this,km).getHeadersSettings(n,e,o);n+=1,Object(j.arrayEach)(l,(function(o){var l,c=cm(cm({},o),{},{headerLevel:n-1,columnIndex:e});1===n?(t.data=c,l=t):(l=new lm(c),t.addChild(l)),n<vm(r,km).getLayersCount()&&r.buildLeaves(l,e,n,o.origColspan),e+=o.origColspan}))}},{key:"clear",value:function(){vm(this,Cm).clear(),vm(this,Sm).clear()}}],n&&pm(e.prototype,n),r&&pm(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Rm(t,e){t.walkDown((function(t){var data=t.data,n=t.childs;if(!data.isHidden&&(e(data.columnIndex),0===n.length))for(var i=1;i<data.colspan;i++)e(data.columnIndex+i)}))}function Em(t,e){var n=t.childs;if(0!==n.length)return n[0].data[e]}function Pm(t){return Em(t,"origColspan")===t.data.origColspan}function Mm(t){var e=t.data,n=t.childs;if(!e.isCollapsed||e.isHidden||e.origColspan<=1)return{rollbackModification:function(){},affectedColumns:[],colspanCompensation:0};if(Pm(t))return Mm(n[0]);e.isCollapsed=!1;var r=n.slice(1),o=new Set,l=0;if(r.length>0)Object(j.arrayEach)(r,(function(t){t.replaceTreeWith(t.data.clonedTree),t.data.clonedTree=null;var e=t.data;l+=e.colspan,Rm(t,(function(t){o.add(t)}))}));else{var c=e.colspan,f=e.origColspan,h=e.columnIndex;l=f-c;for(var i=1;i<f;i++)o.add(h+i)}return t.walkUp((function(t){var data=t.data;data.colspan+=l,data.colspan>=data.origColspan?(data.colspan=data.origColspan,data.isCollapsed=!1):Pm(t)&&(data.isCollapsed=Em(t,"isCollapsed"))})),{rollbackModification:function(){return _m(t)},affectedColumns:Array.from(o),colspanCompensation:l}}function _m(t){var e,n=t.data,r=t.childs;if(n.isCollapsed||n.isHidden||n.origColspan<=1)return{rollbackModification:function(){},affectedColumns:[],colspanCompensation:0};if(Pm(t))return _m(r[0]);n.isCollapsed=!0;var o=r.slice(1),l=new Set;if(o.length>0)Object(j.arrayEach)(o,(function(t){Rm(t,(function(t){l.add(t)})),t.data.clonedTree=t.cloneTree(),t.walkDown((function(t){t.data.isHidden=!0}))}));else for(var c=n.origColspan,f=n.columnIndex,i=1;i<c;i++){var h=f+i;l.add(h)}var d=n.colspan-(null!==(e=Em(t,"colspan"))&&void 0!==e?e:1);return t.walkUp((function(t){var data=t.data;data.colspan-=d,data.colspan<=1?(data.colspan=1,data.isCollapsed=!0):Pm(t)&&(data.isCollapsed=Em(t,"isCollapsed"))})),{rollbackModification:function(){return Mm(t)},affectedColumns:Array.from(l),colspanCompensation:d}}var Tm=new Map([["collapse",_m],["expand",Mm],["hide-column",function(t,e){if(!Number.isInteger(e))throw new Error("The passed gridColumnIndex argument has invalid type.");if(t.childs.length>0)throw new Error(Object(ui.a)(wm||(n=["The passed node is not the last node on the tree. Only for \nthe last node, the hide column modification can be applied."],(r=["The passed node is not the last node on the tree. Only for\\x20\nthe last node, the hide column modification can be applied."])||(r=n.slice(0)),wm=Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(r)}})))));var n,r;if(!t.data.crossHiddenColumns.includes(e)){var o=!1;t.walkUp((function(t){if(t.data.collapsible)return o=!0,!1})),o||t.walkUp((function(t){var data=t.data;data.crossHiddenColumns.push(e),data.colspan>1?data.colspan-=1:data.isHidden=!0}))}}],["show-column",function(t,e){if(!Number.isInteger(e))throw new Error("The passed gridColumnIndex argument has invalid type.");if(t.childs.length>0)throw new Error(Object(ui.a)(Om||(n=["The passed node is not the last node on the tree. Only for \nthe last node, the show column modification can be applied."],(r=["The passed node is not the last node on the tree. Only for\\x20\nthe last node, the show column modification can be applied."])||(r=n.slice(0)),Om=Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(r)}})))));var n,r;if(t.data.crossHiddenColumns.includes(e)){var o=!1;t.walkUp((function(t){if(t.data.collapsible)return o=!0,!1})),o||t.walkUp((function(t){var data=t.data;data.crossHiddenColumns.splice(data.crossHiddenColumns.indexOf(e),1),!data.isHidden&&data.colspan<data.origColspan&&(data.colspan+=1),data.isHidden=!1}))}}]]);var Am=["crossHiddenColumns"];function Im(source,t){if(null==source)return{};var e,i,n=function(source,t){if(null==source)return{};var e,i,n={},r=Object.keys(source);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||(n[e]=source[e]);return n}(source,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(source);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(source,e)&&(n[e]=source[e])}return n}function xm(t){var e=[];return Object(j.arrayEach)(t,(function(t){t.walkDown((function(t){for(var n=t.data,r=n.origColspan,o=n.columnIndex,l=n.headerLevel,c=n.crossHiddenColumns,f=function(t,e){var n;Array.isArray(t[e])?n=t[e]:(n=[],t[e]=n);return n}(e,l),h=!1,i=o;i<o+r;i++){if(c.includes(i)||h)f.push({label:"",isPlaceholder:!0});else{var d=Dm(n);d.isRoot=!0,f.push(d),h=!0}}}))})),e}function Dm(t){var e=Tb(t);e.crossHiddenColumns;return Im(e,Am)}function Nm(t){return Nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nm(t)}var Hm=["row"];function Lm(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Bm(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Lm(Object(source),!0).forEach((function(e){Um(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Lm(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function Um(t,e,n){return(e=Wm(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fm(source,t){if(null==source)return{};var e,i,n=function(source,t){if(null==source)return{};var e,i,n={},r=Object.keys(source);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||(n[e]=source[e]);return n}(source,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(source);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(source,e)&&(n[e]=source[e])}return n}function Vm(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wm(n.key),n)}}function Wm(t){var e=function(input,t){if("object"!==Nm(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Nm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Nm(e)?e:String(e)}function zm(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Ym(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Km(t,e,"set"),n),n}function Gm(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Km(t,e,"get"))}function Km(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Xm=new WeakMap,$m=new WeakMap,qm=new WeakMap,Zm=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),zm(this,Xm,{writable:!0,value:new $b}),zm(this,$m,{writable:!0,value:new jm(Gm(this,Xm))}),zm(this,qm,{writable:!0,value:[[]]})}var e,n,r;return e=t,(n=[{key:"setState",value:function(t){Gm(this,Xm).setData(t);var e=!1;try{Gm(this,$m).buildTree()}catch(t){Gm(this,$m).clear(),Gm(this,Xm).clear(),e=!0}return Ym(this,qm,xm(Gm(this,$m).getRoots())),e}},{key:"setColumnsLimit",value:function(t){Gm(this,Xm).setColumnsLimit(t)}},{key:"mergeStateWith",value:function(t){var e=this,n=Object(j.arrayMap)(t,(function(t){var n=t.row,r=Fm(t,Hm);return Bm({row:n<0?e.rowCoordsToLevel(n):n},r)}));Gm(this,Xm).mergeWith(n),Gm(this,$m).buildTree(),Ym(this,qm,xm(Gm(this,$m).getRoots()))}},{key:"mapState",value:function(t){Gm(this,Xm).map(t),Gm(this,$m).buildTree(),Ym(this,qm,xm(Gm(this,$m).getRoots()))}},{key:"mapNodes",value:function(t){return Object(j.arrayReduce)(Gm(this,$m).getRoots(),(function(e,n){return n.walkDown((function(n){var r=t(n.data);void 0!==r&&e.push(r)})),e}),[])}},{key:"triggerNodeModification",value:function(t,e,n){e<0&&(e=this.rowCoordsToLevel(e));var r,o=Gm(this,$m).getNode(e,n);return o&&(r=function(t,e,n){if(!Tm.has(t))throw new Error('The node modifier action ("'.concat(t,'") does not exist.'));return Tm.get(t)(e,n)}(t,o,n),Ym(this,qm,xm(Gm(this,$m).getRoots()))),r}},{key:"triggerColumnModification",value:function(t,e){return this.triggerNodeModification(t,-1,e)}},{key:"rowCoordsToLevel",value:function(t){if(t>=0)return null;var e=t+Math.max(this.getLayersCount(),1);return e<0?null:e}},{key:"levelToRowCoords",value:function(t){if(t<0)return null;var e=t-Math.max(this.getLayersCount(),1);return e>=0?null:e}},{key:"getHeaderSettings",value:function(t,e){var n,r;return t<0&&(t=this.rowCoordsToLevel(t)),null===t||t>=this.getLayersCount()?null:null!==(n=null===(r=Gm(this,qm)[t])||void 0===r?void 0:r[e])&&void 0!==n?n:null}},{key:"getHeaderTreeNodeData",value:function(t,e){if(t<0&&(t=this.rowCoordsToLevel(t)),null===t||t>=this.getLayersCount())return null;var n=Gm(this,$m).getNode(t,e);return n?Bm({},n.data):null}},{key:"findLeftMostColumnIndex",value:function(t,e){var n;if((null!==(n=this.getHeaderSettings(t,e))&&void 0!==n?n:{isRoot:!0}).isRoot)return e;for(var r=e-1;r>=0;){var o;if((null!==(o=this.getHeaderSettings(t,r))&&void 0!==o?o:{isRoot:!0}).isRoot)break;r-=1}return r}},{key:"getLayersCount",value:function(){return Gm(this,Xm).getLayersCount()}},{key:"getColumnsCount",value:function(){return Gm(this,Xm).getColumnsCount()}},{key:"clear",value:function(){Ym(this,qm,[]),Gm(this,Xm).clear(),Gm(this,$m).clear()}}])&&Vm(e.prototype,n),r&&Vm(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Jm(t){return Jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jm(t)}function Qm(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ew(n.key),n)}}function tw(t,e,n){return(e=ew(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ew(t){var e=function(input,t){if("object"!==Jm(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Jm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Jm(e)?e:String(e)}var nw,rw,ow=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),tw(this,"hot",void 0),tw(this,"nestedHeaderSettingsGetter",void 0),tw(this,"layersCount",0),tw(this,"container",void 0),tw(this,"widthsMap",void 0),this.hot=e,this.nestedHeaderSettingsGetter=n,this.widthsMap=this.hot.columnIndexMapper.createAndRegisterIndexMap("nestedHeaders.widthsMap","physicalIndexToValue")}var e,n,r;return e=t,(n=[{key:"setLayersCount",value:function(t){return this.layersCount=t,this}},{key:"getWidth",value:function(t){return this.widthsMap.getValueAtIndex(this.hot.toPhysicalColumn(t))}},{key:"buildWidthsMap",value:function(){this.container=this.hot.rootDocument.createElement("div"),this.container.classList.add("handsontable","htGhostTable","htAutoSize"),this._buildGhostTable(this.container),this.hot.rootDocument.body.appendChild(this.container);var t=this.container.querySelectorAll("tr:last-of-type th"),e=t.length;this.widthsMap.clear();for(var n=0;n<e;n++){var r=this.hot.columnIndexMapper.getVisualFromRenderableIndex(n),o=this.hot.toPhysicalColumn(r);this.widthsMap.setValueAtIndex(o,t[n].offsetWidth)}this.container.parentNode.removeChild(this.container),this.container=null}},{key:"_buildGhostTable",value:function(t){for(var e=this.hot,n=e.rootDocument,r=e.columnIndexMapper,o=n.createDocumentFragment(),table=n.createElement("table"),l=!!this.hot.getSettings().dropdownMenu,f=r.getRenderableIndexesLength(),h=0;h<this.layersCount;h++){for(var tr=n.createElement("tr"),col=0;col<f;col++){var d=r.getVisualFromRenderableIndex(col);null===d&&(d=col);var th=n.createElement("th"),y=this.nestedHeaderSettingsGetter(h,d);if(y&&(!y.isPlaceholder||y.isHidden)){var label=y.label;l&&(label+='<button class="changeType"></button>'),Object(c.fastInnerHTML)(th,label),th.colSpan=y.colspan,tr.appendChild(th)}}table.appendChild(tr)}o.appendChild(table),t.appendChild(o)}},{key:"clear",value:function(){this.widthsMap.clear(),this.container=null}}])&&Qm(e.prototype,n),r&&Qm(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function iw(t){return iw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iw(t)}function aw(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function lw(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pw(n.key),n)}}function uw(){return uw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=hw(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},uw.apply(this,arguments)}function sw(t,p){return sw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},sw(t,p)}function cw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hw(t);if(e){var o=hw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===iw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fw(t)}(this,n)}}function fw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hw(t){return hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hw(t)}function dw(t,e,n){return(e=pw(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pw(t){var e=function(input,t){if("object"!==iw(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==iw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===iw(e)?e:String(e)}function yw(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function gw(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,bw(t,e,"set"),n),n}function vw(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,bw(t,e,"get"))}function bw(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var mw="nestedHeaders",ww=new WeakMap,Ow=new WeakMap,Cw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sw(t,e)}(l,t);var e,n,r,o=cw(l);function l(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return yw(fw(t=o.call.apply(o,[this].concat(n))),ww,{writable:!0,value:new Zm}),yw(fw(t),Ow,{writable:!0,value:null}),dw(fw(t),"ghostTable",new ow(t.hot,(function(e,n){return t.getHeaderSettings(e,n)}))),dw(fw(t),"detectedOverlappedHeaders",!1),t}return e=l,n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[mw]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings().nestedHeaders;Array.isArray(e)&&Array.isArray(e[0])||Object(kr.b)(Object(ui.a)(nw||(nw=aw(["Your Nested Headers plugin configuration is invalid. The settings has to be \n                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]"],["Your Nested Headers plugin configuration is invalid. The settings has to be\\x20\n                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]"])))),this.addHook("init",(function(){return t.onInit()})),this.addHook("afterLoadData",(function(){return t.onAfterLoadData.apply(t,arguments)})),this.addHook("beforeOnCellMouseDown",(function(){return t.onBeforeOnCellMouseDown.apply(t,arguments)})),this.addHook("afterOnCellMouseDown",(function(){return t.onAfterOnCellMouseDown.apply(t,arguments)})),this.addHook("beforeOnCellMouseOver",(function(){return t.onBeforeOnCellMouseOver.apply(t,arguments)})),this.addHook("afterGetColumnHeaderRenderers",(function(e){return t.onAfterGetColumnHeaderRenderers(e)})),this.addHook("modifyColWidth",(function(){return t.onModifyColWidth.apply(t,arguments)})),this.addHook("modifyColumnHeaderValue",(function(){return t.onModifyColumnHeaderValue.apply(t,arguments)})),this.addHook("beforeHighlightingColumnHeader",(function(){return t.onBeforeHighlightingColumnHeader.apply(t,arguments)})),this.addHook("beforeCopy",(function(){return t.onBeforeCopy.apply(t,arguments)})),this.addHook("afterViewportColumnCalculatorOverride",(function(){return t.onAfterViewportColumnCalculatorOverride.apply(t,arguments)})),uw(hw(l.prototype),"enablePlugin",this).call(this),this.updatePlugin()}}},{key:"updatePlugin",value:function(){var t=this;if(this.hot.view){var e=this.hot.getSettings().nestedHeaders;vw(this,ww).setColumnsLimit(this.hot.countCols()),Array.isArray(e)&&(this.detectedOverlappedHeaders=vw(this,ww).setState(e)),this.detectedOverlappedHeaders&&Object(kr.b)(Object(ui.a)(rw||(rw=aw(["Your Nested Headers plugin setup contains overlapping headers. This kind of configuration \n                        is currently not supported."],["Your Nested Headers plugin setup contains overlapping headers. This kind of configuration\\x20\n                        is currently not supported."])))),this.enabled&&this.hot.columnIndexMapper.hidingMapsCollection.getMergedValues().forEach((function(e,n){var r=!0===e?"hide-column":"show-column";vw(t,ww).triggerColumnModification(r,n)})),!vw(this,Ow)&&this.enabled&&gw(this,Ow,this.hot.columnIndexMapper.createChangesObserver("hiding").subscribe((function(e){e.forEach((function(e){var n=e.op,r=e.index,o=e.newValue;if("replace"===n){var l=!0===o?"hide-column":"show-column";vw(t,ww).triggerColumnModification(l,r)}})),t.ghostTable.buildWidthsMap()}))),this.ghostTable.setLayersCount(this.getLayersCount()).buildWidthsMap(),uw(hw(l.prototype),"updatePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){this.clearColspans(),vw(this,ww).clear(),vw(this,Ow).unsubscribe(),gw(this,Ow,null),this.ghostTable.clear(),uw(hw(l.prototype),"disablePlugin",this).call(this)}},{key:"getStateManager",value:function(){return vw(this,ww)}},{key:"getLayersCount",value:function(){return vw(this,ww).getLayersCount()}},{key:"getHeaderSettings",value:function(t,e){return vw(this,ww).getHeaderSettings(t,e)}},{key:"clearColspans",value:function(){if(this.hot.view)for(var t=this.hot.view._wt,e=t.getSetting("columnHeaders").length,n=t.wtTable.THEAD,r=t.wtOverlays.topOverlay.clone.wtTable.THEAD,o=t.wtOverlays.topInlineStartCornerOverlay?t.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null,i=0;i<e;i++){var l=n.childNodes[i];if(!l)break;for(var f=r.childNodes[i],h=o?o.childNodes[i]:null,d=0,y=l.childNodes.length;d<y;d++)l.childNodes[d].removeAttribute("colspan"),Object(c.removeClass)(l.childNodes[d],"hiddenHeader"),f&&f.childNodes[d]&&(f.childNodes[d].removeAttribute("colspan"),Object(c.removeClass)(f.childNodes[d],"hiddenHeader")),o&&h&&h.childNodes[d]&&(h.childNodes[d].removeAttribute("colspan"),Object(c.removeClass)(h.childNodes[d],"hiddenHeader"))}}},{key:"headerRendererFactory",value:function(t){var e=this,n=this.hot.view._wt.getSetting("fixedColumnsStart");return function(r,o){var l,f=e.hot,h=f.columnIndexMapper,view=f.view,d=h.getVisualFromRenderableIndex(r);null===d&&(d=r),o.removeAttribute("colspan"),Object(c.removeClass)(o,"hiddenHeader");var y=null!==(l=vw(e,ww).getHeaderSettings(t,d))&&void 0!==l?l:{label:""},v=y.colspan,m=y.isHidden;if(y.isPlaceholder||m)Object(c.addClass)(o,"hiddenHeader");else if(v>1){var w,O,C=view._wt.wtOverlays,S=null===(w=C.topInlineStartCornerOverlay)||void 0===w?void 0:w.clone.wtTable.THEAD.contains(o),k=null===(O=C.inlineStartOverlay)||void 0===O?void 0:O.clone.wtTable.THEAD.contains(o),j=S||k?Math.min(v,n-r):v;j>1&&o.setAttribute("colspan",j)}e.hot.view.appendColHeader(d,o,(function(){return e.getColumnHeaderValue.apply(e,arguments)}),t)}}},{key:"getColumnHeaderValue",value:function(t,e){var n,r=null!==(n=vw(this,ww).getHeaderSettings(e,t))&&void 0!==n?n:{},o=r.isHidden;return r.isPlaceholder||o?"":this.hot.getColHeader(t,e)}},{key:"onBeforeHighlightingColumnHeader",value:function(t,e,n){var r=vw(this,ww).getHeaderTreeNodeData(e,t);if(!r)return t;var o=n.classNames,l=n.columnCursor,c=n.selectionType,f=n.selectionWidth,h=vw(this,ww).getHeaderSettings(e,t),d=h.isRoot,y=h.colspan;if(c===_b.f){if(!d)return r.columnIndex}else c===_b.a&&(y>f-l||!d)&&(o.length=0);return t}},{key:"onBeforeCopy",value:function(data,t,e){if(0!==e.columnHeadersCount)for(var n=0;n<t.length;n++){var r=t[n],o=r.startRow,l=r.startCol,c=r.endRow,f=r.endCol,h=c-o+1;if(o>=0||1==l-f+1)break;for(var d=l;d<=f;d++)for(var y=o;y<=c;y++){var v,m=h+y,w=d-l;0!==w&&!1===(null===(v=vw(this,ww).getHeaderTreeNodeData(y,d))||void 0===v?void 0:v.isRoot)&&(data[m][w]="")}}}},{key:"onBeforeOnCellMouseDown",value:function(t,e,n,r){this._getHeaderTreeNodeDataByCoords(e)&&(r.column=!0)}},{key:"onAfterOnCellMouseDown",value:function(t,e){var n=this._getHeaderTreeNodeDataByCoords(e);if(n){var r=this.hot.selection,o=r.isSelected()?r.getSelectedRange().current():null,l=[],c=n.columnIndex,h=n.origColspan,d=!r.inInSelection(e);t.shiftKey&&o?e.col<o.from.col?l.push(o.getTopEndCorner().col,c,e.row):e.col>o.from.col?l.push(o.getTopStartCorner().col,c+h-1,e.row):l.push(c,c+h-1,e.row):(Object(f.isLeftClick)(t)||Object(f.isRightClick)(t)&&d)&&l.push(c,c+h-1,e.row),r.selectColumns.apply(r,l)}}},{key:"onBeforeOnCellMouseOver",value:function(t,e,n,r){var o;if(this.hot.view.isMouseDown()){var l=this._getHeaderTreeNodeDataByCoords(e);if(l){var c=l.columnIndex,f=l.origColspan,h=this.hot.getSelectedRangeLast(),d=h.getTopStartCorner(),y=h.getBottomEndCorner(),v=h.from;r.column=!0,r.cell=!0;var m=[];e.col<v.col?m.push(y.col,c):e.col>v.col?m.push(d.col,c+f-1):m.push(c,c+f-1),(o=this.hot).selectColumns.apply(o,m)}}}},{key:"onAfterGetColumnHeaderRenderers",value:function(t){t.length=0;for(var e=0;e<vw(this,ww).getLayersCount();e++)t.push(this.headerRendererFactory(e))}},{key:"onAfterViewportColumnCalculatorOverride",value:function(t){for(var e=vw(this,ww).getLayersCount(),n=t.startColumn,r=!!e,o=0;o<e;o++){var l=vw(this,ww).findLeftMostColumnIndex(o,t.startColumn),c=this.hot.columnIndexMapper.getRenderableFromVisualIndex(l);if(l>=0&&(r=!1),Object(ie.isNumeric)(c)&&c<t.startColumn){n=c;break}}t.startColumn=r?vw(this,ww).getHeaderTreeNodeData(0,n).columnIndex:n}},{key:"onModifyColWidth",value:function(t,e){var n=this.ghostTable.getWidth(e);return t>n?t:n}},{key:"onModifyColumnHeaderValue",value:function(t,e,n){var r;return(null!==(r=vw(this,ww).getHeaderTreeNodeData(n,e))&&void 0!==r?r:{label:""}).label}},{key:"onInit",value:function(){this.updatePlugin()}},{key:"onAfterLoadData",value:function(t,e){e||this.updatePlugin()}},{key:"destroy",value:function(){gw(this,ww,null),null!==vw(this,Ow)&&(vw(this,Ow).unsubscribe(),gw(this,Ow,null)),uw(hw(l.prototype),"destroy",this).call(this)}},{key:"_getHeaderTreeNodeDataByCoords",value:function(t){if(!(t.row>=0||t.col<0))return vw(this,ww).getHeaderTreeNodeData(t.row,t.col)}}],r=[{key:"PLUGIN_KEY",get:function(){return mw}},{key:"PLUGIN_PRIORITY",get:function(){return 280}}],n&&lw(e.prototype,n),r&&lw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function Sw(t){return function(t){if(Array.isArray(t))return kw(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return kw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kw(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kw(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function jw(t){return jw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jw(t)}function Rw(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ew(n.key),n)}}function Ew(t){var e=function(input,t){if("object"!==jw(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==jw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===jw(e)?e:String(e)}var Pw=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hot=n,this.data=null,this.plugin=e,this.parentReference=new WeakMap,this.cache={levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap}}var e,n,r;return e=t,n=[{key:"setData",value:function(data){this.data=data}},{key:"getData",value:function(){return this.data}},{key:"getRawSourceData",value:function(){var t;return this.plugin.disableCoreAPIModifiers(),t=this.hot.getSourceData(),this.plugin.enableCoreAPIModifiers(),t}},{key:"updateWithData",value:function(data){this.setData(data),this.rewriteCache()}},{key:"rewriteCache",value:function(){var t=this;this.cache={levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap},Object(ie.rangeEach)(0,this.data.length-1,(function(i){t.cacheNode(t.data[i],0,null)}))}},{key:"cacheNode",value:function(t,e,n){var r=this;this.cache.levels[e]||(this.cache.levels[e]=[],this.cache.levelCount+=1),this.cache.levels[e].push(t),this.cache.rows.push(t),this.cache.nodeInfo.set(t,{parent:n,row:this.cache.rows.length-1,level:e}),this.hasChildren(t)&&Object(j.arrayEach)(t.__children,(function(n){r.cacheNode(n,e+1,t)}))}},{key:"getDataObject",value:function(t){return null==t?null:this.cache.rows[t]}},{key:"readTreeNodes",value:function(t,e,n,r){var o=this,l=!1,c=e;if(isNaN(c)&&c.end)return c;var f=t;return f||(f={__children:this.data},l=!0,c-=1),null!=n&&c===n?{result:f,end:!0}:null!=r&&f===r?{result:c,end:!0}:(c+=1,f.__children&&Object(j.arrayEach)(f.__children,(function(t){if(o.parentReference.set(t,l?null:f),c=o.readTreeNodes(t,c,n,r),isNaN(c)&&c.end)return!1})),c)}},{key:"mockParent",value:function(){var t=this.mockNode();return t.__children=this.data,t}},{key:"mockNode",value:function(){var t={};return Object(h.objectEach)(this.data[0],(function(e,n){t[n]=null})),t}},{key:"getRowIndex",value:function(t){return null==t?null:this.cache.nodeInfo.get(t).row}},{key:"getRowIndexWithinParent",value:function(t){var e=null;e=isNaN(t)?t:this.getDataObject(t);var n=this.getRowParent(t);return null==n?this.data.indexOf(e):n.__children.indexOf(e)}},{key:"countAllRows",value:function(){var t={__children:this.data};return this.countChildren(t)}},{key:"countChildren",value:function(t){var e=this,n=0,r=t;return isNaN(r)||(r=this.getDataObject(r)),r&&r.__children?(Object(j.arrayEach)(r.__children,(function(t){n+=1,t.__children&&(n+=e.countChildren(t))})),n):0}},{key:"getRowParent",value:function(t){var e;return e=isNaN(t)?t:this.getDataObject(t),this.getRowObjectParent(e)}},{key:"getRowObjectParent",value:function(t){return t&&"object"===jw(t)?this.cache.nodeInfo.get(t).parent:null}},{key:"getRowLevel",value:function(t){var e=null;return(e=isNaN(t)?t:this.getDataObject(t))?this.getRowObjectLevel(e):null}},{key:"getRowObjectLevel",value:function(t){return null==t?null:this.cache.nodeInfo.get(t).level}},{key:"hasChildren",value:function(t){var e=t;return isNaN(e)||(e=this.getDataObject(e)),!(!e.__children||!e.__children.length)}},{key:"isChild",value:function(t){return null!==this.getRowParent(t)}},{key:"getChild",value:function(t,e){var n;return(null===(n=t.__children)||void 0===n?void 0:n[e])||null}},{key:"isRowHighestLevel",value:function(t){return!this.isChild(t)}},{key:"isParent",value:function(t){var e,n=t;return isNaN(n)||(n=this.getDataObject(n)),n&&!!n.__children&&0!==(null===(e=n.__children)||void 0===e?void 0:e.length)}},{key:"addChild",value:function(t,element){var e=element;this.hot.runHooks("beforeAddChild",t,e);var n=null;t&&(n=this.getRowIndex(t)),this.hot.runHooks("beforeCreateRow",n+this.countChildren(t)+1,1);var r=t;t||(r=this.mockParent()),r.__children||(r.__children=[]),e||(e=this.mockNode()),r.__children.push(e),this.rewriteCache();var o=this.getRowIndex(e);this.hot.rowIndexMapper.insertIndexes(o,1),this.hot.runHooks("afterCreateRow",o,1),this.hot.runHooks("afterAddChild",t,e)}},{key:"addChildAtIndex",value:function(t,e,element){var n,r=element;if(r||(r=this.mockNode()),this.hot.runHooks("beforeAddChild",t,r,e),t){var o=this.getRowIndex(t)+e+1;this.hot.runHooks("beforeCreateRow",o,1),t.__children.splice(e,null,r),this.rewriteCache(),this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndexWithinParent(t),"__children",t.__children,"NestedRows.addChildAtIndex"),this.hot.rowIndexMapper.insertIndexes(o,1),this.plugin.enableCoreAPIModifiers(),this.hot.runHooks("afterCreateRow",o,1),n=o}else this.plugin.disableCoreAPIModifiers(),this.hot.alter("insert_row_above",e,1,"NestedRows.addChildAtIndex"),this.plugin.enableCoreAPIModifiers(),n=this.getRowIndex(this.data[e]);r=this.getDataObject(n),this.hot.runHooks("afterAddChild",t,r,e)}},{key:"addSibling",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"below",n=this.translateTrimmedRow(t),r=this.getRowParent(n),o=this.getRowIndexWithinParent(n);switch(e){case"below":this.addChildAtIndex(r,o+1,null);break;case"above":this.addChildAtIndex(r,o,null)}}},{key:"detachFromParent",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],element=null,r=[];Array.isArray(t)?(Object(ie.rangeEach)(t[0],t[2],(function(i){var t=e.translateTrimmedRow(i);r.push(e.getDataObject(t))})),Object(ie.rangeEach)(0,r.length-2,(function(i){e.detachFromParent(r[i],!1)})),element=r[r.length-1]):element=t;var o=this.getRowIndex(element),l=this.countChildren(element),c=this.getRowIndexWithinParent(element),f=this.getRowParent(element),h=this.getRowParent(f),d=this.getRowIndex(h),y=null;if(this.hot.runHooks("beforeDetachChild",f,element),null!=c){var v=Array.from(new Array(o+l+1).keys()).splice(-1*(l+1));if(this.hot.runHooks("beforeRemoveRow",o,l+1,v,this.plugin.pluginName),f.__children.splice(c,1),this.rewriteCache(),this.hot.runHooks("afterRemoveRow",o,l+1,v,this.plugin.pluginName),h){y=d+this.countChildren(h);var m=this.getChild(h,this.countChildren(h)-1),w=this.getRowIndex(m);this.hot.runHooks("beforeCreateRow",w+1,l+1,this.plugin.pluginName),h.__children.push(element)}else y=this.hot.countRows()+1,this.hot.runHooks("beforeCreateRow",y-2,l+1,this.plugin.pluginName),this.data.push(element)}this.rewriteCache(),this.hot.runHooks("afterCreateRow",y-2,l+1,this.plugin.pluginName),this.hot.runHooks("afterDetachChild",f,element,this.getRowIndex(element)),n&&this.hot.render()}},{key:"filterData",value:function(t,e,n){var r=this,o=[];Object(j.arrayEach)(n,(function(t){o.push(r.getDataObject(t))})),Object(j.arrayEach)(o,(function(t){var e=r.getRowIndexWithinParent(t),n=r.getRowParent(t);null===n?r.data.splice(e,1):n.__children.splice(e,1)})),this.rewriteCache()}},{key:"spliceData",value:function(t,e,n){var r,o=this.getDataObject(t-1),l=null,c=t;if(o&&o.__children&&0===o.__children.length?(l=o,c=0):t<this.countAllRows()&&(l=this.getRowParent(t),c=this.getRowIndexWithinParent(t)),l)n?(r=l.__children).splice.apply(r,[c,e].concat(Sw(n))):l.__children.splice(c,e);else if(n){var f;(f=this.data).splice.apply(f,[c,e].concat(Sw(n)))}else this.data.splice(c,e);this.rewriteCache()}},{key:"syncRowWithRawSource",value:function(t){var e=t,n=null;do{null!==(n=this.getRowParent(n))&&(e=n)}while(null!==n);this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndex(e),"__children",e.__children,"NestedRows.syncRowWithRawSource"),this.plugin.enableCoreAPIModifiers()}},{key:"moveRow",value:function(t,e,n,r){var o=e===this.hot.countRows(),l=this.getRowParent(t),c=this.getRowIndexWithinParent(t),f=l.__children.slice(c,c+1),h=t>e,d=o?this.getRowParent(e-1):this.getRowParent(e);null==d&&(d=this.getRowParent(e-1)),null==d&&(d=this.getDataObject(e-1)),d?d.__children||(d.__children=[]):(d=this.getDataObject(e)).__children=[];var y=o||n||r?d.__children.length:this.getRowIndexWithinParent(e),v=l===d;d.__children.splice(y,0,f[0]),l.__children.splice(c+(h&&v?1:0),1),this.syncRowWithRawSource(l),v||this.syncRowWithRawSource(d)}},{key:"translateTrimmedRow",value:function(t){return this.plugin.collapsingUI?this.plugin.collapsingUI.translateTrimmedRow(t):t}},{key:"untranslateTrimmedRow",value:function(t){return this.plugin.collapsingUI?this.plugin.collapsingUI.untranslateTrimmedRow(t):t}}],n&&Rw(e.prototype,n),r&&Rw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Mw=Pw;function _w(t){return _w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_w(t)}function Tw(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Iw(n.key),n)}}function Aw(t,e,n){return e&&Tw(t.prototype,e),n&&Tw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Iw(t){var e=function(input,t){if("object"!==_w(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==_w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===_w(e)?e:String(e)}var xw=Aw((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hot=n,this.plugin=e}));function Dw(t){return Dw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dw(t)}function Nw(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hw(n.key),n)}}function Hw(t){var e=function(input,t){if("object"!==Dw(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Dw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Dw(e)?e:String(e)}function Lw(t,p){return Lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Lw(t,p)}function Bw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Uw(t);if(e){var o=Uw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Dw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Uw(t){return Uw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Uw(t)}var Fw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lw(t,e)}(l,t);var e,n,r,o=Bw(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=o.call(this,t,e)).dataManager=n.plugin.dataManager,n.collapsingUI=n.plugin.collapsingUI,n.rowHeaderWidthCache=null,n}return e=l,r=[{key:"CSS_CLASSES",get:function(){return{indicatorContainer:"ht_nestingLevels",parent:"ht_nestingParent",indicator:"ht_nestingLevel",emptyIndicator:"ht_nestingLevel_empty",button:"ht_nestingButton",expandButton:"ht_nestingExpand",collapseButton:"ht_nestingCollapse"}}}],(n=[{key:"appendLevelIndicators",value:function(t,e){var n=this.hot.toPhysicalRow(t),r=this.dataManager.getRowLevel(n),o=this.dataManager.getDataObject(n),f=e.getElementsByTagName("DIV")[0],h=f.querySelector("span.rowHeader"),d=f.querySelectorAll('[class^="ht_nesting"]');if(Object(j.arrayEach)(d,(function(t){t&&f.removeChild(t)})),Object(c.addClass)(e,l.CSS_CLASSES.indicatorContainer),r){var y=this.hot.rootDocument,v=h.cloneNode(!0);f.innerHTML="",Object(ie.rangeEach)(0,r-1,(function(){var t=y.createElement("SPAN");Object(c.addClass)(t,l.CSS_CLASSES.emptyIndicator),f.appendChild(t)})),f.appendChild(v)}if(this.dataManager.hasChildren(o)){var m=this.hot.rootDocument.createElement("DIV");Object(c.addClass)(e,l.CSS_CLASSES.parent),this.collapsingUI.areChildrenCollapsed(n)?Object(c.addClass)(m,"".concat(l.CSS_CLASSES.button," ").concat(l.CSS_CLASSES.expandButton)):Object(c.addClass)(m,"".concat(l.CSS_CLASSES.button," ").concat(l.CSS_CLASSES.collapseButton)),f.appendChild(m)}}},{key:"updateRowHeaderWidth",value:function(t){var e=t;e||(e=this.dataManager.cache.levelCount),this.rowHeaderWidthCache=Math.max(50,11+10*e+25),this.hot.render()}}])&&Nw(e.prototype,n),r&&Nw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(xw);function Vw(t){return Vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vw(t)}function Ww(t){return function(t){if(Array.isArray(t))return zw(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return zw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zw(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zw(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Yw(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gw(n.key),n)}}function Gw(t){var e=function(input,t){if("object"!==Vw(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Vw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Vw(e)?e:String(e)}function Kw(t,p){return Kw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},Kw(t,p)}function Xw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$w(t);if(e){var o=$w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Vw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function $w(t){return $w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$w(t)}var qw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kw(t,e)}(l,t);var e,n,r,o=Xw(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=o.call(this,t,e)).dataManager=n.plugin.dataManager,n.collapsedRows=[],n.collapsedRowsStash={stash:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.lastCollapsedRows=n.collapsedRows.slice(0),n.expandMultipleChildren(n.lastCollapsedRows,t)},shiftStash:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;null==e&&(e=1/0),Object(j.arrayEach)(n.lastCollapsedRows,(function(o,i){o>=t&&o<e&&(n.lastCollapsedRows[i]=o+r)}))},applyStash:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.collapseMultipleChildren(n.lastCollapsedRows,t),n.lastCollapsedRows=void 0},trimStash:function(t,e){Object(ie.rangeEach)(t,t+e-1,(function(i){var t=n.lastCollapsedRows.indexOf(i);t>-1&&n.lastCollapsedRows.splice(t,1)}))}},n}return e=l,n=[{key:"collapseChildren",value:function(t){var e,n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=[],c=null,f=null;return isNaN(t)?(c=t,f=this.dataManager.getRowIndex(c)):(c=this.dataManager.getDataObject(t),f=t),this.dataManager.hasChildren(c)&&Object(j.arrayEach)(c.__children,(function(t){l.push(n.dataManager.getRowIndex(t))})),e=this.collapseRows(l,!0,!1),o&&this.trimRows(e),r&&this.renderAndAdjust(),-1===this.collapsedRows.indexOf(f)&&this.collapsedRows.push(f),e}},{key:"collapseMultipleChildren",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=[];Object(j.arrayEach)(t,(function(t){o.push.apply(o,Ww(e.collapseChildren(t,!1,!1)))})),r&&this.trimRows(o),n&&this.renderAndAdjust()}},{key:"collapseRow",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.collapseRows([t],e)}},{key:"collapseRows",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[];return Object(j.arrayEach)(t,(function(t){o.push(t),n&&e.collapseChildRows(t,o)})),r&&this.trimRows(o),o}},{key:"collapseChildRows",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.dataManager.hasChildren(t)){var o=this.dataManager.getDataObject(t);Object(j.arrayEach)(o.__children,(function(t){var r=e.dataManager.getRowIndex(t);n.push(r),e.collapseChildRows(r,n)}))}r&&this.trimRows(n)}},{key:"expandRow",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.expandRows([t],e)}},{key:"expandRows",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[];return Object(j.arrayEach)(t,(function(t){o.push(t),n&&e.expandChildRows(t,o)})),r&&this.untrimRows(o),o}},{key:"expandChildRows",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.dataManager.hasChildren(t)){var o=this.dataManager.getDataObject(t);Object(j.arrayEach)(o.__children,(function(t){if(!e.isAnyParentCollapsed(t)){var r=e.dataManager.getRowIndex(t);n.push(r),e.expandChildRows(r,n)}}))}r&&this.untrimRows(n)}},{key:"expandChildren",value:function(t){var e,n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=[],c=null,f=null;return isNaN(t)?(c=t,f=this.dataManager.getRowIndex(t)):(c=this.dataManager.getDataObject(t),f=t),this.collapsedRows.splice(this.collapsedRows.indexOf(f),1),this.dataManager.hasChildren(c)&&Object(j.arrayEach)(c.__children,(function(t){var e=n.dataManager.getRowIndex(t);l.push(e)})),e=this.expandRows(l,!0,!1),o&&this.untrimRows(e),r&&this.renderAndAdjust(),e}},{key:"expandMultipleChildren",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=[];Object(j.arrayEach)(t,(function(t){o.push.apply(o,Ww(e.expandChildren(t,!1,!1)))})),r&&this.untrimRows(o),n&&this.renderAndAdjust()}},{key:"collapseAll",value:function(){var t=this,data=this.dataManager.getData(),e=[];Object(j.arrayEach)(data,(function(n){t.dataManager.hasChildren(n)&&e.push(n)})),this.collapseMultipleChildren(e),this.renderAndAdjust()}},{key:"expandAll",value:function(){var t=this,data=this.dataManager.getData(),e=[];Object(j.arrayEach)(data,(function(n){t.dataManager.hasChildren(n)&&e.push(n)})),this.expandMultipleChildren(e),this.renderAndAdjust()}},{key:"trimRows",value:function(t){var e=this;this.hot.batchExecution((function(){Object(j.arrayEach)(t,(function(t){e.plugin.collapsedRowsMap.setValueAtIndex(t,!0)}))}),!0)}},{key:"untrimRows",value:function(t){var e=this;this.hot.batchExecution((function(){Object(j.arrayEach)(t,(function(t){e.plugin.collapsedRowsMap.setValueAtIndex(t,!1)}))}),!0)}},{key:"areChildrenCollapsed",value:function(t){var e=this,n=isNaN(t)?t:this.dataManager.getDataObject(t),r=!0;return null===n&&(n={__children:this.dataManager.data}),this.dataManager.hasChildren(n)&&Object(j.arrayEach)(n.__children,(function(t){var n=e.dataManager.getRowIndex(t);if(!e.plugin.collapsedRowsMap.getValueAtIndex(n))return r=!1,!1})),r}},{key:"isAnyParentCollapsed",value:function(t){for(var e=t;null!==e;){e=this.dataManager.getRowParent(e);var n=this.dataManager.getRowIndex(e);if(this.collapsedRows.indexOf(n)>-1)return!0}return!1}},{key:"toggleState",value:function(t,e){if(!(e.col>=0)){var n=this.translateTrimmedRow(e.row);Object(c.hasClass)(t.target,Fw.CSS_CLASSES.button)&&(this.areChildrenCollapsed(n)?this.expandChildren(n):this.collapseChildren(n),Object(f.stopImmediatePropagation)(t))}}},{key:"translateTrimmedRow",value:function(t){return this.hot.toPhysicalRow(t)}},{key:"untranslateTrimmedRow",value:function(t){return this.hot.toVisualRow(t)}},{key:"renderAndAdjust",value:function(){this.hot.render(),this.hot.view.adjustElementsSize()}}],n&&Yw(e.prototype,n),r&&Yw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(xw),Zw=qw;function Jw(t){return Jw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jw(t)}function Qw(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tO(n.key),n)}}function tO(t){var e=function(input,t){if("object"!==Jw(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==Jw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===Jw(e)?e:String(e)}function eO(t,p){return eO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},eO(t,p)}function nO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=oO(t);if(e){var o=oO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Jw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return rO(t)}(this,n)}}function rO(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oO(t){return oO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oO(t)}var iO,aO=new WeakMap,lO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eO(t,e)}(l,t);var e,n,r,o=nO(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),n=o.call(this,t,e),aO.set(rO(n),{row_above:function(t,e){var r=e[e.length-1];n.dataManager.addSibling(r.start.row,"above")},row_below:function(t,e){var r=e[e.length-1];n.dataManager.addSibling(r.start.row,"below")}}),n.dataManager=n.plugin.dataManager,n}return e=l,(n=[{key:"appendOptions",value:function(t){var e=this,n=[{key:"add_child",name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_NESTED_ROWS_INSERT_CHILD)},callback:function(){var t=e.dataManager.translateTrimmedRow(e.hot.getSelectedLast()[0]),n=e.dataManager.getDataObject(t);e.dataManager.addChild(n)},disabled:function(){var t=e.hot.getSelectedLast();return!t||t[0]<0||e.hot.selection.isSelectedByColumnHeader()||e.hot.countRows()>=e.hot.getSettings().maxRows}},{key:"detach_from_parent",name:function(){return this.getTranslatedPhrase(Bi.CONTEXTMENU_ITEMS_NESTED_ROWS_DETACH_CHILD)},callback:function(){e.dataManager.detachFromParent(e.hot.getSelectedLast())},disabled:function(){var t=e.hot.getSelectedLast(),n=e.dataManager.translateTrimmedRow(t[0]);return!e.dataManager.getRowParent(n)||!t||t[0]<0||e.hot.selection.isSelectedByColumnHeader()||e.hot.countRows()>=e.hot.getSettings().maxRows}},{name:"---------"}];return Object(ie.rangeEach)(0,t.items.length-1,(function(i){if(0===i)return Object(j.arrayEach)(n,(function(e,n){t.items.splice(i+n,0,e)})),!1})),this.modifyRowInsertingOptions(t)}},{key:"modifyRowInsertingOptions",value:function(t){var e=aO.get(this);return Object(ie.rangeEach)(0,t.items.length-1,(function(i){var option=e[t.items[i].key];null!=option&&(t.items[i].callback=option)})),t}}])&&Qw(e.prototype,n),r&&Qw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(xw);function uO(t){return uO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uO(t)}function sO(t){return function(t){if(Array.isArray(t))return cO(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return cO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cO(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cO(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function fO(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hO(n.key),n)}}function hO(t){var e=function(input,t){if("object"!==uO(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==uO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===uO(e)?e:String(e)}var dO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.plugin=e,this.hot=e.hot,this.dataManager=e.dataManager,this.collapsingUI=e.collapsingUI}var e,n,r;return e=t,(n=[{key:"onBeforeRowMove",value:function(t,e,n,r){var o=this;if(this.displayAPICompatibilityWarning({rows:t,finalIndex:e,dropIndex:n,movePossible:r}))return!1;this.movedToCollapsed=!1;var l=n===this.hot.countRows(),c=l?this.hot.countSourceRows():this.dataManager.translateTrimmedRow(n),f=!0,h=t.map((function(t){if(!f)return!1;var e=o.dataManager.translateTrimmedRow(t);return f=o.shouldAllowMoving(e,c),e})),d=-1===h.indexOf(c);if(!f||!d)return!1;var y=this.getBaseParent(h),v=this.getTargetParent(l,c),m=y===v;return this.movedToCollapsed=this.collapsingUI.areChildrenCollapsed(v),this.collapsingUI.collapsedRowsStash.stash(),this.shiftCollapsibleParentsLocations(h,c,m),this.moveRows(h,c,v),this.dataManager.rewriteCache(),this.moveCellsMeta(h,c),this.collapsingUI.collapsedRowsStash.applyStash(!1),this.hot.runHooks("afterRowMove",t,e,n,r,r&&this.isRowOrderChanged(t,e)),this.hot.render(),this.selectCells(t,n),!1}},{key:"displayAPICompatibilityWarning",value:function(t){var e,n,r=t.rows,o=t.finalIndex,l=t.dropIndex,c=t.movePossible,f=!1;return Object(R.isUndefined)(l)&&(Object(kr.b)(Object(ui.a)(iO||(e=["Since version 8.0.0 of the Handsontable the 'moveRows' method isn't used for moving rows \n      when the NestedRows plugin is enabled. Please use the 'dragRows' method instead."],(n=["Since version 8.0.0 of the Handsontable the 'moveRows' method isn't used for moving rows\\x20\n      when the NestedRows plugin is enabled. Please use the 'dragRows' method instead."])||(n=e.slice(0)),iO=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))))),this.hot.runHooks("afterRowMove",r,o,l,c,!1),f=!0),f}},{key:"shouldAllowMoving",value:function(t,e){return!(this.dataManager.isParent(t)||this.dataManager.isRowHighestLevel(t)||t===e||0===e)}},{key:"getBaseParent",value:function(t){return this.dataManager.getRowParent(t[0])}},{key:"getTargetParent",value:function(t,e){var n=this.dataManager.getRowParent(t?e-1:e);return null==n&&(n=this.dataManager.getRowParent(e-1)),n}},{key:"shiftCollapsibleParentsLocations",value:function(t,e,n){n||(Math.max.apply(Math,sO(t))<=e?this.collapsingUI.collapsedRowsStash.shiftStash(t[0],e,-1*t.length):this.collapsingUI.collapsedRowsStash.shiftStash(e,t[0],t.length))}},{key:"moveRows",value:function(t,e,n){var r=this,o=e===this.dataManager.getRowIndex(n)+this.dataManager.countChildren(n)+1;this.hot.batchRender((function(){t.forEach((function(t){r.dataManager.moveRow(t,e,r.movedToCollapsed,o)}))}))}},{key:"moveCellsMeta",value:function(t,e){var n,r=this,o=[],l=Math.max.apply(Math,sO(t))<e;t.forEach((function(t){o.push(r.hot.getCellMetaAtRow(t))})),this.hot.spliceCellsMeta(t[0],t.length),(n=this.hot).spliceCellsMeta.apply(n,[e-(l?o.length:0),0].concat(o))}},{key:"selectCells",value:function(t,e){var n,r=t.length,o=0,l=0,c=null;if(this.movedToCollapsed){var f=null;f=t[r-1]<e?this.dataManager.translateTrimmedRow(e-r):this.dataManager.translateTrimmedRow(e);var h=this.dataManager.getRowParent(null===f?this.hot.countSourceRows()-1:f-1),d=this.dataManager.getRowIndex(h);l=o=this.dataManager.untranslateTrimmedRow(d)}else t[r-1]<e?o=(l=e-1)-r+1:l=(o=e)+r-1;c=this.hot.selection,n=this.hot.countCols()-1,c.setRangeStart(this.hot._createCellCoords(o,0)),c.setRangeEnd(this.hot._createCellCoords(l,n),!0)}},{key:"isRowOrderChanged",value:function(t,e){return t.some((function(t,n){return t-n!==e}))}}])&&fO(e.prototype,n),r&&fO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pO(t){return pO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pO(t)}function yO(t){return function(t){if(Array.isArray(t))return gO(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return gO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gO(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gO(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function vO(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bO(n.key),n)}}function bO(t){var e=function(input,t){if("object"!==pO(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==pO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===pO(e)?e:String(e)}function mO(){return mO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=SO(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},mO.apply(this,arguments)}function wO(t,p){return wO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},wO(t,p)}function OO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=SO(t);if(e){var o=SO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===pO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return CO(t)}(this,n)}}function CO(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SO(t){return SO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},SO(t)}var kO="nestedRows",jO=new WeakMap,RO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wO(t,e)}(l,t);var e,n,r,o=OO(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).dataManager=null,e.headersUI=null,e.collapsedRowsMap=null,jO.set(CO(e),{movedToCollapsed:!1,skipRender:null,skipCoreAPIModifiers:!1}),e}return e=l,n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[kO]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.collapsedRowsMap=this.hot.rowIndexMapper.registerMap("nestedRows",new bd.a),this.dataManager=new Mw(this,this.hot),this.collapsingUI=new Zw(this,this.hot),this.headersUI=new Fw(this,this.hot),this.contextMenuUI=new lO(this,this.hot),this.rowMoveController=new dO(this),this.addHook("afterInit",(function(){return t.onAfterInit.apply(t,arguments)})),this.addHook("beforeViewRender",(function(){return t.onBeforeViewRender.apply(t,arguments)})),this.addHook("modifyRowData",(function(){return t.onModifyRowData.apply(t,arguments)})),this.addHook("modifySourceLength",(function(){return t.onModifySourceLength.apply(t,arguments)})),this.addHook("beforeDataSplice",(function(){return t.onBeforeDataSplice.apply(t,arguments)})),this.addHook("filterData",(function(){return t.onFilterData.apply(t,arguments)})),this.addHook("afterContextMenuDefaultOptions",(function(){return t.onAfterContextMenuDefaultOptions.apply(t,arguments)})),this.addHook("afterGetRowHeader",(function(){return t.onAfterGetRowHeader.apply(t,arguments)})),this.addHook("beforeOnCellMouseDown",(function(){return t.onBeforeOnCellMouseDown.apply(t,arguments)})),this.addHook("beforeRemoveRow",(function(){return t.onBeforeRemoveRow.apply(t,arguments)})),this.addHook("afterRemoveRow",(function(){return t.onAfterRemoveRow.apply(t,arguments)})),this.addHook("beforeAddChild",(function(){return t.onBeforeAddChild.apply(t,arguments)})),this.addHook("afterAddChild",(function(){return t.onAfterAddChild.apply(t,arguments)})),this.addHook("beforeDetachChild",(function(){return t.onBeforeDetachChild.apply(t,arguments)})),this.addHook("afterDetachChild",(function(){return t.onAfterDetachChild.apply(t,arguments)})),this.addHook("modifyRowHeaderWidth",(function(){return t.onModifyRowHeaderWidth.apply(t,arguments)})),this.addHook("afterCreateRow",(function(){return t.onAfterCreateRow.apply(t,arguments)})),this.addHook("beforeRowMove",(function(){return t.onBeforeRowMove.apply(t,arguments)})),this.addHook("beforeLoadData",(function(data){return t.onBeforeLoadData(data)})),this.addHook("beforeUpdateData",(function(data){return t.onBeforeLoadData(data)})),mO(SO(l.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.hot.rowIndexMapper.unregisterMap("nestedRows"),mO(SO(l.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin();var t=this.dataManager.getData();this.enablePlugin(),this.dataManager.updateWithData(t),mO(SO(l.prototype),"updatePlugin",this).call(this)}},{key:"onBeforeRowMove",value:function(t,e,n,r){return this.rowMoveController.onBeforeRowMove(t,e,n,r)}},{key:"disableCoreAPIModifiers",value:function(){jO.get(this).skipCoreAPIModifiers=!0}},{key:"enableCoreAPIModifiers",value:function(){jO.get(this).skipCoreAPIModifiers=!1}},{key:"onBeforeOnCellMouseDown",value:function(t,e,n){this.collapsingUI.toggleState(t,e,n)}},{key:"onModifyRowData",value:function(t){if(!jO.get(this).skipCoreAPIModifiers)return this.dataManager.getDataObject(t)}},{key:"onModifySourceLength",value:function(){if(!jO.get(this).skipCoreAPIModifiers)return this.dataManager.countAllRows()}},{key:"onBeforeDataSplice",value:function(t,e,element){return!(!jO.get(this).skipCoreAPIModifiers&&!this.dataManager.isRowHighestLevel(t)&&(this.dataManager.spliceData(t,e,element),1))}},{key:"onFilterData",value:function(t,e,n){var r=jO.get(this);return this.collapsingUI.collapsedRowsStash.stash(),this.collapsingUI.collapsedRowsStash.trimStash(n[0],e),this.collapsingUI.collapsedRowsStash.shiftStash(n[0],null,-1*e),this.dataManager.filterData(t,e,n),r.skipRender=!0,this.dataManager.getData().slice()}},{key:"onAfterContextMenuDefaultOptions",value:function(t){return this.contextMenuUI.appendOptions(t)}},{key:"onAfterGetRowHeader",value:function(t,e){this.headersUI.appendLevelIndicators(t,e)}},{key:"onModifyRowHeaderWidth",value:function(t){return this.headersUI.rowHeaderWidthCache||t}},{key:"onAfterRemoveRow",value:function(t,e,n,source){var r=this;if(source!==this.pluginName){var o=jO.get(this);setTimeout((function(){o.skipRender=null,r.headersUI.updateRowHeaderWidth(),r.collapsingUI.collapsedRowsStash.applyStash()}),0)}}},{key:"onBeforeRemoveRow",value:function(t,e,n){var r=this,o=Array.from(n.reduce((function(t,e){if(r.dataManager.isParent(e)){var n=r.dataManager.getDataObject(e).__children;return t.add(e),Array.isArray(n)&&n.forEach((function(e){return t.add(r.dataManager.getRowIndex(e))})),t}return t.add(e)}),new Set));n.length=0,n.push.apply(n,o)}},{key:"onBeforeAddChild",value:function(){this.collapsingUI.collapsedRowsStash.stash()}},{key:"onAfterAddChild",value:function(t,element){this.collapsingUI.collapsedRowsStash.shiftStash(this.dataManager.getRowIndex(element)),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}},{key:"onBeforeDetachChild",value:function(){this.collapsingUI.collapsedRowsStash.stash()}},{key:"onAfterDetachChild",value:function(t,element,e){this.collapsingUI.collapsedRowsStash.shiftStash(e,null,-1),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}},{key:"onAfterCreateRow",value:function(){this.dataManager.rewriteCache()}},{key:"onAfterInit",value:function(){var t=Math.max.apply(Math,yO(this.dataManager.cache.levels));t>0&&this.headersUI.updateRowHeaderWidth(t)}},{key:"onBeforeViewRender",value:function(t,e){jO.get(this).skipRender&&(e.skipRender=!0)}},{key:"destroy",value:function(){mO(SO(l.prototype),"destroy",this).call(this)}},{key:"onBeforeLoadData",value:function(data){if(!Object(rh.isArrayOfObjects)(data))return Object(kr.a)("The Nested Rows plugin requires an Array of Objects as a dataset to be provided. The plugin has been disabled."),this.hot.getSettings()[kO]=!1,void this.disablePlugin();this.dataManager.setData(data),this.dataManager.rewriteCache()}}],r=[{key:"PLUGIN_KEY",get:function(){return kO}},{key:"PLUGIN_PRIORITY",get:function(){return 300}}],n&&vO(e.prototype,n),r&&vO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function EO(t){return EO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},EO(t)}function PO(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MO(n.key),n)}}function MO(t){var e=function(input,t){if("object"!==EO(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==EO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===EO(e)?e:String(e)}var _O=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rootWindow=n,this.prefix=e,this.savedKeys=[],this.loadSavedKeys()}var e,n,r;return e=t,n=[{key:"saveValue",value:function(t,e){this.rootWindow.localStorage.setItem("".concat(this.prefix,"_").concat(t),JSON.stringify(e)),-1===this.savedKeys.indexOf(t)&&(this.savedKeys.push(t),this.saveSavedKeys())}},{key:"loadValue",value:function(t,e){var n=void 0===t?e:t,r=this.rootWindow.localStorage.getItem("".concat(this.prefix,"_").concat(n));return null===r?void 0:JSON.parse(r)}},{key:"reset",value:function(t){this.rootWindow.localStorage.removeItem("".concat(this.prefix,"_").concat(t))}},{key:"resetAll",value:function(){var t=this;Object(j.arrayEach)(this.savedKeys,(function(e,n){t.rootWindow.localStorage.removeItem("".concat(t.prefix,"_").concat(t.savedKeys[n]))})),this.clearSavedKeys()}},{key:"loadSavedKeys",value:function(){var t=this.rootWindow.localStorage.getItem("".concat(this.prefix,"__persistentStateKeys")),e="string"==typeof t?JSON.parse(t):void 0;this.savedKeys=e||[]}},{key:"saveSavedKeys",value:function(){this.rootWindow.localStorage.setItem("".concat(this.prefix,"__persistentStateKeys"),JSON.stringify(this.savedKeys))}},{key:"clearSavedKeys",value:function(){this.savedKeys.length=0,this.saveSavedKeys()}}],n&&PO(e.prototype,n),r&&PO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),TO=_O;function AO(t){return AO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AO(t)}function IO(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xO(n.key),n)}}function xO(t){var e=function(input,t){if("object"!==AO(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==AO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===AO(e)?e:String(e)}function DO(){return DO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=LO(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},DO.apply(this,arguments)}function NO(t,p){return NO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},NO(t,p)}function HO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=LO(t);if(e){var o=LO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===AO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function LO(t){return LO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},LO(t)}lt.a.getSingleton().register("persistentStateSave"),lt.a.getSingleton().register("persistentStateLoad"),lt.a.getSingleton().register("persistentStateReset");var BO="persistentState",UO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NO(t,e)}(l,t);var e,n,r,o=HO(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).storage=void 0,e}return e=l,n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[BO]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.storage||(this.storage=new TO(this.hot.rootElement.id,this.hot.rootWindow)),this.addHook("persistentStateSave",(function(e,n){return t.saveValue(e,n)})),this.addHook("persistentStateLoad",(function(e,n){return t.loadValue(e,n)})),this.addHook("persistentStateReset",(function(){return t.resetValue()})),DO(LO(l.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.storage=void 0,DO(LO(l.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),DO(LO(l.prototype),"updatePlugin",this).call(this)}},{key:"loadValue",value:function(t,e){e.value=this.storage.loadValue(t)}},{key:"saveValue",value:function(t,e){this.storage.saveValue(t,e)}},{key:"resetValue",value:function(t){void 0===t?this.storage.resetAll():this.storage.reset(t)}},{key:"destroy",value:function(){DO(LO(l.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return BO}},{key:"PLUGIN_PRIORITY",get:function(){return 0}}],n&&IO(e.prototype,n),r&&IO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function FO(t){return FO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FO(t)}function VO(t){return function(t){if(Array.isArray(t))return WO(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return WO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WO(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WO(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function zO(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YO(n.key),n)}}function YO(t){var e=function(input,t){if("object"!==FO(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==FO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===FO(e)?e:String(e)}function GO(){return GO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=$O(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},GO.apply(this,arguments)}function KO(t,p){return KO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},KO(t,p)}function XO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$O(t);if(e){var o=$O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===FO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function $O(t){return $O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$O(t)}var qO="search",ZO="htSearchResult",JO=function(t,e,col,data,n){t.getCellMeta(e,col).isSearchResult=n},QO=function(t,e,n){return!(Object(R.isUndefined)(t)||null===t||!t.toLocaleLowerCase||0===t.length)&&(!Object(R.isUndefined)(e)&&null!==e&&-1!==e.toString().toLocaleLowerCase(n.locale).indexOf(t.toLocaleLowerCase(n.locale)))},tC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KO(t,e)}(l,t);var e,n,r,o=XO(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).callback=JO,e.queryMethod=QO,e.searchResultClass=ZO,e}return e=l,n=[{key:"isEnabled",value:function(){return this.hot.getSettings()[qO]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[qO];this.updatePluginSettings(e),this.addHook("beforeRenderer",(function(){return t.onBeforeRenderer.apply(t,arguments)})),GO($O(l.prototype),"enablePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){var t=this,e=function(){return t.onBeforeRenderer.apply(t,arguments)};this.hot.addHook("beforeRenderer",e),this.hot.addHookOnce("afterViewRender",(function(){t.hot.removeHook("beforeRenderer",e)})),GO($O(l.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),GO($O(l.prototype),"updatePlugin",this).call(this)}},{key:"query",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCallback(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getQueryMethod(),o=this.hot.countRows(),l=this.hot.countCols(),c=[],f=this.hot;return Object(ie.rangeEach)(0,o-1,(function(o){Object(ie.rangeEach)(0,l-1,(function(l){var h=e.hot.getDataAtCell(o,l),d=e.hot.getCellMeta(o,l),y=d.search.callback||n,v=(d.search.queryMethod||r)(t,h,d);if(v){var m={row:o,col:l,data:h};c.push(m)}y&&y(f,o,l,h,v)}))})),c}},{key:"getCallback",value:function(){return this.callback}},{key:"setCallback",value:function(t){this.callback=t}},{key:"getQueryMethod",value:function(){return this.queryMethod}},{key:"setQueryMethod",value:function(t){this.queryMethod=t}},{key:"getSearchResultClass",value:function(){return this.searchResultClass}},{key:"setSearchResultClass",value:function(t){this.searchResultClass=t}},{key:"updatePluginSettings",value:function(t){Object(h.isObject)(t)&&(t.searchResultClass&&this.setSearchResultClass(t.searchResultClass),t.queryMethod&&this.setQueryMethod(t.queryMethod),t.callback&&this.setCallback(t.callback))}},{key:"onBeforeRenderer",value:function(t,e,col,n,r,o){var l,c=o.className||[],f=[];"string"==typeof c?f=c.split(" "):(l=f).push.apply(l,VO(c)),this.isEnabled()&&o.isSearchResult?f.includes(this.searchResultClass)||f.push("".concat(this.searchResultClass)):f.includes(this.searchResultClass)&&f.splice(f.indexOf(this.searchResultClass),1),o.className=f.join(" ")}},{key:"destroy",value:function(){GO($O(l.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return qO}},{key:"PLUGIN_PRIORITY",get:function(){return 190}}],n&&zO(e.prototype,n),r&&zO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function eC(t){return eC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eC(t)}function nC(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rC(n.key),n)}}function rC(t){var e=function(input,t){if("object"!==eC(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==eC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===eC(e)?e:String(e)}function oC(){return oC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=lC(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},oC.apply(this,arguments)}function iC(t,p){return iC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},iC(t,p)}function aC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lC(t);if(e){var o=lC(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===eC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function lC(t){return lC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lC(t)}var uC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iC(t,e)}(l,t);var e,n,r,o=aC(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).scrollbars=[],e.clones=[],e.lockedCollection=!1,e.freezeOverlays=!1,e}return e=l,r=[{key:"PLUGIN_KEY",get:function(){return"touchScroll"}},{key:"PLUGIN_PRIORITY",get:function(){return 200}},{key:"SETTING_KEYS",get:function(){return!0}}],(n=[{key:"isEnabled",value:function(){return Object(Fe.isTouchSupported)()}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("afterViewRender",(function(){return t.onAfterViewRender()})),this.registerEvents(),oC(lC(l.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.lockedCollection=!1,oC(lC(l.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){oC(lC(l.prototype),"disablePlugin",this).call(this)}},{key:"registerEvents",value:function(){var t=this;this.addHook("beforeTouchScroll",(function(){return t.onBeforeTouchScroll()})),this.addHook("afterMomentumScroll",(function(){return t.onAfterMomentumScroll()}))}},{key:"onAfterViewRender",value:function(){if(!this.lockedCollection){var t=this.hot.view._wt.wtOverlays,e=t.topOverlay,n=t.bottomOverlay,r=t.inlineStartOverlay,o=t.topInlineStartCornerOverlay,l=t.bottomInlineStartCornerOverlay;this.lockedCollection=!0,this.scrollbars.length=0,this.scrollbars.push(e),n.clone&&this.scrollbars.push(n),this.scrollbars.push(r),o&&this.scrollbars.push(o),l&&l.clone&&this.scrollbars.push(l),this.clones=[],e.needFullRender&&this.clones.push(e.clone.wtTable.holder.parentNode),n.needFullRender&&this.clones.push(n.clone.wtTable.holder.parentNode),r.needFullRender&&this.clones.push(r.clone.wtTable.holder.parentNode),o&&this.clones.push(o.clone.wtTable.holder.parentNode),l&&l.clone&&this.clones.push(l.clone.wtTable.holder.parentNode)}}},{key:"onBeforeTouchScroll",value:function(){this.freezeOverlays=!0,Object(j.arrayEach)(this.clones,(function(t){Object(c.addClass)(t,"hide-tween")}))}},{key:"onAfterMomentumScroll",value:function(){var t=this;this.freezeOverlays=!1,Object(j.arrayEach)(this.clones,(function(t){Object(c.removeClass)(t,"hide-tween"),Object(c.addClass)(t,"show-tween")})),this.hot._registerTimeout((function(){Object(j.arrayEach)(t.clones,(function(t){Object(c.removeClass)(t,"show-tween")}))}),400),Object(j.arrayEach)(this.scrollbars,(function(t){t.refresh(),t.resetFixedPosition()})),this.hot.view._wt.wtOverlays.syncScrollWithMaster()}}])&&nC(e.prototype,n),r&&nC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function sC(t){return sC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sC(t)}function cC(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fC(n.key),n)}}function fC(t){var e=function(input,t){if("object"!==sC(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==sC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===sC(e)?e:String(e)}function hC(){return hC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var base=function(object,t){for(;!Object.prototype.hasOwnProperty.call(object,t)&&null!==(object=yC(object)););return object}(t,e);if(base){var desc=Object.getOwnPropertyDescriptor(base,e);return desc.get?desc.get.call(arguments.length<3?t:n):desc.value}},hC.apply(this,arguments)}function dC(t,p){return dC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},dC(t,p)}function pC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yC(t);if(e){var o=yC(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===sC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function yC(t){return yC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yC(t)}var gC="trimRows",vC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dC(t,e)}(l,t);var e,n,r,o=pC(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).trimmedRowsMap=null,e}return e=l,n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[gC]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.trimmedRowsMap=this.hot.rowIndexMapper.registerMap("trimRows",new bd.a),this.trimmedRowsMap.addLocalHook("init",(function(){return t.onMapInit()})),hC(yC(l.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){var t=this,e=this.hot.getSettings()[gC];Array.isArray(e)&&this.hot.batchExecution((function(){t.trimmedRowsMap.clear(),Object(j.arrayEach)(e,(function(e){t.trimmedRowsMap.setValueAtIndex(e,!0)}))}),!0),hC(yC(l.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.hot.rowIndexMapper.unregisterMap("trimRows"),hC(yC(l.prototype),"disablePlugin",this).call(this)}},{key:"getTrimmedRows",value:function(){return this.trimmedRowsMap.getTrimmedIndexes()}},{key:"trimRows",value:function(t){var e=this,n=this.getTrimmedRows(),r=this.isValidConfig(t),o=n;r&&(o=Array.from(new Set(n.concat(t)))),!1!==this.hot.runHooks("beforeTrimRow",n,o,r)&&(r&&this.hot.batchExecution((function(){Object(j.arrayEach)(t,(function(t){e.trimmedRowsMap.setValueAtIndex(t,!0)}))}),!0),this.hot.runHooks("afterTrimRow",n,o,r,r&&o.length>n.length))}},{key:"trimRow",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.trimRows(e)}},{key:"untrimRows",value:function(t){var e=this.getTrimmedRows(),n=this.isValidConfig(t),r=e,o=this.trimmedRowsMap.getValues().slice(),l=t.length>0;n&&l&&(Object(j.arrayEach)(t,(function(t){o[t]=!1})),r=Object(j.arrayReduce)(o,(function(t,e,n){return e&&t.push(n),t}),[])),!1!==this.hot.runHooks("beforeUntrimRow",e,r,n&&l)&&(n&&l&&this.trimmedRowsMap.setValues(o),this.hot.runHooks("afterUntrimRow",e,r,n&&l,n&&r.length<e.length))}},{key:"untrimRow",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.untrimRows(e)}},{key:"isTrimmed",value:function(t){return this.trimmedRowsMap.getValueAtIndex(t)||!1}},{key:"untrimAll",value:function(){this.untrimRows(this.getTrimmedRows())}},{key:"isValidConfig",value:function(t){var e=this.hot.countSourceRows();return t.every((function(t){return Number.isInteger(t)&&t>=0&&t<e}))}},{key:"onMapInit",value:function(){var t=this,e=this.hot.getSettings()[gC];Array.isArray(e)&&this.hot.batchExecution((function(){Object(j.arrayEach)(e,(function(e){t.trimmedRowsMap.setValueAtIndex(e,!0)}))}),!0)}},{key:"destroy",value:function(){hC(yC(l.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return gC}},{key:"PLUGIN_PRIORITY",get:function(){return 330}}],n&&cC(e.prototype,n),r&&cC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(Be);function bC(t){return bC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bC(t)}function mC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wC(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CC(n.key),n)}}function OC(t,e,n){return e&&wC(t.prototype,e),n&&wC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function CC(t){var e=function(input,t){if("object"!==bC(input)||null===input)return input;var e=input[Symbol.toPrimitive];if(void 0!==e){var n=e.call(input,t||"default");if("object"!==bC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(input)}(t,"string");return"symbol"===bC(e)?e:String(e)}function SC(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kC(t,e)}function kC(t,p){return kC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,p){return t.__proto__=p,t},kC(t,p)}function jC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=RC(t);if(e){var o=RC(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===bC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function RC(t){return RC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},RC(t)}function EC(t){return function(t){if(Array.isArray(t))return _C(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||MC(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PC(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,o,l,c=[],f=!0,h=!1;try{if(o=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=o.call(e)).done)&&(c.push(n.value),c.length!==i);f=!0);}catch(t){h=!0,r=t}finally{try{if(!f&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(h)throw r}}return c}}(t,i)||MC(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MC(t,e){if(t){if("string"==typeof t)return _C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_C(t,e):void 0}}function _C(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var TC="undoRedo";function AC(t){var e=this;this.instance=t,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,this.enabled=!1,t.addHook("afterChange",(function(n,source){var r=this,o=n&&n.length;if(o&&n.find((function(t){var e=PC(t,4);return e[2]!==e[3]}))){e.done((function(){var e=n.reduce((function(t,e){return t.push(EC(e)),t}),[]);Object(j.arrayEach)(e,(function(e){e[1]=t.propToCol(e[1])}));var l=o>1?r.getSelected():[[e[0][0],e[0][1]]];return new AC.ChangeAction(e,l)}),source)}})),t.addHook("afterCreateRow",(function(t,n,source){e.done((function(){return new AC.CreateRowAction(t,n)}),source)})),t.addHook("beforeRemoveRow",(function(n,r,o,source){e.done((function(){var o=t.toPhysicalRow(n),l=Object(h.deepClone)(e.instance.getSourceData(o,0,o+r-1,e.instance.countSourceCols()-1));return new AC.RemoveRowAction(o,l,t.getSettings().fixedRowsBottom,t.getSettings().fixedRowsTop,t.rowIndexMapper.getIndexesSequence())}),source)})),t.addHook("afterCreateCol",(function(t,n,source){e.done((function(){return new AC.CreateColumnAction(t,n)}),source)})),t.addHook("beforeRemoveCol",(function(n,r,o,source){e.done((function(){var o=e.instance.getSourceDataArray(),l=(e.instance.countCols()+n)%e.instance.countCols(),c=[],f=[],h=[];Object(ie.rangeEach)(o.length-1,(function(i){var e=[],n=o[i];Object(ie.rangeEach)(l,l+(r-1),(function(r){e.push(n[t.toPhysicalColumn(r)])})),c.push(e)})),Object(ie.rangeEach)(r-1,(function(i){h.push(t.toPhysicalColumn(l+i))})),Array.isArray(t.getSettings().colHeaders)&&Object(ie.rangeEach)(r-1,(function(i){f.push(t.getSettings().colHeaders[t.toPhysicalColumn(l+i)]||null)}));var d=t.columnIndexMapper.getIndexesSequence(),y=t.rowIndexMapper.getIndexesSequence();return new AC.RemoveColumnAction(l,h,c,f,d,y,t.getSettings().fixedColumnsStart)}),source)})),t.addHook("beforeCellAlignment",(function(t,n,r,o){e.done((function(){return new AC.CellAlignmentAction(t,n,r,o)}))})),t.addHook("beforeFilter",(function(t){e.done((function(){return new AC.FiltersAction(t)}))})),t.addHook("beforeRowMove",(function(t,n){!1!==t&&e.done((function(){return new AC.RowMoveAction(t,n)}))})),t.addHook("beforeMergeCells",(function(n,r){r||e.done((function(){return new AC.MergeCellsAction(t,n)}))})),t.addHook("afterUnmergeCells",(function(n,r){r||e.done((function(){return new AC.UnmergeCellsAction(t,n)}))})),t.addHook("afterInit",(function(){e.init()}))}AC.prototype.done=function(t,source){if(!this.ignoreNewActions&&!("UndoRedo.undo"===source||"UndoRedo.redo"===source||"auto"===source)){var e=this.doneActions.slice();if(!1!==this.instance.runHooks("beforeUndoStackChange",e,source)){var n=t(),r=this.undoneActions.slice();this.doneActions.push(n),this.instance.runHooks("afterUndoStackChange",e,this.doneActions.slice()),this.instance.runHooks("beforeRedoStackChange",r),this.undoneActions.length=0,this.instance.runHooks("afterRedoStackChange",r,this.undoneActions.slice())}}},AC.prototype.undo=function(){if(this.isUndoAvailable()){var t=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",t);var e=this.doneActions.pop();this.instance.runHooks("afterUndoStackChange",t,this.doneActions.slice());var n=Object(h.deepClone)(e);if(!1===this.instance.runHooks("beforeUndo",n))return;this.ignoreNewActions=!0;var r=this,o=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",o),e.undo(this.instance,(function(){r.ignoreNewActions=!1,r.undoneActions.push(e)})),this.instance.runHooks("afterRedoStackChange",o,this.undoneActions.slice()),this.instance.runHooks("afterUndo",n)}},AC.prototype.redo=function(){if(this.isRedoAvailable()){var t=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",t);var e=this.undoneActions.pop();this.instance.runHooks("afterRedoStackChange",t,this.undoneActions.slice());var n=Object(h.deepClone)(e);if(!1===this.instance.runHooks("beforeRedo",n))return;this.ignoreNewActions=!0;var r=this,o=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",o),e.redo(this.instance,(function(){r.ignoreNewActions=!1,r.doneActions.push(e)})),this.instance.runHooks("afterUndoStackChange",o,this.doneActions.slice()),this.instance.runHooks("afterRedo",n)}},AC.prototype.isUndoAvailable=function(){return this.doneActions.length>0},AC.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},AC.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},AC.prototype.isEnabled=function(){return this.enabled},AC.prototype.enable=function(){if(!this.isEnabled()){var t,e=this.instance;this.enabled=!0,(t=e).undo=function(){return t.undoRedo.undo()},t.redo=function(){return t.undoRedo.redo()},t.isUndoAvailable=function(){return t.undoRedo.isUndoAvailable()},t.isRedoAvailable=function(){return t.undoRedo.isRedoAvailable()},t.clearUndo=function(){return t.undoRedo.clear()},this.registerShortcuts(),e.addHook("afterChange",DC)}},AC.prototype.disable=function(){if(this.isEnabled()){var t,e=this.instance;this.enabled=!1,delete(t=e).undo,delete t.redo,delete t.isUndoAvailable,delete t.isRedoAvailable,delete t.clearUndo,this.unregisterShortcuts(),e.removeHook("afterChange",DC)}},AC.prototype.destroy=function(){this.clear(),this.instance=null,this.doneActions=null,this.undoneActions=null},AC.Action=function(){},AC.Action.prototype.undo=function(){},AC.Action.prototype.redo=function(){},AC.ChangeAction=function(t,e){this.changes=t,this.selected=e,this.actionType="change"},Object(h.inherit)(AC.ChangeAction,AC.Action),AC.ChangeAction.prototype.undo=function(t,e){for(var data=Object(h.deepClone)(this.changes),n=t.countEmptyRows(!0),r=t.countEmptyCols(!0),i=0,o=data.length;i<o;i++)data[i].splice(3,1);t.addHookOnce("afterChange",e),t.setDataAtCell(data,null,null,"UndoRedo.undo");for(var l=0,c=data.length;l<c;l++){var f=PC(data[l],2),d=f[0],y=f[1];t.getSettings().minSpareRows&&d+1+t.getSettings().minSpareRows===t.countRows()&&n===t.getSettings().minSpareRows&&(t.alter("remove_row",parseInt(d+1,10),t.getSettings().minSpareRows),t.undoRedo.doneActions.pop()),t.getSettings().minSpareCols&&y+1+t.getSettings().minSpareCols===t.countCols()&&r===t.getSettings().minSpareCols&&(t.alter("remove_col",parseInt(y+1,10),t.getSettings().minSpareCols),t.undoRedo.doneActions.pop())}t.selectCells(this.selected,!1,!1)},AC.ChangeAction.prototype.redo=function(t,e){for(var data=Object(h.deepClone)(this.changes),i=0,n=data.length;i<n;i++)data[i].splice(2,1);t.addHookOnce("afterChange",e),t.setDataAtCell(data,null,null,"UndoRedo.redo"),this.selected&&t.selectCells(this.selected,!1,!1)},AC.CreateRowAction=function(t,e){this.index=t,this.amount=e,this.actionType="insert_row"},Object(h.inherit)(AC.CreateRowAction,AC.Action),AC.CreateRowAction.prototype.undo=function(t,e){var n=t.countRows(),r=t.getSettings().minSpareRows;this.index>=n&&this.index-r<n&&(this.index-=r),t.addHookOnce("afterRemoveRow",e),t.alter("remove_row",this.index,this.amount,"UndoRedo.undo")},AC.CreateRowAction.prototype.redo=function(t,e){t.addHookOnce("afterCreateRow",e),t.alter("insert_row_above",this.index,this.amount,"UndoRedo.redo")},AC.RemoveRowAction=function(t,data,e,n,r){this.index=t,this.data=data,this.actionType="remove_row",this.fixedRowsBottom=e,this.fixedRowsTop=n,this.rowIndexesSequence=r},Object(h.inherit)(AC.RemoveRowAction,AC.Action),AC.RemoveRowAction.prototype.undo=function(t,e){var n=this,r=t.getSettings(),o=[];r.fixedRowsBottom=this.fixedRowsBottom,r.fixedRowsTop=this.fixedRowsTop,this.data.forEach((function(t,e){Object.keys(t).forEach((function(r){var l=parseInt(r,10);o.push([n.index+e,isNaN(l)?r:l,t[r]])}))})),t.alter("insert_row_above",this.index,this.data.length,"UndoRedo.undo"),t.addHookOnce("afterViewRender",e),t.setSourceDataAtCell(o,null,null,"UndoRedo.undo"),t.rowIndexMapper.setIndexesSequence(this.rowIndexesSequence)},AC.RemoveRowAction.prototype.redo=function(t,e){t.addHookOnce("afterRemoveRow",e),t.alter("remove_row",this.index,this.data.length,"UndoRedo.redo")},AC.CreateColumnAction=function(t,e){this.index=t,this.amount=e,this.actionType="insert_col"},Object(h.inherit)(AC.CreateColumnAction,AC.Action),AC.CreateColumnAction.prototype.undo=function(t,e){t.addHookOnce("afterRemoveCol",e),t.alter("remove_col",this.index,this.amount,"UndoRedo.undo")},AC.CreateColumnAction.prototype.redo=function(t,e){t.addHookOnce("afterCreateCol",e),t.alter("insert_col_start",this.index,this.amount,"UndoRedo.redo")},AC.RemoveColumnAction=function(t,e,data,n,r,o,l){this.index=t,this.indexes=e,this.data=data,this.amount=this.data[0].length,this.headers=n,this.columnPositions=r.slice(0),this.rowPositions=o.slice(0),this.actionType="remove_col",this.fixedColumnsStart=l},Object(h.inherit)(AC.RemoveColumnAction,AC.Action),AC.RemoveColumnAction.prototype.undo=function(t,e){var n=this;t.getSettings().fixedColumnsStart=this.fixedColumnsStart;for(var r=this.indexes.slice(0).sort(),o=function(t,e,o){return o[n.indexes.indexOf(r[e])]},l=this.data.length,c=[],f=0;f<l;f++)c.push(Object(j.arrayMap)(this.data[f],o));var h=Object(j.arrayMap)(this.headers,o),d=[];t.alter("insert_col_start",this.indexes[0],this.indexes.length,"UndoRedo.undo"),Object(j.arrayEach)(t.getSourceDataArray(),(function(t,e){Object(j.arrayEach)(r,(function(n,r){t[n]=c[e][r],d.push([e,n,t[n]])}))})),t.setSourceDataAtCell(d,void 0,void 0,"UndoRedo.undo"),t.columnIndexMapper.insertIndexes(r[0],r.length),void 0!==this.headers&&Object(j.arrayEach)(h,(function(e,n){t.getSettings().colHeaders[r[n]]=e})),t.batchExecution((function(){t.rowIndexMapper.setIndexesSequence(n.rowPositions),t.columnIndexMapper.setIndexesSequence(n.columnPositions)}),!0),t.addHookOnce("afterViewRender",e),t.render()},AC.RemoveColumnAction.prototype.redo=function(t,e){t.addHookOnce("afterRemoveCol",e),t.alter("remove_col",this.index,this.amount,"UndoRedo.redo")},AC.CellAlignmentAction=function(t,e,n,r){this.stateBefore=t,this.range=e,this.type=n,this.alignment=r},AC.CellAlignmentAction.prototype.undo=function(t,e){var n=this;Object(j.arrayEach)(this.range,(function(e){e.forAll((function(e,col){e>=0&&col>=0&&t.setCellMeta(e,col,"className",n.stateBefore[e][col]||" htLeft")}))})),t.addHookOnce("afterViewRender",e),t.render()},AC.CellAlignmentAction.prototype.redo=function(t,e){Pi(this.range,this.type,this.alignment,(function(e,col){return t.getCellMeta(e,col)}),(function(e,col,n,r){return t.setCellMeta(e,col,n,r)})),t.addHookOnce("afterViewRender",e),t.render()},AC.FiltersAction=function(t){this.conditionsStack=t,this.actionType="filter"},Object(h.inherit)(AC.FiltersAction,AC.Action),AC.FiltersAction.prototype.undo=function(t,e){var n=t.getPlugin("filters");t.addHookOnce("afterViewRender",e),n.conditionCollection.importAllConditions(this.conditionsStack.slice(0,this.conditionsStack.length-1)),n.filter()},AC.FiltersAction.prototype.redo=function(t,e){var n=t.getPlugin("filters");t.addHookOnce("afterViewRender",e),n.conditionCollection.importAllConditions(this.conditionsStack),n.filter()};var IC=function(t){SC(n,t);var e=jC(n);function n(t,r){var o;mC(this,n),(o=e.call(this)).cellRange=r;var l=o.cellRange.getTopStartCorner(),c=o.cellRange.getBottomEndCorner();return o.rangeData=t.getData(l.row,l.col,c.row,c.col),o}return OC(n,[{key:"undo",value:function(t,e){var n=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),n.unmergeRange(this.cellRange,!0);var r=this.cellRange.getTopStartCorner();t.populateFromArray(r.row,r.col,this.rangeData,void 0,void 0,"MergeCells")}},{key:"redo",value:function(t,e){var n=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),n.mergeRange(this.cellRange)}}]),n}(AC.Action);AC.MergeCellsAction=IC;var xC=function(t){SC(n,t);var e=jC(n);function n(t,r){var o;return mC(this,n),(o=e.call(this)).cellRange=r,o}return OC(n,[{key:"undo",value:function(t,e){var n=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),n.mergeRange(this.cellRange,!0)}},{key:"redo",value:function(t,e){var n=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),n.unmergeRange(this.cellRange,!0),t.render()}}]),n}(AC.Action);function DC(t,source){if("loadData"===source)return this.undoRedo.clear()}AC.UnmergeCellsAction=xC,AC.RowMoveAction=function(t,e){this.rows=t.slice(),this.finalIndex=e,this.actionType="row_move"},Object(h.inherit)(AC.RowMoveAction,AC.Action),AC.RowMoveAction.prototype.undo=function(t,e){var n=this,r=t.getPlugin("manualRowMove"),o=[].concat(this.rows),l=o.filter((function(a){return a>n.finalIndex})),c=o.filter((function(a){return a<=n.finalIndex})),f=l.sort((function(a,b){return b-a})).concat(c.sort((function(a,b){return a-b})));t.addHookOnce("afterViewRender",e);for(var i=0;i<f.length;i+=1){var h=t.toVisualRow(f[i]);r.moveRow(h,f[i])}t.render(),t.deselectCell(),t.selectRows(this.rows[0],this.rows[0]+this.rows.length-1)},AC.RowMoveAction.prototype.redo=function(t,e){var n=t.getPlugin("manualRowMove");t.addHookOnce("afterViewRender",e),n.moveRows(this.rows.slice(),this.finalIndex),t.render(),t.deselectCell(),t.selectRows(this.finalIndex,this.finalIndex+this.rows.length-1)},AC.prototype.init=function(){var t=this.instance.getSettings().undo,e=void 0===t||t;this.instance.undoRedo||(this.instance.undoRedo=this),e?this.instance.undoRedo.enable():this.instance.undoRedo.disable()},AC.prototype.registerShortcuts=function(){var t=this,e=this.instance.getShortcutManager().getContext("grid"),n={runOnlyIf:function(t){return!t.altKey},group:TC};e.addShortcuts([{keys:[["Control/Meta","z"]],callback:function(){t.undo()}},{keys:[["Control/Meta","y"],["Control/Meta","Shift","z"]],callback:function(){t.redo()}}],n)},AC.prototype.unregisterShortcuts=function(){this.instance.getShortcutManager().getContext("grid").removeShortcutsByGroup(TC)};var NC=lt.a.getSingleton();NC.add("afterUpdateSettings",(function(){var t;null===(t=this.getPlugin("undoRedo"))||void 0===t||t.init()})),NC.register("beforeUndo"),NC.register("afterUndo"),NC.register("beforeRedo"),NC.register("afterRedo"),AC.PLUGIN_KEY="undoRedo",AC.SETTING_KEYS=!0;var HC=AC;var LC,BC,UC,FC,VC,WC,zC,YC=n(934);Object(Yt.e)(U.a),Object(Yt.e)(B),Object(Yt.e)(G),Object(Yt.e)(at),Object(Yt.e)(yt),Object(Yt.e)(k),Object(Yt.e)(Ot),Object(Yt.e)(Pt),Object(Yt.e)(Ht),Object(Yt.e)(l.a),Object(Yt.e)(zt),Object(se.d)(Xt),Object(se.d)(Gt.a),Object(se.d)(ne),Object(se.d)(Kt),Object(se.d)(ae),Object(se.d)(le),Object(se.d)(M.a),Object(se.d)(ue),Object(ve.d)(ce),Object(ve.d)(de),Object(ve.d)(pe),Object(ve.d)(ge),Object(Ee.d)(be),Object(Ee.d)(me),Object(Ee.d)(we),Object(Ee.d)(Oe),Object(Ee.d)(Ce),Object(Ee.d)(Se),Object(Ee.d)(ke),Object(Ee.d)(je.a),Object(Ee.d)(Re),Object(Pe.d)(pn),Object(Pe.d)(Mn),Object(Pe.d)(Un),Object(Pe.d)(Sr),Object(Pe.d)(Yr),Object(Pe.d)(ei),Object(Pe.d)(vi),Object(Pe.d)(ea),Object(Pe.d)(il),Object(Pe.d)(mu),Object(Pe.d)(Wu),Object(Pe.d)(Ju),Object(Pe.d)(us),Object(Pe.d)(Ls),Object(Pe.d)(_d),Object(Pe.d)(bp),Object(Pe.d)(Bp),Object(Pe.d)(iy),Object(Pe.d)(wy),Object(Pe.d)(ig),Object(Pe.d)(vg),Object(Pe.d)(nv),Object(Pe.d)(mv),Object(Pe.d)(ab),Object(Pe.d)(Ob),Object(Pe.d)(Mb),Object(Pe.d)(Cw),Object(Pe.d)(RO),Object(Pe.d)(UO),Object(Pe.d)(tC),Object(Pe.d)(uC),Object(Pe.d)(vC),Object(Pe.d)(HC),WC=o.a,(zC="undefined"!=typeof window&&window.jQuery)&&(zC.fn.handsontable=function(t){var output,e=this.first(),n=e.data("handsontable");if("string"!=typeof t){var r=t||{};return n?n.updateSettings(r):(n=new WC.Core(e[0],r),e.data("handsontable",n),n.init()),e}if(n){if(void 0===n[t])throw new Error("Handsontable do not provide action: ".concat(t));for(var o,l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];output=(o=n[t]).call.apply(o,[n].concat(c)),"destroy"===t&&e.removeData()}return output}),o.a.__GhostTable=Ke,o.a._getListenersCounter=$.b,o.a._getRegisteredMapsCounter=YC.b,o.a.EventManager=$.a;var GC=[j,La,rh,r,Fe,Gr,R,ie,h,E,P,Yl],KC=[c,f];o.a.helper={},o.a.dom={},j.arrayEach(GC,(function(t){j.arrayEach(Object.getOwnPropertyNames(t),(function(e){"_"!==e.charAt(0)&&(o.a.helper[e]=t[e])}))})),j.arrayEach(KC,(function(t){j.arrayEach(Object.getOwnPropertyNames(t),(function(e){"_"!==e.charAt(0)&&(o.a.dom[e]=t[e])}))})),o.a.cellTypes=null!==(LC=o.a.cellTypes)&&void 0!==LC?LC:{},j.arrayEach(Object(Ee.b)(),(function(t){o.a.cellTypes[t]=Object(Ee.a)(t)})),o.a.cellTypes.registerCellType=Ee.d,o.a.cellTypes.getCellType=Ee.a,o.a.editors=null!==(BC=o.a.editors)&&void 0!==BC?BC:{},j.arrayEach(Object(Yt.c)(),(function(t){o.a.editors["".concat(E.toUpperCaseFirst(t),"Editor")]=Object(Yt.a)(t)})),o.a.editors.registerEditor=Yt.e,o.a.editors.getEditor=Yt.a,o.a.renderers=null!==(UC=o.a.renderers)&&void 0!==UC?UC:{},j.arrayEach(Object(se.a)(),(function(t){var e=Object(se.b)(t);"base"===t&&(o.a.renderers.cellDecorator=e),o.a.renderers["".concat(E.toUpperCaseFirst(t),"Renderer")]=e})),o.a.renderers.registerRenderer=se.d,o.a.renderers.getRenderer=se.b,o.a.validators=null!==(FC=o.a.validators)&&void 0!==FC?FC:{},j.arrayEach(Object(ve.a)(),(function(t){o.a.validators["".concat(E.toUpperCaseFirst(t),"Validator")]=Object(ve.b)(t)})),o.a.validators.registerValidator=ve.d,o.a.validators.getValidator=ve.b,o.a.plugins=null!==(VC=o.a.plugins)&&void 0!==VC?VC:{},j.arrayEach(Object(Pe.b)(),(function(t){o.a.plugins[t]=Object(Pe.a)(t)})),o.a.plugins["".concat(E.toUpperCaseFirst(Be.PLUGIN_KEY),"Plugin")]=Be,o.a.plugins.registerPlugin=Pe.d,o.a.plugins.getPlugin=Pe.a;e.a=o.a},941:function(t,e,n){!function(e,r){"use strict";var o;try{o=n(246)}catch(t){}t.exports=function(t){var e="function"==typeof t,n=!!window.addEventListener,r=window.document,o=window.setTimeout,l=function(t,e,r,o){n?t.addEventListener(e,r,!!o):t.attachEvent("on"+e,r)},c=function(t,e,r,o){n?t.removeEventListener(e,r,!!o):t.detachEvent("on"+e,r)},f=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},h=function(t,e){return-1!==(" "+t.className+" ").indexOf(" "+e+" ")},d=function(t,e){h(t,e)||(t.className=""===t.className?e:t.className+" "+e)},y=function(t,e){t.className=f((" "+t.className+" ").replace(" "+e+" "," "))},v=function(t){return/Array/.test(Object.prototype.toString.call(t))},m=function(t){return/Date/.test(Object.prototype.toString.call(t))&&!isNaN(t.getTime())},w=function(t){var e=t.getDay();return 0===e||6===e},O=function(t){return t%4==0&&t%100!=0||t%400==0},C=function(t,e){return[31,O(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},S=function(t){m(t)&&t.setHours(0,0,0,0)},k=function(a,b){return a.getTime()===b.getTime()},j=function(t,e,n){var r,o;for(r in e)(o=void 0!==t[r])&&"object"==typeof e[r]&&null!==e[r]&&void 0===e[r].nodeName?m(e[r])?n&&(t[r]=new Date(e[r].getTime())):v(e[r])?n&&(t[r]=e[r].slice(0)):t[r]=j({},e[r],n):!n&&o||(t[r]=e[r]);return t},R=function(t,e,data){var n;r.createEvent?((n=r.createEvent("HTMLEvents")).initEvent(e,!0,!1),n=j(n,data),t.dispatchEvent(n)):r.createEventObject&&(n=r.createEventObject(),n=j(n,data),t.fireEvent("on"+e,n))},E=function(t){return t.month<0&&(t.year-=Math.ceil(Math.abs(t.month)/12),t.month+=12),t.month>11&&(t.year+=Math.floor(Math.abs(t.month)/12),t.month-=12),t},P={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,firstWeekOfYearMinDays:4,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0},M=function(t,e,abbr){for(e+=t.firstDay;e>=7;)e-=7;return abbr?t.i18n.weekdaysShort[e]:t.i18n.weekdays[e]},_=function(t){var e=[],n="false";if(t.isEmpty){if(!t.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';e.push("is-outside-current-month"),t.enableSelectionDaysInNextAndPreviousMonths||e.push("is-selection-disabled")}return t.isDisabled&&e.push("is-disabled"),t.isToday&&e.push("is-today"),t.isSelected&&(e.push("is-selected"),n="true"),t.hasEvent&&e.push("has-event"),t.isInRange&&e.push("is-inrange"),t.isStartRange&&e.push("is-startrange"),t.isEndRange&&e.push("is-endrange"),'<td data-day="'+t.day+'" class="'+e.join(" ")+'" aria-selected="'+n+'"><button class="pika-button pika-day" type="button" data-pika-year="'+t.year+'" data-pika-month="'+t.month+'" data-pika-day="'+t.day+'">'+t.day+"</button></td>"},T=function(t,e){t.setHours(0,0,0,0);var n=t.getDate(),r=t.getDay(),o=e,l=o-1,c=7,f=function(t){return(t+c-1)%c};t.setDate(n+l-f(r));var h=new Date(t.getFullYear(),0,o),d=864e5,y=(t.getTime()-h.getTime())/d;return 1+Math.round((y-l+f(h.getDay()))/c)},A=function(n,r,o,l){var c=new Date(o,r,n);return'<td class="pika-week">'+(e?t(c).isoWeek():T(c,l))+"</td>"},I=function(t,e,n,r){return'<tr class="pika-row'+(n?" pick-whole-week":"")+(r?" is-selected":"")+'">'+(e?t.reverse():t).join("")+"</tr>"},x=function(t){return"<tbody>"+t.join("")+"</tbody>"},D=function(t){var i,e=[];for(t.showWeekNumber&&e.push("<th></th>"),i=0;i<7;i++)e.push('<th scope="col"><abbr title="'+M(t,i)+'">'+M(t,i,!0)+"</abbr></th>");return"<thead><tr>"+(t.isRTL?e.reverse():e).join("")+"</tr></thead>"},N=function(t,e,n,r,o,l){var i,c,f,h,d,y=t._o,m=n===y.minYear,w=n===y.maxYear,html='<div id="'+l+'" class="pika-title" role="heading" aria-live="assertive">',O=!0,C=!0;for(f=[],i=0;i<12;i++)f.push('<option value="'+(n===o?i-e:12+i-e)+'"'+(i===r?' selected="selected"':"")+(m&&i<y.minMonth||w&&i>y.maxMonth?' disabled="disabled"':"")+">"+y.i18n.months[i]+"</option>");for(h='<div class="pika-label">'+y.i18n.months[r]+'<select class="pika-select pika-select-month" tabindex="-1">'+f.join("")+"</select></div>",v(y.yearRange)?(i=y.yearRange[0],c=y.yearRange[1]+1):(i=n-y.yearRange,c=1+n+y.yearRange),f=[];i<c&&i<=y.maxYear;i++)i>=y.minYear&&f.push('<option value="'+i+'"'+(i===n?' selected="selected"':"")+">"+i+"</option>");return d='<div class="pika-label">'+n+y.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+f.join("")+"</select></div>",y.showMonthAfterYear?html+=d+h:html+=h+d,m&&(0===r||y.minMonth>=r)&&(O=!1),w&&(11===r||y.maxMonth<=r)&&(C=!1),0===e&&(html+='<button class="pika-prev'+(O?"":" is-disabled")+'" type="button">'+y.i18n.previousMonth+"</button>"),e===t._o.numberOfMonths-1&&(html+='<button class="pika-next'+(C?"":" is-disabled")+'" type="button">'+y.i18n.nextMonth+"</button>"),html+"</div>"},H=function(t,data,e){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+e+'">'+D(t)+x(data)+"</table>"},L=function(c){var f=this,d=f.config(c);f._onMouseDown=function(t){if(f._v){var e=(t=t||window.event).target||t.srcElement;if(e)if(h(e,"is-disabled")||(!h(e,"pika-button")||h(e,"is-empty")||h(e.parentNode,"is-disabled")?h(e,"pika-prev")?f.prevMonth():h(e,"pika-next")&&f.nextMonth():(f.setDate(new Date(e.getAttribute("data-pika-year"),e.getAttribute("data-pika-month"),e.getAttribute("data-pika-day"))),d.bound&&o((function(){f.hide(),d.blurFieldOnSelect&&d.field&&d.field.blur()}),100))),h(e,"pika-select"))f._c=!0;else{if(!t.preventDefault)return t.returnValue=!1,!1;t.preventDefault()}}},f._onChange=function(t){var e=(t=t||window.event).target||t.srcElement;e&&(h(e,"pika-select-month")?f.gotoMonth(e.value):h(e,"pika-select-year")&&f.gotoYear(e.value))},f._onKeyChange=function(t){if(t=t||window.event,f.isVisible())switch(t.keyCode){case 13:case 27:d.field&&d.field.blur();break;case 37:f.adjustDate("subtract",1);break;case 38:f.adjustDate("subtract",7);break;case 39:f.adjustDate("add",1);break;case 40:f.adjustDate("add",7);break;case 8:case 46:f.setDate(null)}},f._parseFieldValue=function(){if(d.parse)return d.parse(d.field.value,d.format);if(e){var n=t(d.field.value,d.format,d.formatStrict);return n&&n.isValid()?n.toDate():null}return new Date(Date.parse(d.field.value))},f._onInputChange=function(t){var e;t.firedBy!==f&&(e=f._parseFieldValue(),m(e)&&f.setDate(e),f._v||f.show())},f._onInputFocus=function(){f.show()},f._onInputClick=function(){f.show()},f._onInputBlur=function(){var t=r.activeElement;do{if(h(t,"pika-single"))return}while(t=t.parentNode);f._c||(f._b=o((function(){f.hide()}),50)),f._c=!1},f._onClick=function(t){var e=(t=t||window.event).target||t.srcElement,r=e;if(e){!n&&h(e,"pika-select")&&(e.onchange||(e.setAttribute("onchange","return;"),l(e,"change",f._onChange)));do{if(h(r,"pika-single")||r===d.trigger)return}while(r=r.parentNode);f._v&&e!==d.trigger&&r!==d.trigger&&f.hide()}},f.el=r.createElement("div"),f.el.className="pika-single"+(d.isRTL?" is-rtl":"")+(d.theme?" "+d.theme:""),l(f.el,"mousedown",f._onMouseDown,!0),l(f.el,"touchend",f._onMouseDown,!0),l(f.el,"change",f._onChange),d.keyboardInput&&l(r,"keydown",f._onKeyChange),d.field&&(d.container?d.container.appendChild(f.el):d.bound?r.body.appendChild(f.el):d.field.parentNode.insertBefore(f.el,d.field.nextSibling),l(d.field,"change",f._onInputChange),d.defaultDate||(d.defaultDate=f._parseFieldValue(),d.setDefaultDate=!0));var y=d.defaultDate;m(y)?d.setDefaultDate?f.setDate(y,!0):f.gotoDate(y):f.gotoDate(new Date),d.bound?(this.hide(),f.el.className+=" is-bound",l(d.trigger,"click",f._onInputClick),l(d.trigger,"focus",f._onInputFocus),l(d.trigger,"blur",f._onInputBlur)):this.show()};return L.prototype={config:function(t){this._o||(this._o=j({},P,!0));var e=j(this._o,t,!0);e.isRTL=!!e.isRTL,e.field=e.field&&e.field.nodeName?e.field:null,e.theme="string"==typeof e.theme&&e.theme?e.theme:null,e.bound=!!(void 0!==e.bound?e.field&&e.bound:e.field),e.trigger=e.trigger&&e.trigger.nodeName?e.trigger:e.field,e.disableWeekends=!!e.disableWeekends,e.disableDayFn="function"==typeof e.disableDayFn?e.disableDayFn:null;var n=parseInt(e.numberOfMonths,10)||1;if(e.numberOfMonths=n>4?4:n,m(e.minDate)||(e.minDate=!1),m(e.maxDate)||(e.maxDate=!1),e.minDate&&e.maxDate&&e.maxDate<e.minDate&&(e.maxDate=e.minDate=!1),e.minDate&&this.setMinDate(e.minDate),e.maxDate&&this.setMaxDate(e.maxDate),v(e.yearRange)){var r=(new Date).getFullYear()-10;e.yearRange[0]=parseInt(e.yearRange[0],10)||r,e.yearRange[1]=parseInt(e.yearRange[1],10)||r}else e.yearRange=Math.abs(parseInt(e.yearRange,10))||P.yearRange,e.yearRange>100&&(e.yearRange=100);return e},toString:function(n){return n=n||this._o.format,m(this._d)?this._o.toString?this._o.toString(this._d,n):e?t(this._d).format(n):this._d.toDateString():""},getMoment:function(){return e?t(this._d):null},setMoment:function(n,r){e&&t.isMoment(n)&&this.setDate(n.toDate(),r)},getDate:function(){return m(this._d)?new Date(this._d.getTime()):null},setDate:function(t,e){if(!t)return this._d=null,this._o.field&&(this._o.field.value="",R(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof t&&(t=new Date(Date.parse(t))),m(t)){var n=this._o.minDate,r=this._o.maxDate;m(n)&&t<n?t=n:m(r)&&t>r&&(t=r),this._d=new Date(t.getTime()),S(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),R(this._o.field,"change",{firedBy:this})),e||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},clear:function(){this.setDate(null)},gotoDate:function(t){var e=!0;if(m(t)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),r=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),o=t.getTime();r.setMonth(r.getMonth()+1),r.setDate(r.getDate()-1),e=o<n.getTime()||r.getTime()<o}e&&(this.calendars=[{month:t.getMonth(),year:t.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(t,e){var n,r=this.getDate()||new Date,o=24*parseInt(e)*60*60*1e3;"add"===t?n=new Date(r.valueOf()+o):"subtract"===t&&(n=new Date(r.valueOf()-o)),this.setDate(n)},adjustCalendars:function(){this.calendars[0]=E(this.calendars[0]);for(var t=1;t<this._o.numberOfMonths;t++)this.calendars[t]=E({month:this.calendars[0].month+t,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(t){isNaN(t)||(this.calendars[0].month=parseInt(t,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(t){isNaN(t)||(this.calendars[0].year=parseInt(t,10),this.adjustCalendars())},setMinDate:function(t){t instanceof Date?(S(t),this._o.minDate=t,this._o.minYear=t.getFullYear(),this._o.minMonth=t.getMonth()):(this._o.minDate=P.minDate,this._o.minYear=P.minYear,this._o.minMonth=P.minMonth,this._o.startRange=P.startRange),this.draw()},setMaxDate:function(t){t instanceof Date?(S(t),this._o.maxDate=t,this._o.maxYear=t.getFullYear(),this._o.maxMonth=t.getMonth()):(this._o.maxDate=P.maxDate,this._o.maxYear=P.maxYear,this._o.maxMonth=P.maxMonth,this._o.endRange=P.endRange),this.draw()},setStartRange:function(t){this._o.startRange=t},setEndRange:function(t){this._o.endRange=t},draw:function(t){if(this._v||t){var e,n=this._o,r=n.minYear,l=n.maxYear,c=n.minMonth,f=n.maxMonth,html="";this._y<=r&&(this._y=r,!isNaN(c)&&this._m<c&&(this._m=c)),this._y>=l&&(this._y=l,!isNaN(f)&&this._m>f&&(this._m=f));for(var h=0;h<n.numberOfMonths;h++)e="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2),html+='<div class="pika-lendar">'+N(this,h,this.calendars[h].year,this.calendars[h].month,this.calendars[0].year,e)+this.render(this.calendars[h].year,this.calendars[h].month,e)+"</div>";this.el.innerHTML=html,n.bound&&"hidden"!==n.field.type&&o((function(){n.trigger.focus()}),1),"function"==typeof this._o.onDraw&&this._o.onDraw(this),n.bound&&n.field.setAttribute("aria-label",n.ariaLabel)}},adjustPosition:function(){var t,e,n,o,l,c,f,h,v,m,w,O;if(!this._o.container){if(this.el.style.position="absolute",e=t=this._o.trigger,n=this.el.offsetWidth,o=this.el.offsetHeight,l=window.innerWidth||r.documentElement.clientWidth,c=window.innerHeight||r.documentElement.clientHeight,f=window.pageYOffset||r.body.scrollTop||r.documentElement.scrollTop,w=!0,O=!0,"function"==typeof t.getBoundingClientRect)h=(m=t.getBoundingClientRect()).left+window.pageXOffset,v=m.bottom+window.pageYOffset;else for(h=e.offsetLeft,v=e.offsetTop+e.offsetHeight;e=e.offsetParent;)h+=e.offsetLeft,v+=e.offsetTop;(this._o.reposition&&h+n>l||this._o.position.indexOf("right")>-1&&h-n+t.offsetWidth>0)&&(h=h-n+t.offsetWidth,w=!1),(this._o.reposition&&v+o>c+f||this._o.position.indexOf("top")>-1&&v-o-t.offsetHeight>0)&&(v=v-o-t.offsetHeight,O=!1),this.el.style.left=h+"px",this.el.style.top=v+"px",d(this.el,w?"left-aligned":"right-aligned"),d(this.el,O?"bottom-aligned":"top-aligned"),y(this.el,w?"right-aligned":"left-aligned"),y(this.el,O?"top-aligned":"bottom-aligned")}},render:function(t,e,n){var r=this._o,o=new Date,l=C(t,e),c=new Date(t,e,1).getDay(),data=[],f=[];S(o),r.firstDay>0&&(c-=r.firstDay)<0&&(c+=7);for(var h=0===e?11:e-1,d=11===e?0:e+1,y=0===e?t-1:t,v=11===e?t+1:t,O=C(y,h),j=l+c,R=j;R>7;)R-=7;j+=7-R;for(var E=!1,i=0,P=0;i<j;i++){var M=new Date(t,e,i-c+1),T=!!m(this._d)&&k(M,this._d),x=k(M,o),D=-1!==r.events.indexOf(M.toDateString()),N=i<c||i>=l+c,L=i-c+1,B=e,U=t,F=r.startRange&&k(r.startRange,M),V=r.endRange&&k(r.endRange,M),W=r.startRange&&r.endRange&&r.startRange<M&&M<r.endRange;N&&(i<c?(L=O+L,B=h,U=y):(L-=l,B=d,U=v));var z={day:L,month:B,year:U,hasEvent:D,isSelected:T,isToday:x,isDisabled:r.minDate&&M<r.minDate||r.maxDate&&M>r.maxDate||r.disableWeekends&&w(M)||r.disableDayFn&&r.disableDayFn(M),isEmpty:N,isStartRange:F,isEndRange:V,isInRange:W,showDaysInNextAndPreviousMonths:r.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:r.enableSelectionDaysInNextAndPreviousMonths};r.pickWholeWeek&&T&&(E=!0),f.push(_(z)),7==++P&&(r.showWeekNumber&&f.unshift(A(i-c,e,t,r.firstWeekOfYearMinDays)),data.push(I(f,r.isRTL,r.pickWholeWeek,E)),f=[],P=0,E=!1)}return H(r,data,n)},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),y(this.el,"is-hidden"),this._o.bound&&(l(r,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var t=this._v;!1!==t&&(this._o.bound&&c(r,"click",this._onClick),this._o.container||(this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto"),d(this.el,"is-hidden"),this._v=!1,void 0!==t&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){var t=this._o;this.hide(),c(this.el,"mousedown",this._onMouseDown,!0),c(this.el,"touchend",this._onMouseDown,!0),c(this.el,"change",this._onChange),t.keyboardInput&&c(r,"keydown",this._onKeyChange),t.field&&(c(t.field,"change",this._onInputChange),t.bound&&(c(t.trigger,"click",this._onInputClick),c(t.trigger,"focus",this._onInputFocus),c(t.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},L}(o)}()},942:function(t,e,n){var r;t.exports=function a(t,u,e){function s(o,l){if(!u[o]){if(!t[o]){if(!l&&"function"==typeof r&&r)return r(o,!0);if(n)return n(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var i=u[o]={exports:{}};t[o][0].call(i.exports,(function(e){return s(t[o][1][e]||e)}),i,i.exports,a,t,u,e)}return u[o].exports}for(var n="function"==typeof r&&r,o=0;o<e.length;o++)s(e[o]);return s}({1:[function(t,e,n){!function(t){"use strict";var n,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,l=Math.floor,c="[BigNumber Error] ",f=c+"Number primitive has more than 15 significant digits: ",h=1e14,d=14,y=9007199254740991,v=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],m=1e7,w=1e9;function O(t){var e=0|t;return 0<t||t===e?e:e-1}function C(t){for(var e,n,r=1,i=t.length,a=t[0]+"";r<i;){for(e=t[r++]+"",n=d-e.length;n--;e="0"+e);a+=e}for(i=a.length;48===a.charCodeAt(--i););return a.slice(0,i+1||1)}function q(t,e){var n,r,i=t.c,a=e.c,o=t.s,u=e.s,l=t.e,s=e.e;if(!o||!u)return null;if(n=i&&!i[0],r=a&&!a[0],n||r)return n?r?0:-u:o;if(o!=u)return o;if(n=o<0,r=l==s,!i||!a)return r?0:!i^n?1:-1;if(!r)return s<l^n?1:-1;for(u=(l=i.length)<(s=a.length)?l:s,o=0;o<u;o++)if(i[o]!=a[o])return i[o]>a[o]^n?1:-1;return l==s?0:s<l^n?1:-1}function S(t,e,n,r){if(t<e||n<t||t!==(t<0?o(t):l(t)))throw Error(c+(r||"Argument")+("number"==typeof t?t<e||n<t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function k(t){var e=t.c.length-1;return O(t.e/d)==e&&t.c[e]%2!=0}function j(t,e){return(1<t.length?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function R(t,e,n){var r,i;if(e<0){for(i=n+".";++e;i+=n);t=i+t}else if(++e>(r=t.length)){for(i=n,e-=r;--e;i+=n);t+=i}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}(n=function t(e){var n,E,p,P,s,M,u,_,T,g,A=W.prototype={constructor:W,toString:null,valueOf:null},I=new W(1),b=20,x=4,D=-7,N=21,H=-1e7,L=1e7,B=!1,a=1,U=0,F={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},V="0123456789abcdefghijklmnopqrstuvwxyz";function W(t,e){var n,o,i,a,c,u,h,s,v=this;if(!(v instanceof W))return new W(t,e);if(null==e){if(t instanceof W)return v.s=t.s,v.e=t.e,void(v.c=(t=t.c)?t.slice():t);if((u="number"==typeof t)&&0*t==0){if(v.s=1/t<0?(t=-t,-1):1,t===~~t){for(a=0,c=t;10<=c;c/=10,a++);return v.e=a,void(v.c=[t])}s=String(t)}else{if(s=String(t),!r.test(s))return p(v,s,u);v.s=45==s.charCodeAt(0)?(s=s.slice(1),-1):1}-1<(a=s.indexOf("."))&&(s=s.replace(".","")),0<(c=s.search(/e/i))?(a<0&&(a=c),a+=+s.slice(c+1),s=s.substring(0,c)):a<0&&(a=s.length)}else{if(S(e,2,V.length,"Base"),s=String(t),10==e)return G(v=new W(t instanceof W?t:s),b+v.e+1,x);if(u="number"==typeof t){if(0*t!=0)return p(v,s,u,e);if(v.s=1/t<0?(s=s.slice(1),-1):1,W.DEBUG&&15<s.replace(/^0\.0*|\./,"").length)throw Error(f+t);u=!1}else v.s=45===s.charCodeAt(0)?(s=s.slice(1),-1):1;for(n=V.slice(0,e),a=c=0,h=s.length;c<h;c++)if(n.indexOf(o=s.charAt(c))<0){if("."==o){if(a<c){a=h;continue}}else if(!i&&(s==s.toUpperCase()&&(s=s.toLowerCase())||s==s.toLowerCase()&&(s=s.toUpperCase()))){i=!0,c=-1,a=0;continue}return p(v,String(t),u,e)}-1<(a=(s=E(s,e,10,v.s)).indexOf("."))?s=s.replace(".",""):a=s.length}for(c=0;48===s.charCodeAt(c);c++);for(h=s.length;48===s.charCodeAt(--h););if(s=s.slice(c,++h)){if(h-=c,u&&W.DEBUG&&15<h&&(y<t||t!==l(t)))throw Error(f+v.s*t);if(L<(a=a-c-1))v.c=v.e=null;else if(a<H)v.c=[v.e=0];else{if(v.e=a,v.c=[],c=(a+1)%d,a<0&&(c+=d),c<h){for(c&&v.c.push(+s.slice(0,c)),h-=d;c<h;)v.c.push(+s.slice(c,c+=d));s=s.slice(c),c=d-s.length}else c-=h;for(;c--;s+="0");v.c.push(+s)}}else v.c=[v.e=0]}function i(t,e,n,r){var i,a,o,u,l;if(null==n?n=x:S(n,0,8),!t.c)return t.toString();if(i=t.c[0],o=t.e,null==e)l=C(t.c),l=1==r||2==r&&(o<=D||N<=o)?j(l,o):R(l,o,"0");else if(a=(t=G(new W(t),e,n)).e,u=(l=C(t.c)).length,1==r||2==r&&(e<=a||a<=D)){for(;u<e;l+="0",u++);l=j(l,a)}else if(e-=o,l=R(l,a,"0"),u<a+1){if(0<--e)for(l+=".";e--;l+="0");}else if(0<(e+=a-u))for(a+1==u&&(l+=".");e--;l+="0");return t.s<0&&i?"-"+l:l}function z(t,e){for(var n,r=1,i=new W(t[0]);r<t.length;r++){if(!(n=new W(t[r])).s){i=n;break}e.call(i,n)&&(i=n)}return i}function Y(t,e,n){for(var r=1,i=e.length;!e[--i];e.pop());for(i=e[0];10<=i;i/=10,r++);return(n=r+n*d-1)>L?t.c=t.e=null:t.c=n<H?[t.e=0]:(t.e=n,e),t}function G(t,e,n,r){var i,a,c,u,f,s,y,m=t.c,p=v;if(m){t:{for(i=1,u=m[0];10<=u;u/=10,i++);if((a=e-i)<0)a+=d,c=e,y=(f=m[s=0])/p[i-c-1]%10|0;else if((s=o((a+1)/d))>=m.length){if(!r)break t;for(;m.length<=s;m.push(0));f=y=0,c=(a%=d)-d+(i=1)}else{for(f=u=m[s],i=1;10<=u;u/=10,i++);y=(c=(a%=d)-d+i)<0?0:f/p[i-c-1]%10|0}if(r=r||e<0||null!=m[s+1]||(c<0?f:f%p[i-c-1]),r=n<4?(y||r)&&(0==n||n==(t.s<0?3:2)):5<y||5==y&&(4==n||r||6==n&&(0<a?0<c?f/p[i-c]:0:m[s-1])%10&1||n==(t.s<0?8:7)),e<1||!m[0])return m.length=0,r?(e-=t.e+1,m[0]=p[(d-e%d)%d],t.e=-e||0):m[0]=t.e=0,t;if(0==a?(m.length=s,u=1,s--):(m.length=s+1,u=p[d-a],m[s]=0<c?l(f/p[i-c]%p[c])*u:0),r)for(;;){if(0==s){for(a=1,c=m[0];10<=c;c/=10,a++);for(c=m[0]+=u,u=1;10<=c;c/=10,u++);a!=u&&(t.e++,m[0]==h&&(m[0]=1));break}if(m[s]+=u,m[s]!=h)break;m[s--]=0,u=1}for(a=m.length;0===m[--a];m.pop());}t.e>L?t.c=t.e=null:t.e<H&&(t.c=[t.e=0])}return t}function K(t){var e,n=t.e;return null===n?t.toString():(e=C(t.c),e=n<=D||N<=n?j(e,n):R(e,n,"0"),t.s<0?"-"+e:e)}return W.clone=t,W.ROUND_UP=0,W.ROUND_DOWN=1,W.ROUND_CEIL=2,W.ROUND_FLOOR=3,W.ROUND_HALF_UP=4,W.ROUND_HALF_DOWN=5,W.ROUND_HALF_EVEN=6,W.ROUND_HALF_CEIL=7,W.ROUND_HALF_FLOOR=8,W.EUCLID=9,W.config=W.set=function(t){var e,n;if(null!=t){if("object"!=typeof t)throw Error(c+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(S(n=t[e],0,w,e),b=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(S(n=t[e],0,8,e),x=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((n=t[e])&&n.pop?(S(n[0],-w,0,e),S(n[1],0,w,e),D=n[0],N=n[1]):(S(n,-w,w,e),D=-(N=n<0?-n:n))),t.hasOwnProperty(e="RANGE"))if((n=t[e])&&n.pop)S(n[0],-w,-1,e),S(n[1],1,w,e),H=n[0],L=n[1];else{if(S(n,-w,w,e),!n)throw Error(c+e+" cannot be zero: "+n);H=-(L=n<0?-n:n)}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(c+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw B=!n,Error(c+"crypto unavailable");B=n}else B=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(S(n=t[e],0,9,e),a=n),t.hasOwnProperty(e="POW_PRECISION")&&(S(n=t[e],0,w,e),U=n),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(n=t[e]))throw Error(c+e+" not an object: "+n);F=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.$|[+-.\s]|(.).*\1/.test(n))throw Error(c+e+" invalid: "+n);V=n}}return{DECIMAL_PLACES:b,ROUNDING_MODE:x,EXPONENTIAL_AT:[D,N],RANGE:[H,L],CRYPTO:B,MODULO_MODE:a,POW_PRECISION:U,FORMAT:F,ALPHABET:V}},W.isBigNumber=function(t){return t instanceof W||t&&!0===t._isBigNumber||!1},W.maximum=W.max=function(){return z(arguments,A.lt)},W.minimum=W.min=function(){return z(arguments,A.gt)},W.random=(P=9007199254740992,s=Math.random()*P&2097151?function(){return l(Math.random()*P)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,r,i,a,f=0,u=[],h=new W(I);if(null==t?t=b:S(t,0,w),i=o(t/d),B)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(i*=2));f<i;)9e15<=(a=131072*e[f]+(e[f+1]>>>11))?(n=crypto.getRandomValues(new Uint32Array(2)),e[f]=n[0],e[f+1]=n[1]):(u.push(a%1e14),f+=2);f=i/2}else{if(!crypto.randomBytes)throw B=!1,Error(c+"crypto unavailable");for(e=crypto.randomBytes(i*=7);f<i;)9e15<=(a=281474976710656*(31&e[f])+1099511627776*e[f+1]+4294967296*e[f+2]+16777216*e[f+3]+(e[f+4]<<16)+(e[f+5]<<8)+e[f+6])?crypto.randomBytes(7).copy(e,f):(u.push(a%1e14),f+=7);f=i/7}if(!B)for(;f<i;)(a=s())<9e15&&(u[f++]=a%1e14);for(i=u[--f],t%=d,i&&t&&(a=v[d-t],u[f]=l(i/a)*a);0===u[f];u.pop(),f--);if(f<0)u=[r=0];else{for(r=-1;0===u[0];u.splice(0,1),r-=d);for(f=1,a=u[0];10<=a;a/=10,f++);f<d&&(r-=d-f)}return h.e=r,h.c=u,h}),W.sum=function(){for(var t=1,e=arguments,n=new W(e[0]);t<e.length;)n=n.plus(e[t++]);return n},E=function(){var t="0123456789";function e(t,e,n,r){for(var i,a,o=[0],u=0,l=t.length;u<l;){for(a=o.length;a--;o[a]*=e);for(o[0]+=r.indexOf(t.charAt(u++)),i=0;i<o.length;i++)o[i]>n-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/n|0,o[i]%=n)}return o.reverse()}return function(r,o,l,c,i){var a,f,u,h,s,d,y,p,g=r.indexOf("."),v=b,m=x;for(0<=g&&(h=U,U=0,r=r.replace(".",""),d=(p=new W(o)).pow(r.length-g),U=h,p.c=e(R(C(d.c),d.e,"0"),10,l,t),p.e=p.c.length),u=h=(y=e(r,o,l,i?(a=V,t):(a=t,V))).length;0==y[--h];y.pop());if(!y[0])return a.charAt(0);if(g<0?--u:(d.c=y,d.e=u,d.s=c,y=(d=n(d,p,v,m,l)).c,s=d.r,u=d.e),g=y[f=u+v+1],h=l/2,s=s||f<0||null!=y[f+1],s=m<4?(null!=g||s)&&(0==m||m==(d.s<0?3:2)):h<g||g==h&&(4==m||s||6==m&&1&y[f-1]||m==(d.s<0?8:7)),f<1||!y[0])r=s?R(a.charAt(1),-v,a.charAt(0)):a.charAt(0);else{if(y.length=f,s)for(--l;++y[--f]>l;)y[f]=0,f||(++u,y=[1].concat(y));for(h=y.length;!y[--h];);for(g=0,r="";g<=h;r+=a.charAt(y[g++]));r=R(r,u,a.charAt(0))}return r}}(),n=function(){function t(t,e,n){var r,i,a,o,u=0,l=t.length,s=e%m,c=e/m|0;for(t=t.slice();l--;)u=((i=s*(a=t[l]%m)+(r=c*a+(o=t[l]/m|0)*s)%m*m+u)/n|0)+(r/m|0)+c*o,t[l]=i%n;return u&&(t=[u].concat(t)),t}function e(t,e,n,r){var i,a;if(n!=r)a=r<n?1:-1;else for(i=a=0;i<n;i++)if(t[i]!=e[i]){a=t[i]>e[i]?1:-1;break}return a}function n(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&1<t.length;t.splice(0,1));}return function(r,o,c,f,i){var a,y,u,v,s,m,w,p,g,C,S,k,j,R,b,E,P,M=r.s==o.s?1:-1,_=r.c,T=o.c;if(!(_&&_[0]&&T&&T[0]))return new W(r.s&&o.s&&(_?!T||_[0]!=T[0]:T)?_&&0==_[0]||!T?0*M:M/0:NaN);for(g=(p=new W(M)).c=[],M=c+(y=r.e-o.e)+1,i||(i=h,y=O(r.e/d)-O(o.e/d),M=M/d|0),u=0;T[u]==(_[u]||0);u++);if(T[u]>(_[u]||0)&&y--,M<0)g.push(1),v=!0;else{for(R=_.length,E=T.length,M+=2,1<(s=l(i/(T[u=0]+1)))&&(T=t(T,s,i),_=t(_,s,i),E=T.length,R=_.length),j=E,S=(C=_.slice(0,E)).length;S<E;C[S++]=0);P=T.slice(),P=[0].concat(P),b=T[0],T[1]>=i/2&&b++;do{if(s=0,(a=e(T,C,E,S))<0){if(k=C[0],E!=S&&(k=k*i+(C[1]||0)),1<(s=l(k/b)))for(i<=s&&(s=i-1),w=(m=t(T,s,i)).length,S=C.length;1==e(m,C,w,S);)s--,n(m,E<w?P:T,w,i),w=m.length,a=1;else 0==s&&(a=s=1),w=(m=T.slice()).length;if(w<S&&(m=[0].concat(m)),n(C,m,S,i),S=C.length,-1==a)for(;e(T,C,E,S)<1;)s++,n(C,E<S?P:T,S,i),S=C.length}else 0===a&&(s++,C=[0]);g[u++]=s,C[0]?C[S++]=_[j]||0:(C=[_[j]],S=1)}while((j++<R||null!=C[0])&&M--);v=null!=C[0],g[0]||g.splice(0,1)}if(i==h){for(u=1,M=g[0];10<=M;M/=10,u++);G(p,c+(p.e=u+y*d-1)+1,f,v)}else p.e=y,p.r=+v;return p}}(),M=/^(-?)0([xbo])(?=\w[\w.]*$)/i,u=/^([^.]+)\.$/,_=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,g=/^\s*\+(?=[\w.])|^\s+|\s+$/g,p=function(t,e,n,r){var i,a=n?e:e.replace(g,"");if(T.test(a))t.s=isNaN(a)?null:a<0?-1:1,t.c=t.e=null;else{if(!n&&(a=a.replace(M,(function(t,e,n){return i="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=i?t:e})),r&&(i=r,a=a.replace(u,"$1").replace(_,"0.$1")),e!=a))return new W(a,i);if(W.DEBUG)throw Error(c+"Not a"+(r?" base "+r:"")+" number: "+e);t.c=t.e=t.s=null}},A.absoluteValue=A.abs=function(){var t=new W(this);return t.s<0&&(t.s=1),t},A.comparedTo=function(t,e){return q(this,new W(t,e))},A.decimalPlaces=A.dp=function(t,e){var n,r,i;if(null!=t)return S(t,0,w),null==e?e=x:S(e,0,8),G(new W(this),t+this.e+1,e);if(!(n=this.c))return null;if(r=((i=n.length-1)-O(this.e/d))*d,i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},A.dividedBy=A.div=function(t,e){return n(this,new W(t,e),b,x)},A.dividedToIntegerBy=A.idiv=function(t,e){return n(this,new W(t,e),0,1)},A.exponentiatedBy=A.pow=function(t,e){var n,r,i,a,f,u,h,s,y=this;if((t=new W(t)).c&&!t.isInteger())throw Error(c+"Exponent not an integer: "+K(t));if(null!=e&&(e=new W(e)),f=14<t.e,!y.c||!y.c[0]||1==y.c[0]&&!y.e&&1==y.c.length||!t.c||!t.c[0])return s=new W(Math.pow(+K(y),f?2-k(t):+K(t))),e?s.mod(e):s;if(u=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new W(NaN);(r=!u&&y.isInteger()&&e.isInteger())&&(y=y.mod(e))}else{if(9<t.e&&(0<y.e||y.e<-1||(0==y.e?1<y.c[0]||f&&24e7<=y.c[1]:y.c[0]<8e13||f&&y.c[0]<=9999975e7)))return a=y.s<0&&k(t)?-0:0,-1<y.e&&(a=1/a),new W(u?1/a:a);U&&(a=o(U/d+2))}for(h=f?(n=new W(.5),u&&(t.s=1),k(t)):(i=Math.abs(+K(t)))%2,s=new W(I);;){if(h){if(!(s=s.times(y)).c)break;a?s.c.length>a&&(s.c.length=a):r&&(s=s.mod(e))}if(i){if(0===(i=l(i/2)))break;h=i%2}else if(G(t=t.times(n),t.e+1,1),14<t.e)h=k(t);else{if(0==(i=+K(t)))break;h=i%2}y=y.times(y),a?y.c&&y.c.length>a&&(y.c.length=a):r&&(y=y.mod(e))}return r?s:(u&&(s=I.div(s)),e?s.mod(e):a?G(s,U,x,void 0):s)},A.integerValue=function(t){var e=new W(this);return null==t?t=x:S(t,0,8),G(e,e.e+1,t)},A.isEqualTo=A.eq=function(t,e){return 0===q(this,new W(t,e))},A.isFinite=function(){return!!this.c},A.isGreaterThan=A.gt=function(t,e){return 0<q(this,new W(t,e))},A.isGreaterThanOrEqualTo=A.gte=function(t,e){return 1===(e=q(this,new W(t,e)))||0===e},A.isInteger=function(){return!!this.c&&O(this.e/d)>this.c.length-2},A.isLessThan=A.lt=function(t,e){return q(this,new W(t,e))<0},A.isLessThanOrEqualTo=A.lte=function(t,e){return-1===(e=q(this,new W(t,e)))||0===e},A.isNaN=function(){return!this.s},A.isNegative=function(){return this.s<0},A.isPositive=function(){return 0<this.s},A.isZero=function(){return!!this.c&&0==this.c[0]},A.minus=function(t,e){var n,r,i,a,o=this,u=o.s;if(e=(t=new W(t,e)).s,!u||!e)return new W(NaN);if(u!=e)return t.s=-e,o.plus(t);var l=o.e/d,s=t.e/d,c=o.c,f=t.c;if(!l||!s){if(!c||!f)return c?(t.s=-e,t):new W(f?o:NaN);if(!c[0]||!f[0])return f[0]?(t.s=-e,t):new W(c[0]?o:3==x?-0:0)}if(l=O(l),s=O(s),c=c.slice(),u=l-s){for((i=(a=u<0)?(u=-u,c):(s=l,f)).reverse(),e=u;e--;i.push(0));i.reverse()}else for(r=(a=(u=c.length)<(e=f.length))?u:e,u=e=0;e<r;e++)if(c[e]!=f[e]){a=c[e]<f[e];break}if(a&&(i=c,c=f,f=i,t.s=-t.s),0<(e=(r=f.length)-(n=c.length)))for(;e--;c[n++]=0);for(e=h-1;u<r;){if(c[--r]<f[r]){for(n=r;n&&!c[--n];c[n]=e);--c[n],c[r]+=h}c[r]-=f[r]}for(;0==c[0];c.splice(0,1),--s);return c[0]?Y(t,c,s):(t.s=3==x?-1:1,t.c=[t.e=0],t)},A.modulo=A.mod=function(t,e){var r,o,i=this;return t=new W(t,e),!i.c||!t.s||t.c&&!t.c[0]?new W(NaN):!t.c||i.c&&!i.c[0]?new W(i):(9==a?(o=t.s,t.s=1,r=n(i,t,0,3),t.s=o,r.s*=o):r=n(i,t,0,a),(t=i.minus(r.times(t))).c[0]||1!=a||(t.s=i.s),t)},A.multipliedBy=A.times=function(t,e){var n,r,i,a,o,u,l,s,c,f,p,g,y,v,w,C=this,S=C.c,b=(t=new W(t,e)).c;if(!(S&&b&&S[0]&&b[0]))return!C.s||!t.s||S&&!S[0]&&!b||b&&!b[0]&&!S?t.c=t.e=t.s=null:(t.s*=C.s,S&&b?(t.c=[0],t.e=0):t.c=t.e=null),t;for(r=O(C.e/d)+O(t.e/d),t.s*=C.s,(l=S.length)<(f=b.length)&&(y=S,S=b,b=y,i=l,l=f,f=i),i=l+f,y=[];i--;y.push(0));for(v=h,w=m,i=f;0<=--i;){for(n=0,p=b[i]%w,g=b[i]/w|0,a=i+(o=l);i<a;)n=((s=p*(s=S[--o]%w)+(u=g*s+(c=S[o]/w|0)*p)%w*w+y[a]+n)/v|0)+(u/w|0)+g*c,y[a--]=s%v;y[a]=n}return n?++r:y.splice(0,1),Y(t,y,r)},A.negated=function(){var t=new W(this);return t.s=-t.s||null,t},A.plus=function(t,e){var n,r=this,i=r.s;if(e=(t=new W(t,e)).s,!i||!e)return new W(NaN);if(i!=e)return t.s=-e,r.minus(t);var a=r.e/d,o=t.e/d,u=r.c,l=t.c;if(!a||!o){if(!u||!l)return new W(i/0);if(!u[0]||!l[0])return l[0]?t:new W(u[0]?r:0*i)}if(a=O(a),o=O(o),u=u.slice(),i=a-o){for((n=0<i?(o=a,l):(i=-i,u)).reverse();i--;n.push(0));n.reverse()}for((i=u.length)-(e=l.length)<0&&(n=l,l=u,u=n,e=i),i=0;e;)i=(u[--e]=u[e]+l[e]+i)/h|0,u[e]=h===u[e]?0:u[e]%h;return i&&(u=[i].concat(u),++o),Y(t,u,o)},A.precision=A.sd=function(t,e){var n,r,i;if(null!=t&&t!==!!t)return S(t,1,w),null==e?e=x:S(e,0,8),G(new W(this),t,e);if(!(n=this.c))return null;if(r=(i=n.length-1)*d+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];10<=i;i/=10,r++);}return t&&this.e+1>r&&(r=this.e+1),r},A.shiftedBy=function(t){return S(t,-y,y),this.times("1e"+t)},A.squareRoot=A.sqrt=function(){var t,e,r,o,i,a=this,l=a.c,u=a.s,c=a.e,s=b+4,f=new W("0.5");if(1!==u||!l||!l[0])return new W(!u||u<0&&(!l||l[0])?NaN:l?a:1/0);if((r=0==(u=Math.sqrt(+K(a)))||u==1/0?(((e=C(l)).length+c)%2==0&&(e+="0"),u=Math.sqrt(+e),c=O((c+1)/2)-(c<0||c%2),new W(e=u==1/0?"1e"+c:(e=u.toExponential()).slice(0,e.indexOf("e")+1)+c)):new W(u+"")).c[0])for((u=(c=r.e)+s)<3&&(u=0);;)if(i=r,r=f.times(i.plus(n(a,i,s,1))),C(i.c).slice(0,u)===(e=C(r.c)).slice(0,u)){if(r.e<c&&--u,"9999"!=(e=e.slice(u-3,u+1))&&(o||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(G(r,r.e+b+2,1),t=!r.times(r).eq(a));break}if(!o&&(G(i,i.e+b+2,0),i.times(i).eq(a))){r=i;break}s+=4,u+=4,o=1}return G(r,r.e+b+1,x,t)},A.toExponential=function(t,e){return null!=t&&(S(t,0,w),t++),i(this,t,e,1)},A.toFixed=function(t,e){return null!=t&&(S(t,0,w),t=t+this.e+1),i(this,t,e)},A.toFormat=function(t,e,n){var r;if(null==n)null!=t&&e&&"object"==typeof e?(n=e,e=null):t&&"object"==typeof t?(n=t,t=e=null):n=F;else if("object"!=typeof n)throw Error(c+"Argument not an object: "+n);if(r=this.toFixed(t,e),this.c){var i,a=r.split("."),o=+n.groupSize,u=+n.secondaryGroupSize,l=n.groupSeparator||"",s=a[0],f=a[1],h=this.s<0,p=h?s.slice(1):s,g=p.length;if(u&&(i=o,o=u,g-=u=i),0<o&&0<g){for(i=g%o||o,s=p.substr(0,i);i<g;i+=o)s+=l+p.substr(i,o);0<u&&(s+=l+p.slice(i)),h&&(s="-"+s)}r=f?s+(n.decimalSeparator||"")+((u=+n.fractionGroupSize)?f.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):f):s}return(n.prefix||"")+r+(n.suffix||"")},A.toFraction=function(t){var e,r,o,i,a,l,u,f,s,h,y,p,g=this,m=g.c;if(null!=t&&(!(u=new W(t)).isInteger()&&(u.c||1!==u.s)||u.lt(I)))throw Error(c+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+K(u));if(!m)return new W(g);for(e=new W(I),s=r=new W(I),o=f=new W(I),p=C(m),a=e.e=p.length-g.e-1,e.c[0]=v[(l=a%d)<0?d+l:l],t=!t||0<u.comparedTo(e)?0<a?e:s:u,l=L,L=1/0,u=new W(p),f.c[0]=0;h=n(u,e,0,1),1!=(i=r.plus(h.times(o))).comparedTo(t);)r=o,o=i,s=f.plus(h.times(i=s)),f=i,e=u.minus(h.times(i=e)),u=i;return i=n(t.minus(r),o,0,1),f=f.plus(i.times(s)),r=r.plus(i.times(o)),f.s=s.s=g.s,y=n(s,o,a*=2,x).minus(g).abs().comparedTo(n(f,r,a,x).minus(g).abs())<1?[s,o]:[f,r],L=l,y},A.toNumber=function(){return+K(this)},A.toPrecision=function(t,e){return null!=t&&S(t,1,w),i(this,t,e,2)},A.toString=function(t){var e,n=this,r=n.s,i=n.e;return null===i?r?(e="Infinity",r<0&&(e="-"+e)):e="NaN":(e=null==t?i<=D||N<=i?j(C(n.c),i):R(C(n.c),i,"0"):10===t?R(C((n=G(new W(n),b+i+1,x)).c),n.e,"0"):(S(t,2,V.length,"Base"),E(R(C(n.c),i,"0"),10,t,r,!0)),r<0&&n.c[0]&&(e="-"+e)),e},A.valueOf=A.toJSON=function(){return K(this)},A._isBigNumber=!0,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(A[Symbol.toStringTag]="BigNumber",A[Symbol.for("nodejs.util.inspect.custom")]=A.valueOf),null!=e&&W.set(e),W}()).default=n.BigNumber=n,void 0!==e&&e.exports?e.exports=n:(t||(t="undefined"!=typeof self&&self?self:window),t.BigNumber=n)}(this)},{}],2:[function(t,e,n){"use strict";e.exports={languageTag:"en-US",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},spaceSeparated:!1,ordinal:function(t){var e=t%10;return 1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$",position:"prefix",code:"USD"},currencyFormat:{thousandSeparated:!0,totalLength:4,spaceSeparated:!0},formats:{fourDigits:{totalLength:4,spaceSeparated:!0},fullWithTwoDecimals:{output:"currency",thousandSeparated:!0,mantissa:2},fullWithTwoDecimalsNoCurrency:{thousandSeparated:!0,mantissa:2},fullWithNoDecimals:{output:"currency",thousandSeparated:!0,mantissa:0}}}},{}],3:[function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=t("./globalState"),l=t("./validating"),u=t("./parsing"),c=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],f={general:{scale:1024,suffixes:c,marker:"bd"},binary:{scale:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],marker:"b"},decimal:{scale:1e3,suffixes:c,marker:"d"}},h={totalLength:0,characteristic:0,forceAverage:!1,average:!1,mantissa:-1,optionalMantissa:!0,thousandSeparated:!1,spaceSeparated:!1,negative:"sign",forceSign:!1};function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0;if("string"==typeof e&&(e=u.parseFormat(e)),!l.validateFormat(e))return"ERROR: invalid format";var r=e.prefix||"",i=e.postfix||"",a=function(t,e,n){switch(e.output){case"currency":return function(t,e,n){var r=n.currentCurrency(),i=Object.assign({},h,e),a=void 0,o="",u=!!i.totalLength||!!i.forceAverage||i.average,l=e.currencyPosition||r.position,s=e.currencySymbol||r.symbol;i.spaceSeparated&&(o=" "),"infix"===l&&(a=o+s+o);var c=v({instance:t,providedFormat:e,state:n,decimalSeparator:a});return"prefix"===l&&(c=t._value<0&&"sign"===i.negative?"-".concat(o).concat(s).concat(c.slice(1)):s+o+c),l&&"postfix"!==l||(c=c+(o=u?"":o)+s),c}(t,e=m(e,o.currentCurrencyDefaultFormat()),o);case"percent":return function(t,e,n,r){var i=e.prefixSymbol,a=v({instance:r(100*t._value),providedFormat:e,state:n}),o=Object.assign({},h,e);return i?"%".concat(o.spaceSeparated?" ":"").concat(a):"".concat(a).concat(o.spaceSeparated?" ":"","%")}(t,e=m(e,o.currentPercentageDefaultFormat()),o,n);case"byte":return e=m(e,o.currentByteDefaultFormat()),O=t,S=o,k=n,j=(C=e).base||"binary",b=f[j],E=(R=d(O._value,b.suffixes,b.scale)).value,P=R.suffix,M=v({instance:k(E),providedFormat:C,state:S,defaults:S.currentByteDefaultFormat()}),_=S.currentAbbreviations(),"".concat(M).concat(_.spaced?" ":"").concat(P);case"time":return e=m(e,o.currentTimeDefaultFormat()),y=t,w=Math.floor(y._value/60/60),p=Math.floor((y._value-60*w*60)/60),g=Math.round(y._value-60*w*60-60*p),"".concat(w,":").concat(p<10?"0":"").concat(p,":").concat(g<10?"0":"").concat(g);case"ordinal":return r=t,i=e=m(e,o.currentOrdinalDefaultFormat()),l=(a=o).currentOrdinal(),u=Object.assign({},h,i),c=v({instance:r,providedFormat:i,state:a}),s=l(r._value),"".concat(c).concat(u.spaceSeparated?" ":"").concat(s);default:return v({instance:t,providedFormat:e,numbro:n})}var r,i,a,l,u,c,s,y,w,p,g,O,C,S,k,j,b,R,E,P,M,_}(t,e,n);return(a=r+a)+i}function d(t,e,n){var r=e[0],i=Math.abs(t);if(n<=i){for(var a=1;a<e.length;++a){var o=Math.pow(n,a),u=Math.pow(n,a+1);if(o<=i&&i<u){r=e[a],t/=o;break}}r===e[0]&&(t/=Math.pow(n,e.length-1),r=e[e.length-1])}return{value:t,suffix:r}}function p(t){for(var e="",n=0;n<t;n++)e+="0";return e}function y(t,e){return-1!==t.toString().indexOf("e")?function(t,e){var n=t.toString(),o=r(n.split("e"),2),i=o[0],a=o[1],l=r(i.split("."),2),u=l[0],c=l[1],s=void 0===c?"":c;if(0<+a)n=u+s+p(a-s.length);else{var f=".";f=+u<0?"-0".concat(f):"0".concat(f);var h=(p(-a-1)+Math.abs(u)+s).substr(0,e);h.length<e&&(h+=p(e-h.length)),n=f+h}return 0<+a&&0<e&&(n+=".".concat(p(e))),n}(t,e):(Math.round(+"".concat(t,"e+").concat(e))/Math.pow(10,e)).toFixed(e)}function v(t){var e=t.instance,n=t.providedFormat,l=t.state,i=void 0===l?o:l,a=t.decimalSeparator,c=t.defaults,u=void 0===c?i.currentDefaults():c,f=e._value;if(0===f&&i.hasZeroFormat())return i.getZeroFormat();if(!isFinite(f))return f.toString();var s,d,v,p,g,m,w,O,C=Object.assign({},h,u,n),S=C.totalLength,b=S?0:C.characteristic,k=C.optionalCharacteristic,j=C.forceAverage,R=!!S||!!j||C.average,E=S?-1:R&&void 0===n.mantissa?0:C.mantissa,P=!S&&(void 0===n.optionalMantissa?-1===E:C.optionalMantissa),M=C.trimMantissa,_=C.thousandSeparated,T=C.spaceSeparated,A=C.negative,I=C.forceSign,x=C.exponential,D="";if(R){var N=function(t){var e=t.value,n=t.forceAverage,r=t.abbreviations,i=t.spaceSeparated,a=void 0!==i&&i,o=t.totalLength,u=void 0===o?0:o,l="",s=Math.abs(e),c=-1;if(s>=Math.pow(10,12)&&!n||"trillion"===n?(l=r.trillion,e/=Math.pow(10,12)):s<Math.pow(10,12)&&s>=Math.pow(10,9)&&!n||"billion"===n?(l=r.billion,e/=Math.pow(10,9)):s<Math.pow(10,9)&&s>=Math.pow(10,6)&&!n||"million"===n?(l=r.million,e/=Math.pow(10,6)):(s<Math.pow(10,6)&&s>=Math.pow(10,3)&&!n||"thousand"===n)&&(l=r.thousand,e/=Math.pow(10,3)),l&&(l=(a?" ":"")+l),u){var f=e.toString().split(".")[0];c=Math.max(u-f.length,0)}return{value:e,abbreviation:l,mantissaPrecision:c}}({value:f,forceAverage:j,abbreviations:i.currentAbbreviations(),spaceSeparated:T,totalLength:S});f=N.value,D+=N.abbreviation,S&&(E=N.mantissaPrecision)}if(x){var H=(d=(s={value:f,characteristicPrecision:b}).value,p=void 0===(v=s.characteristicPrecision)?0:v,m=(g=r(d.toExponential().split("e"),2))[0],w=g[1],O=+m,p&&1<p&&(O*=Math.pow(10,p-1),w=0<=(w=+w-(p-1))?"+".concat(w):w),{value:O,abbreviation:"e".concat(w)});f=H.value,D=H.abbreviation+D}var L,B,U,F=function(t,e,n,o,i){if(-1===o)return t;var a=y(e,o),l=r(a.toString().split("."),2),u=l[0],c=l[1],s=void 0===c?"":c;if(s.match(/^0+$/)&&(n||i))return u;var f=s.match(/0+$/);return i&&f?"".concat(u,".").concat(s.toString().slice(0,f.index)):a.toString()}(f.toString(),f,P,E,M);return F=function(t,e,n,r,i){var a=r.currentDelimiters(),o=a.thousands;i=i||a.decimal;var u=a.thousandsSize||3,l=t.toString(),s=l.split(".")[0],c=l.split(".")[1];return n&&(e<0&&(s=s.slice(1)),function(t,e){for(var n=[],r=0,i=t;0<i;i--)r===e&&(n.unshift(i),r=0),r++;return n}(s.length,u).forEach((function(t,e){s=s.slice(0,t+e)+o+s.slice(t+e)})),e<0&&(s="-".concat(s))),c?s+i+c:s}(F=function(t,e,n,o){var i=t,a=r(i.toString().split("."),2),l=a[0],u=a[1];if(l.match(/^-?0$/)&&n)return u?"".concat(l.replace("0",""),".").concat(u):l.replace("0","");if(l.length<o)for(var c=o-l.length,s=0;s<c;s++)i="0".concat(i);return i.toString()}(F,0,k,b),f,_,i,a),(R||x)&&(F+=D),(I||f<0)&&(L=F,U=A,F=0===(B=f)?L:0==+L?L.replace("-",""):0<B?"+".concat(L):"sign"===U?L:"(".concat(L.replace("-",""),")")),F}function m(t,e){if(!t)return e;var n=Object.keys(t);return 1===n.length&&"output"===n[0]?e:t}e.exports=function(t){return{format:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return i.apply(void 0,n.concat([t]))},getByteUnit:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(t){var e=f.general;return d(t._value,e.suffixes,e.scale).suffix}.apply(void 0,n.concat([t]))},getBinaryByteUnit:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(t){var e=f.binary;return d(t._value,e.suffixes,e.scale).suffix}.apply(void 0,n.concat([t]))},getDecimalByteUnit:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(t){var e=f.decimal;return d(t._value,e.suffixes,e.scale).suffix}.apply(void 0,n.concat([t]))},formatOrDefault:m}}},{"./globalState":4,"./parsing":8,"./validating":10}],4:[function(t,e,n){"use strict";var i=t("./en-US"),r=t("./validating"),a=t("./parsing"),o={},u=void 0,l={},s=null,c={};function f(t){u=t}function p(){return l[u]}o.languages=function(){return Object.assign({},l)},o.currentLanguage=function(){return u},o.currentCurrency=function(){return p().currency},o.currentAbbreviations=function(){return p().abbreviations},o.currentDelimiters=function(){return p().delimiters},o.currentOrdinal=function(){return p().ordinal},o.currentDefaults=function(){return Object.assign({},p().defaults,c)},o.currentOrdinalDefaultFormat=function(){return Object.assign({},o.currentDefaults(),p().ordinalFormat)},o.currentByteDefaultFormat=function(){return Object.assign({},o.currentDefaults(),p().byteFormat)},o.currentPercentageDefaultFormat=function(){return Object.assign({},o.currentDefaults(),p().percentageFormat)},o.currentCurrencyDefaultFormat=function(){return Object.assign({},o.currentDefaults(),p().currencyFormat)},o.currentTimeDefaultFormat=function(){return Object.assign({},o.currentDefaults(),p().timeFormat)},o.setDefaults=function(t){t=a.parseFormat(t),r.validateFormat(t)&&(c=t)},o.getZeroFormat=function(){return s},o.setZeroFormat=function(t){return s="string"==typeof t?t:null},o.hasZeroFormat=function(){return null!==s},o.languageData=function(t){if(t){if(l[t])return l[t];throw new Error('Unknown tag "'.concat(t,'"'))}return p()},o.registerLanguage=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!r.validateLanguage(t))throw new Error("Invalid language data");l[t.languageTag]=t,e&&f(t.languageTag)},o.setLanguage=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:i.languageTag;if(!l[t]){var n=t.split("-")[0],r=Object.keys(l).find((function(t){return t.split("-")[0]===n}));return l[r]?void f(r):void f(e)}f(t)},o.registerLanguage(i),u=i.languageTag,e.exports=o},{"./en-US":2,"./parsing":8,"./validating":10}],5:[function(t,e,n){"use strict";e.exports=function(e){return{loadLanguagesInNode:function(n){return r=e,void n.forEach((function(e){var n=void 0;try{n=t("../languages/".concat(e))}catch(n){console.error('Unable to load "'.concat(e,'". No matching language file found.'))}n&&r.registerLanguage(n)}));var r}}}},{}],6:[function(t,e,n){"use strict";var r=t("bignumber.js");function a(t,e,n){var o=new r(t._value),i=e;return n.isNumbro(e)&&(i=e._value),i=new r(i),t._value=o.minus(i).toNumber(),t}e.exports=function(u){return{add:function(t,e){return o=e,i=u,a=new r((n=t)._value),l=o,i.isNumbro(o)&&(l=o._value),l=new r(l),n._value=a.plus(l).toNumber(),n;var n,o,i,a,l},subtract:function(t,e){return a(t,e,u)},multiply:function(t,e){return o=e,i=u,a=new r((n=t)._value),l=o,i.isNumbro(o)&&(l=o._value),l=new r(l),n._value=a.times(l).toNumber(),n;var n,o,i,a,l},divide:function(t,e){return o=e,i=u,a=new r((n=t)._value),l=o,i.isNumbro(o)&&(l=o._value),l=new r(l),n._value=a.dividedBy(l).toNumber(),n;var n,o,i,a,l},set:function(t,e){return n=t,i=r=e,u.isNumbro(r)&&(i=r._value),n._value=i,n;var n,r,i},difference:function(t,e){return n=e,a(i=(r=u)(t._value),n,r),Math.abs(i._value);var n,r,i}}}},{"bignumber.js":1}],7:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=t("./globalState"),r=t("./validating"),o=t("./loading")(g),u=t("./unformatting"),l=t("./formatting")(g),s=t("./manipulating")(g),c=t("./parsing"),f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._value=e}var e,n,r;return e=t,(n=[{key:"clone",value:function(){return g(this._value)}},{key:"format",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return l.format(this,t)}},{key:"formatCurrency",value:function(t){return"string"==typeof t&&(t=c.parseFormat(t)),(t=l.formatOrDefault(t,a.currentCurrencyDefaultFormat())).output="currency",l.format(this,t)}},{key:"formatTime",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.output="time",l.format(this,t)}},{key:"binaryByteUnits",value:function(){return l.getBinaryByteUnit(this)}},{key:"decimalByteUnits",value:function(){return l.getDecimalByteUnit(this)}},{key:"byteUnits",value:function(){return l.getByteUnit(this)}},{key:"difference",value:function(t){return s.difference(this,t)}},{key:"add",value:function(t){return s.add(this,t)}},{key:"subtract",value:function(t){return s.subtract(this,t)}},{key:"multiply",value:function(t){return s.multiply(this,t)}},{key:"divide",value:function(t){return s.divide(this,t)}},{key:"set",value:function(t){return s.set(this,p(t))}},{key:"value",value:function(){return this._value}},{key:"valueOf",value:function(){return this._value}}])&&i(e.prototype,n),r&&i(e,r),t}();function p(t){var e=t;return g.isNumbro(t)?e=t._value:"string"==typeof t?e=g.unformat(t):isNaN(t)&&(e=NaN),e}function g(t){return new f(p(t))}g.version="2.1.2",g.isNumbro=function(t){return t instanceof f},g.language=a.currentLanguage,g.registerLanguage=a.registerLanguage,g.setLanguage=a.setLanguage,g.languages=a.languages,g.languageData=a.languageData,g.zeroFormat=a.setZeroFormat,g.defaultFormat=a.currentDefaults,g.setDefaults=a.setDefaults,g.defaultCurrencyFormat=a.currentCurrencyDefaultFormat,g.validate=r.validate,g.loadLanguagesInNode=o.loadLanguagesInNode,g.unformat=u.unformat,e.exports=g},{"./formatting":3,"./globalState":4,"./loading":5,"./manipulating":6,"./parsing":8,"./unformatting":9,"./validating":10}],8:[function(t,e,n){"use strict";e.exports={parseFormat:function(t){var e,n,r,i,a,o,u,l,s,c,f,p,g,h,d,y,v,m,b,w,O=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return"string"!=typeof t?t:(n=O,a=O,function(t,e){if(-1===t.indexOf("$")){if(-1===t.indexOf("%"))return-1!==t.indexOf("bd")?(e.output="byte",e.base="general"):-1!==t.indexOf("b")?(e.output="byte",e.base="binary"):-1!==t.indexOf("d")?(e.output="byte",e.base="decimal"):-1===t.indexOf(":")?-1!==t.indexOf("o")&&(e.output="ordinal"):e.output="time";e.output="percent"}else e.output="currency"}(t=(o=(i=t=(r=(e=t).match(/^{([^}]*)}/))?(n.prefix=r[1],e.slice(r[0].length)):e).match(/{([^}]*)}$/))?(a.postfix=o[1],i.slice(0,-o[0].length)):i,O),u=O,(l=t.match(/[1-9]+[0-9]*/))&&(u.totalLength=+l[0]),s=O,(c=t.split(".")[0].match(/0+/))&&(s.characteristic=c[0].length),function(t,e){if(-1!==t.indexOf(".")){var n=t.split(".")[0];e.optionalCharacteristic=-1===n.indexOf("0")}}(t,O),f=O,-1!==t.indexOf("a")&&(f.average=!0),g=O,-1!==(p=t).indexOf("K")?g.forceAverage="thousand":-1!==p.indexOf("M")?g.forceAverage="million":-1!==p.indexOf("B")?g.forceAverage="billion":-1!==p.indexOf("T")&&(g.forceAverage="trillion"),function(t,e){var n=t.split(".")[1];if(n){var r=n.match(/0+/);r&&(e.mantissa=r[0].length)}}(t,O),d=O,(h=t).match(/\[\.]/)?d.optionalMantissa=!0:h.match(/\./)&&(d.optionalMantissa=!1),y=O,-1!==t.indexOf(",")&&(y.thousandSeparated=!0),v=O,-1!==t.indexOf(" ")&&(v.spaceSeparated=!0),b=O,(m=t).match(/^\+?\([^)]*\)$/)&&(b.negative="parenthesis"),m.match(/^\+?-/)&&(b.negative="sign"),w=O,t.match(/^\+/)&&(w.forceSign=!0),O)}}},{}],9:[function(p,t,e){"use strict";var n=[{key:"ZiB",factor:Math.pow(1024,7)},{key:"ZB",factor:Math.pow(1e3,7)},{key:"YiB",factor:Math.pow(1024,8)},{key:"YB",factor:Math.pow(1e3,8)},{key:"TiB",factor:Math.pow(1024,4)},{key:"TB",factor:Math.pow(1e3,4)},{key:"PiB",factor:Math.pow(1024,5)},{key:"PB",factor:Math.pow(1e3,5)},{key:"MiB",factor:Math.pow(1024,2)},{key:"MB",factor:Math.pow(1e3,2)},{key:"KiB",factor:Math.pow(1024,1)},{key:"KB",factor:Math.pow(1e3,1)},{key:"GiB",factor:Math.pow(1024,3)},{key:"GB",factor:Math.pow(1e3,3)},{key:"EiB",factor:Math.pow(1024,6)},{key:"EB",factor:Math.pow(1e3,6)},{key:"B",factor:1}];function r(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function g(t,e){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",l=3<arguments.length?arguments[3]:void 0,i=4<arguments.length?arguments[4]:void 0,a=5<arguments.length?arguments[5]:void 0,c=6<arguments.length?arguments[6]:void 0;if(""!==t)return t===i?0:function t(e,o){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=3<arguments.length?arguments[3]:void 0,a=4<arguments.length?arguments[4]:void 0,c=5<arguments.length?arguments[5]:void 0,u=6<arguments.length?arguments[6]:void 0;if(!isNaN(+e))return+e;var f="",s=e.replace(/(^[^(]*)\((.*)\)([^)]*$)/,"$1$2$3");if(s!==e)return-1*t(s,o,l,i,a,c,u);for(var h=0;h<n.length;h++){var d=n[h];if((f=e.replace(d.key,""))!==e)return t(f,o,l,i,a,c,u)*d.factor}if((f=e.replace("%",""))!==e)return t(f,o,l,i,a,c,u)/100;var p=parseFloat(e);if(!isNaN(p)){var g=i(p);if(g&&"."!==g&&(f=e.replace(new RegExp("".concat(r(g),"$")),""))!==e)return t(f,o,l,i,a,c,u);var y={};Object.keys(c).forEach((function(t){y[c[t]]=t}));for(var v=Object.keys(y).sort().reverse(),m=v.length,w=0;w<m;w++){var O=v[w],b=y[O];if((f=e.replace(O,""))!==e){var C=void 0;switch(b){case"thousand":C=Math.pow(10,3);break;case"million":C=Math.pow(10,6);break;case"billion":C=Math.pow(10,9);break;case"trillion":C=Math.pow(10,12)}return t(f,o,l,i,a,c,u)*C}}}}(function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",o=t.replace(n,"");return(o=o.replace(new RegExp("([0-9])".concat(r(e.thousands),"([0-9])"),"g"),"$1$2")).replace(e.decimal,".")}(t,e,o),e,o,l,i,a,c)}t.exports={unformat:function(t,e){var n,r,i,a=p("./globalState"),o=a.currentDelimiters(),u=a.currentCurrency().symbol,l=a.currentOrdinal(),s=a.getZeroFormat(),c=a.currentAbbreviations(),f=void 0;if("string"==typeof t)f=function(t,e){if(!t.indexOf(":")||":"===e.thousands)return!1;var n=t.split(":");if(3!==n.length)return!1;var r=+n[0],i=+n[1],a=+n[2];return!isNaN(r)&&!isNaN(i)&&!isNaN(a)}(t,o)?(r=+(n=t.split(":"))[0],i=+n[1],+n[2]+60*i+3600*r):g(t,o,u,l,s,c,e);else{if("number"!=typeof t)return;f=t}if(void 0!==f)return f}}},{"./globalState":4}],10:[function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=t("./unformatting"),a=/^[a-z]{2,3}(-[a-zA-Z]{4})?(-([A-Z]{2}|[0-9]{3}))?$/,p={output:{type:"string",validValues:["currency","percent","byte","time","ordinal","number"]},base:{type:"string",validValues:["decimal","binary","general"],restriction:function(t,e){return"byte"===e.output},message:"`base` must be provided only when the output is `byte`",mandatory:function(t){return"byte"===t.output}},characteristic:{type:"number",restriction:function(t){return 0<=t},message:"value must be positive"},prefix:"string",postfix:"string",forceAverage:{type:"string",validValues:["trillion","billion","million","thousand"]},average:"boolean",currencyPosition:{type:"string",validValues:["prefix","infix","postfix"]},currencySymbol:"string",totalLength:{type:"number",restrictions:[{restriction:function(t){return 0<=t},message:"value must be positive"},{restriction:function(t,e){return!e.exponential},message:"`totalLength` is incompatible with `exponential`"}]},mantissa:{type:"number",restriction:function(t){return 0<=t},message:"value must be positive"},optionalMantissa:"boolean",trimMantissa:"boolean",optionalCharacteristic:"boolean",thousandSeparated:"boolean",spaceSeparated:"boolean",abbreviations:{type:"object",children:{thousand:"string",million:"string",billion:"string",trillion:"string"}},negative:{type:"string",validValues:["sign","parenthesis"]},forceSign:"boolean",exponential:{type:"boolean"},prefixSymbol:{type:"boolean",restriction:function(t,e){return"percent"===e.output},message:"`prefixSymbol` can be provided only when the output is `percent`"}},l={languageTag:{type:"string",mandatory:!0,restriction:function(t){return t.match(a)},message:"the language tag must follow the BCP 47 specification (see https://tools.ieft.org/html/bcp47)"},delimiters:{type:"object",children:{thousands:"string",decimal:"string",thousandsSize:"number"},mandatory:!0},abbreviations:{type:"object",children:{thousand:{type:"string",mandatory:!0},million:{type:"string",mandatory:!0},billion:{type:"string",mandatory:!0},trillion:{type:"string",mandatory:!0}},mandatory:!0},spaceSeparated:"boolean",ordinal:{type:"function",mandatory:!0},currency:{type:"object",children:{symbol:"string",position:"string",code:"string"},mandatory:!0},defaults:"format",ordinalFormat:"format",byteFormat:"format",percentageFormat:"format",currencyFormat:"format",timeDefaults:"format",formats:{type:"object",children:{fourDigits:{type:"format",mandatory:!0},fullWithTwoDecimals:{type:"format",mandatory:!0},fullWithTwoDecimalsNoCurrency:{type:"format",mandatory:!0},fullWithNoDecimals:{type:"format",mandatory:!0}}}};function u(t){return!!i.unformat(t)}function g(t,s,e){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],l=Object.keys(t).map((function(n){if(!s[n])return console.error("".concat(e," Invalid key: ").concat(n)),!1;var r=t[n],l=s[n];if("string"==typeof l&&(l={type:l}),"format"===l.type){if(!g(r,p,"[Validate ".concat(n,"]"),!0))return!1}else if(o(r)!==l.type)return console.error("".concat(e," ").concat(n,' type mismatched: "').concat(l.type,'" expected, "').concat(o(r),'" provided')),!1;if(l.restrictions&&l.restrictions.length)for(var c=l.restrictions.length,i=0;i<c;i++){var a=l.restrictions[i],f=a.restriction,u=a.message;if(!f(r,t))return console.error("".concat(e," ").concat(n," invalid value: ").concat(u)),!1}return l.restriction&&!l.restriction(r,t)?(console.error("".concat(e," ").concat(n," invalid value: ").concat(l.message)),!1):l.validValues&&-1===l.validValues.indexOf(r)?(console.error("".concat(e," ").concat(n," invalid value: must be among ").concat(JSON.stringify(l.validValues),', "').concat(r,'" provided')),!1):!(l.children&&!g(r,l.children,"[Validate ".concat(n,"]")))}));return n||l.push.apply(l,r(Object.keys(s).map((function(n){var r=s[n];if("string"==typeof r&&(r={type:r}),r.mandatory){var o=r.mandatory;if("function"==typeof o&&(o=o(t)),o&&void 0===t[n])return console.error("".concat(e,' Missing mandatory key "').concat(n,'"')),!1}return!0})))),l.reduce((function(t,e){return t&&e}),!0)}function c(t){return g(t,p,"[Validate format]")}e.exports={validate:function(t,e){var n=u(t),r=c(e);return n&&r},validateFormat:c,validateInput:u,validateLanguage:function(t){return g(t,l,"[Validate language]")}}},{"./unformatting":9}]},{},[7])(7)},943:function(t,e,n){"use strict";n(313)("WeakSet",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n(434))},944:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n(195),n(242),n(6),n(40),n(44);var r=n(764),o=n(809),l=new Map([["indexesSequence",{getListWithInsertedItems:r.a,getListWithRemovedItems:r.b}],["physicallyIndexed",{getListWithInsertedItems:o.a,getListWithRemovedItems:o.b}]]),c=function(t){if(!1===l.has(t))throw new Error("Alter strategy with ID '".concat(t,"' does not exist."));return l.get(t)}}}]);